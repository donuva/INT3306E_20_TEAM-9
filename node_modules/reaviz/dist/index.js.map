{"version":3,"file":"index.js","sources":["../src/common/Axis/LinearAxis/LinearAxisTickLabel.tsx","../src/common/Axis/LinearAxis/LinearAxisTickLine.tsx","../src/common/utils/formatting.ts","../src/common/utils/ticks.ts","../src/common/utils/size.ts","../src/common/Axis/LinearAxis/LinearAxisTickSeries.tsx","../src/common/Axis/LinearAxis/LinearAxisLine.tsx","../src/common/Axis/LinearAxis/LinearAxis.tsx","../src/common/Axis/LinearAxis/LinearXAxis.tsx","../src/common/Axis/LinearAxis/LinearYAxis.tsx","../src/common/Axis/LinearAxis/helpers.ts","../src/common/Axis/RadialAxis/RadialAxisTickSeries/RadialAxisTickLine.tsx","../src/common/Axis/RadialAxis/RadialAxisTickSeries/RadialAxisTickLabel.tsx","../src/common/Axis/RadialAxis/RadialAxisTickSeries/RadialAxisTick.tsx","../src/common/Axis/RadialAxis/RadialAxisTickSeries/RadialAxisTickSeries.tsx","../src/common/Axis/RadialAxis/RadialAxisArcSeries/RadialAxisArc.tsx","../src/common/Axis/RadialAxis/RadialAxisArcSeries/utils.ts","../src/common/Axis/RadialAxis/RadialAxisArcSeries/RadialAxisArcSeries.tsx","../src/common/Axis/RadialAxis/RadialAxisArcSeries/RadialAxisArcLine.tsx","../src/common/utils/bigint.ts","../src/common/utils/dimensions.ts","../src/common/utils/domains.ts","../src/common/utils/interpolation.ts","../src/common/utils/position.ts","../src/common/utils/selection.ts","../src/common/utils/stroke.ts","../src/common/utils/math.ts","../src/common/utils/functions.ts","../src/common/utils/array.ts","../src/common/utils/wrapText.tsx","../src/common/Axis/RadialAxis/RadialAxis.tsx","../src/common/Gestures/Move.tsx","../src/common/Brush/BrushHandle.tsx","../src/common/Brush/BrushSlice.tsx","../src/common/Brush/Brush.tsx","../src/common/Brush/ChartBrush.tsx","../src/common/containers/ChartContext.ts","../src/common/containers/ChartContainer.tsx","../src/common/data/bigInteger.ts","../src/common/data/builder.ts","../src/common/data/histogram.ts","../src/common/data/barStack.ts","../src/common/data/marimekko.ts","../src/common/data/areaStack.ts","../src/common/data/waterfall.ts","../src/common/Gestures/Pan.tsx","../src/common/Gestures/pinchUtils.ts","../src/common/Gestures/Zoom.tsx","../src/common/legends/DiscreteLegend/DiscreteLegend.tsx","../src/common/legends/DiscreteLegend/DiscreteLegendSymbol.tsx","../src/common/legends/DiscreteLegend/DiscreteLegendEntry.tsx","../src/common/legends/SequentialLegend/SequentialLegend.tsx","../src/common/Gridline/Gridline.tsx","../src/common/Gridline/GridlineSeries.tsx","../src/common/Gridline/GridStripe.tsx","../src/common/MarkLine/MarkLine.tsx","../src/common/Gradient/GradientStop.tsx","../src/common/Gradient/Gradient.tsx","../src/common/Gradient/RadialGradient.tsx","../src/common/Mask/Mask.tsx","../src/common/Mask/Stripes.tsx","../src/common/Tooltip/TooltipTemplate.tsx","../src/common/Tooltip/ChartTooltip.tsx","../src/common/Tooltip/TooltipArea.tsx","../src/common/ZoomPan/ZoomPan.tsx","../src/common/scales/basic.ts","../src/common/scales/marimekko.ts","../src/common/scales/multiSeries.ts","../src/common/scales/radial.ts","../src/common/ZoomPan/ChartZoomPan.tsx","../src/common/Motion/config.ts","../src/common/Motion/MotionPath.tsx","../src/common/color/schemes.ts","../src/common/color/helper.ts","../src/common/Count/useCount.tsx","../src/common/Count/Count.tsx","../src/common/Glow/Glow.tsx","../src/ScatterPlot/ScatterSeries/ScatterPoint.tsx","../src/ScatterPlot/ScatterSeries/ScatterSeries.tsx","../src/ScatterPlot/ScatterPlot.tsx","../src/AreaChart/AreaSeries/PointSeries.tsx","../src/AreaChart/AreaSeries/Area.tsx","../src/AreaChart/AreaSeries/Line.tsx","../src/AreaChart/AreaSeries/AreaSeries.tsx","../src/AreaChart/AreaSeries/StackedNormalizedAreaSeries.tsx","../src/AreaChart/AreaSeries/StackedAreaSeries.tsx","../src/AreaChart/AreaChart.tsx","../src/AreaChart/StackedAreaChart.tsx","../src/AreaChart/StackedNormalizedAreaChart.tsx","../src/BarChart/BarSeries/Bar.tsx","../src/BarChart/BarSeries/BarSeries.tsx","../src/BarChart/BarSeries/RangeLines.tsx","../src/BarChart/BarSeries/StackedBarSeries.tsx","../src/BarChart/BarSeries/StackedNormalizedBarSeries.tsx","../src/BarChart/BarSeries/MarimekkoBarSeries.tsx","../src/BarChart/BarSeries/BarLabel.tsx","../src/BarChart/BarSeries/HistogramBarSeries.tsx","../src/BarChart/BarSeries/GuideBar.tsx","../src/BarChart/BarChart.tsx","../src/BarChart/MarimekkoChart.tsx","../src/BarChart/StackedBarChart.tsx","../src/BarChart/StackedNormalizedBarChart.tsx","../src/BarChart/HistogramBarChart.tsx","../src/LineChart/LineSeries.tsx","../src/LineChart/LineChart.tsx","../src/Map/Map.tsx","../src/Map/MapMarker.tsx","../src/PieChart/PieArcSeries/useInterpolate.ts","../src/common/utils/useHoverIntent.ts","../src/PieChart/PieArcSeries/PieArc.tsx","../src/PieChart/PieArcSeries/findBreakPoint.ts","../src/PieChart/PieArcSeries/PieArcLabel.tsx","../src/PieChart/PieArcSeries/radiusUtils.ts","../src/PieChart/PieArcSeries/PieArcSeries.tsx","../src/PieChart/PieChart.tsx","../src/Sankey/utils.ts","../src/Sankey/Sankey.tsx","../src/Sankey/SankeyLabel/SankeyLabel.tsx","../src/Sankey/SankeyLink/SankeyLink.tsx","../src/Sankey/SankeyNode/SankeyNode.tsx","../src/Sparkline/SparklineChart.tsx","../src/Sparkline/AreaSparklineChart.tsx","../src/Sparkline/BarSparklineChart.tsx","../src/Sparkline/SonarChart.tsx","../src/RadialAreaChart/RadialAreaSeries/RadialArea.tsx","../src/RadialAreaChart/RadialAreaSeries/RadialLine.tsx","../src/RadialScatterPlot/RadialScatterPlot.tsx","../src/RadialScatterPlot/RadialScatterSeries/RadialScatterPoint.tsx","../src/RadialScatterPlot/RadialScatterSeries/RadialScatterSeries.tsx","../src/RadialAreaChart/RadialAreaSeries/RadialPointSeries.tsx","../src/RadialAreaChart/RadialAreaSeries/RadialAreaSeries.tsx","../src/RadialAreaChart/RadialAreaChart.tsx","../node_modules/d3-path/src/path.js","../src/RadialBarChart/RadialBarSeries/MotionBar.tsx","../src/RadialBarChart/RadialBarSeries/RadialGuideBar.tsx","../src/RadialBarChart/RadialBarSeries/RadialBar.tsx","../src/RadialBarChart/RadialBarSeries/RadialBarSeries.tsx","../src/RadialBarChart/RadialBarChart.tsx","../src/RadialGauge/RadialGaugeSeries/RadialGaugeArc.tsx","../src/RadialGauge/RadialGaugeSeries/RadialGaugeLabel/RadialGaugeLabel.tsx","../src/RadialGauge/RadialGaugeSeries/RadialGaugeValueLabel/RadialGaugeValueLabel.tsx","../src/RadialGauge/RadialGaugeSeries/RadialGaugeOuterArc.tsx","../src/RadialGauge/RadialGaugeSeries/RadialGaugeSeries.tsx","../src/RadialGauge/RadialGaugeSeries/StackedRadialGaugeValueLabel/StackedRadialGaugeValueLabel.tsx","../src/RadialGauge/RadialGaugeSeries/StackedRadialGaugeSeries.tsx","../src/RadialGauge/RadialGaugeSeries/StackedRadialGaugeDescriptionLabel/StackedRadialGaugeDescriptionLabel.tsx","../src/RadialGauge/RadialGauge.tsx","../src/Heatmap/HeatmapSeries/HeatmapCell.tsx","../src/Heatmap/HeatmapSeries/HeatmapSeries.tsx","../src/Heatmap/Heatmap.tsx","../src/Heatmap/calendarUtils.ts","../src/Heatmap/CalendarHeatmap.tsx","../src/LinearGauge/LinearGaugeBar.tsx","../src/LinearGauge/LinearGaugeOuterBar.tsx","../src/LinearGauge/LinearGaugeSeries.tsx","../src/LinearGauge/LinearGauge.tsx","../src/VennDiagram/useInterpolate.ts","../src/VennDiagram/VennArc.tsx","../src/VennDiagram/VennLabel.tsx","../src/VennDiagram/VennOuterLabel.tsx","../src/VennDiagram/VennSeries.tsx","../src/VennDiagram/starEuler/starEuler.ts","../src/VennDiagram/VennDiagram.tsx","../src/BubbleChart/Bubble.tsx","../src/BubbleChart/BubbleLabel.tsx","../src/BubbleChart/BubbleSeries.tsx","../src/BubbleChart/BubbleChart.tsx","../src/TreeMap/TreeMapLabel.tsx","../src/TreeMap/TreeMapRect.tsx","../src/TreeMap/TreeMapSeries.tsx","../src/TreeMap/TreeMap.tsx","../src/BarList/BarListSeries.tsx","../src/BarList/BarList.tsx","../src/Meter/MeterColumn.tsx","../src/Meter/Meter.tsx","../src/RadarChart/RadarChartSeries.tsx","../src/RadarChart/RadarChart.tsx","../src/FunnelChart/FunnelArc.tsx","../src/FunnelChart/FunnelAxis/FunnelAxisLabel.tsx","../src/FunnelChart/FunnelAxis/FunnelAxisLine.tsx","../src/FunnelChart/FunnelAxis/FunnelAxis.tsx","../src/FunnelChart/FunnelChart.tsx"],"sourcesContent":["import React, { Component, ReactElement } from 'react';\nimport {\n  LinearAxisTickLine,\n  LinearAxisTickLineProps\n} from './LinearAxisTickLine';\n\nexport interface LinearAxisTickLabelProps {\n  text: string;\n  fullText: string;\n  angle: number;\n  orientation: 'horizontal' | 'vertical';\n  half: 'start' | 'end' | 'center';\n  line: ReactElement<LinearAxisTickLineProps, typeof LinearAxisTickLine>;\n  format?: (v) => any;\n  fill: string;\n  fontSize: number;\n  fontFamily: string;\n  rotation: boolean | number;\n  padding: number | { fromAxis: number; alongAxis: number };\n  textAnchor?: 'start' | 'end' | 'middle';\n  position: 'start' | 'end' | 'center';\n  align: 'start' | 'end' | 'center' | 'inside' | 'outside';\n  className?: any;\n}\n\nexport class LinearAxisTickLabel extends Component<LinearAxisTickLabelProps> {\n  static defaultProps: Partial<LinearAxisTickLabelProps> = {\n    fill: '#8F979F',\n    fontSize: 11,\n    fontFamily: 'sans-serif',\n    rotation: true,\n    padding: 0,\n    align: 'center'\n  };\n\n  getAlign() {\n    const { align, half } = this.props;\n\n    if ((align === 'inside' || align === 'outside') && half === 'center') {\n      return 'center';\n    }\n\n    if (align === 'inside') {\n      return half === 'start' ? 'end' : 'start';\n    }\n\n    if (align === 'outside') {\n      return half === 'start' ? 'start' : 'end';\n    }\n\n    return align;\n  }\n\n  getTickLineSpacing() {\n    const { line } = this.props;\n    if (!line) {\n      return [0, 0];\n    }\n\n    const size = line.props.size;\n    const position = line.props.position;\n\n    if (position === 'start') {\n      return [size * -1, 0];\n    } else if (position === 'end') {\n      return [0, size];\n    } else {\n      return [size * -0.5, size * 0.5];\n    }\n  }\n\n  getOffset() {\n    const { padding, position, rotation, orientation } = this.props;\n\n    const adjustedPadding =\n      typeof padding === 'number'\n        ? {\n          fromAxis: padding as number,\n          alongAxis: padding as number\n        }\n        : (padding as { fromAxis: number; alongAxis: number });\n\n    const spacing = this.getTickLineSpacing();\n    const offset1 =\n      position === 'start'\n        ? spacing[0] - adjustedPadding.fromAxis\n        : position === 'end'\n          ? spacing[1] + adjustedPadding.fromAxis\n          : 0;\n\n    const align = this.getAlign();\n    let offset2 = rotation === true ? -5 : 0;\n    offset2 +=\n      align === 'center'\n        ? 0\n        : align === 'start'\n          ? -adjustedPadding.alongAxis\n          : adjustedPadding.alongAxis;\n\n    const horz = orientation === 'horizontal';\n    return {\n      [horz ? 'x' : 'y']: offset2,\n      [horz ? 'y' : 'x']: offset1\n    };\n  }\n\n  getTextPosition() {\n    const { angle, orientation, position } = this.props;\n    let transform = '';\n    let textAnchor = '';\n    let alignmentBaseline = 'middle' as 'middle' | 'baseline' | 'hanging';\n\n    if (angle !== 0) {\n      transform = `rotate(${angle})`;\n      textAnchor = 'end';\n    } else {\n      const align = this.getAlign();\n      if (orientation === 'horizontal') {\n        textAnchor =\n          align === 'center' ? 'middle' : align === 'start' ? 'end' : 'start';\n        if (position === 'start') {\n          alignmentBaseline = 'baseline';\n        } else if (position === 'end') {\n          alignmentBaseline = 'hanging';\n        }\n      } else {\n        alignmentBaseline =\n          align === 'center'\n            ? 'middle'\n            : align === 'start'\n              ? 'baseline'\n              : 'hanging';\n        if (position === 'start') {\n          textAnchor = 'end';\n        } else if (position === 'end') {\n          textAnchor = 'start';\n        } else {\n          textAnchor = 'middle';\n        }\n      }\n    }\n\n    return {\n      transform,\n      textAnchor: this.props.textAnchor || textAnchor,\n      alignmentBaseline\n    };\n  }\n\n  render() {\n    const {\n      fill,\n      text,\n      fullText,\n      fontSize,\n      fontFamily,\n      className\n    } = this.props;\n    const { x, y } = this.getOffset();\n    const textPosition = this.getTextPosition();\n\n    return (\n      <g\n        transform={`translate(${x}, ${y})`}\n        fontSize={fontSize}\n        fontFamily={fontFamily}\n      >\n        <title>{fullText}</title>\n        <text {...textPosition} fill={fill} className={className}>\n          {text}\n        </text>\n      </g>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\n\nexport interface LinearAxisTickLineProps {\n  height: number;\n  width: number;\n  orientation: 'horizontal' | 'vertical';\n  size: number;\n  strokeColor?: string;\n  strokeWidth: number;\n  position: 'start' | 'end' | 'center';\n  className?: any;\n}\n\nexport class LinearAxisTickLine extends PureComponent<LinearAxisTickLineProps> {\n  static defaultProps: Partial<LinearAxisTickLineProps> = {\n    strokeColor: '#8F979F',\n    strokeWidth: 1,\n    size: 5\n  };\n\n  positionTick() {\n    const { size, position, orientation } = this.props;\n    const isVertical = orientation === 'vertical';\n    const tickSize = size || 0;\n    const start =\n      position === 'start'\n        ? tickSize * -1\n        : position === 'center'\n          ? tickSize * -0.5\n          : 0;\n    const end = start + tickSize;\n\n    return {\n      x1: isVertical ? end : 0,\n      x2: isVertical ? start : 0,\n      y1: isVertical ? 0 : start,\n      y2: isVertical ? 0 : end\n    };\n  }\n\n  render() {\n    const { strokeColor, strokeWidth, className } = this.props;\n    const path = this.positionTick();\n\n    return (\n      <line\n        className={className}\n        strokeWidth={strokeWidth}\n        stroke={strokeColor}\n        {...path}\n      />\n    );\n  }\n}\n","import { ChartInternalDataTypes } from '../data';\n\n// https://stackoverflow.com/questions/673905/best-way-to-determine-users-locale-within-browser\nconst getNavigatorLanguage = () => {\n  if (typeof window === 'undefined') {\n    return 'en';\n  }\n\n  if (navigator.languages && navigator.languages.length) {\n    return navigator.languages[0];\n  }\n\n  if (\n    (navigator as any).userLanguage ||\n    navigator.language ||\n    (navigator as any).browserLanguage\n  ) {\n    return 'en';\n  }\n};\n\nconst locale = getNavigatorLanguage();\n\nconst options = {\n  year: 'numeric',\n  month: 'numeric',\n  day: 'numeric',\n  hour12: true,\n  formatMatcher: 'best fit'\n};\n\n/**\n * Format a value based on type.\n */\nexport function formatValue(value: ChartInternalDataTypes): string {\n  if (value !== undefined) {\n    if (value instanceof Date) {\n      return (value as Date).toLocaleDateString(locale, options as any);\n    } else if (typeof value === 'number') {\n      return value.toLocaleString();\n    }\n\n    return value as string;\n  }\n\n  return 'No value';\n}\n","import { TimeInterval } from 'd3-time';\n\nconst ONE_DAY = 60 * 60 * 24;\nconst DURATION_TICK_STEPS = [\n  0.001, // 1 ms\n  0.005, // 5 ms\n  0.01, // 10 ms\n  0.05, // 50 ms\n  0.1, // 100 ms\n  0.5, // 500 ms\n  1, // 1 s\n  5, // 5 s\n  10, // 10 s\n  15, // 15 s\n  60, // 1 m\n  60 * 15, // 15 m\n  60 * 30, // 30 m\n  60 * 60, // 1 h\n  60 * 60 * 2, // 2 h\n  60 * 60 * 4, // 4 h\n  60 * 60 * 6, // 6 h\n  60 * 60 * 8, // 8 h\n  60 * 60 * 12, // 12 h\n  ONE_DAY // 24 h\n];\n\n/**\n * Reduce the ticks to the max number of ticks.\n */\nexport function reduceTicks<T>(ticks: T[], maxTicks: number) {\n  if (ticks.length > maxTicks) {\n    const reduced: T[] = [];\n    const modulus = Math.floor(ticks.length / maxTicks);\n\n    for (let i = 0; i < ticks.length; i++) {\n      if (i % modulus === 0) {\n        reduced.push(ticks[i]);\n      }\n    }\n    ticks = reduced;\n  }\n\n  return ticks;\n}\n\n/**\n * Determine the max ticks for the available width.\n */\nexport function getMaxTicks(size: number, dimension: number) {\n  const tickWidth = Math.max(size, 0);\n  return Math.floor(dimension / tickWidth);\n}\n\n/**\n * Formats the ticks in a duration format.\n */\nexport function getDurationTicks(domain, maxTicks) {\n  const domainWidth = domain[1] - domain[0];\n  let tickStep: number | null = null;\n  for (const s of DURATION_TICK_STEPS) {\n    if (domainWidth / s < maxTicks) {\n      tickStep = s;\n      break;\n    }\n  }\n\n  if (tickStep === null) {\n    const numDayTicks = domainWidth / ONE_DAY;\n    const dayStep = Math.ceil(numDayTicks / maxTicks);\n    tickStep = ONE_DAY * dayStep;\n  }\n\n  const ticks = [domain[0]];\n  while (ticks[ticks.length - 1] + tickStep <= domain[1]) {\n    ticks.push(ticks[ticks.length - 1] + tickStep);\n  }\n\n  return ticks;\n}\n\n/**\n * Get the tick values from the scale.\n */\nexport function getTicks(\n  scale: any,\n  tickValues: any[],\n  type: 'value' | 'category' | 'time' | 'duration',\n  maxTicks = 100,\n  interval?: number | TimeInterval\n) {\n  let result;\n\n  if (tickValues) {\n    result = tickValues;\n  } else {\n    if (scale.ticks) {\n      if (type === 'duration') {\n        result = getDurationTicks(scale.domain(), maxTicks);\n      } else if (interval) {\n        result = scale.ticks(interval);\n      } else {\n        if (type === 'time') {\n          // If its time, we need to handle the time count\n          // manually because d3 does this odd rounding\n          result = scale.ticks();\n          result = reduceTicks(result, maxTicks);\n        } else {\n          result = scale.ticks(maxTicks);\n        }\n      }\n    } else {\n      tickValues = scale.domain();\n      result = reduceTicks(tickValues, maxTicks);\n    }\n  }\n\n  return result;\n}\n","export interface TextDimensions {\n  height: number;\n  width: number;\n}\n\nconst cache: { [key: string]: TextDimensions } = {};\n\nexport const calculateDimensions = (\n  text: string,\n  fontFamily: string,\n  fontSize: string | number\n): TextDimensions => {\n  const key = `${text}_${fontFamily}_${fontSize}`;\n\n  // Check if we have a cache hit\n  if (cache[key]) {\n    return cache[key];\n  }\n\n  // If we are in a Node.js environment\n  if (typeof window === 'undefined' || typeof document === 'undefined') {\n    const height = parseInt(typeof fontSize === 'string' ? fontSize : fontSize.toString(), 10);\n    const dimensions = {\n      height,\n      // 8 is an approximation of the width of a character\n      width: text.length * 8\n    };\n\n    cache[key] = dimensions;\n\n    return dimensions;\n  }\n\n  // Create a temporary div element\n  const element = document.createElement('div');\n\n  // Set up the style so the size can be measured\n  element.style.fontFamily = fontFamily;\n  element.style.fontSize = typeof fontSize === 'string' ? fontSize : `${fontSize}px`;\n  element.style.position = 'absolute';\n  element.style.left = '-9999px';\n  element.style.whiteSpace = 'nowrap';\n  element.style.height = 'auto';\n  element.style.fontWeight = 'normal';\n  element.style.lineHeight = 'normal';\n  element.style.width = 'auto';\n  element.style.wordBreak = 'normal';\n\n  // Add the text to the div\n  element.textContent = text;\n\n  // Add the div to the body\n  document.body.appendChild(element);\n\n  // Measure the div\n  const dimensions = {\n    height: element.offsetHeight,\n    width: element.offsetWidth\n  };\n\n  // Remove the div from the body\n  document.body.removeChild(element);\n\n  // Store the result in the cache for future calls\n  cache[key] = dimensions;\n\n  return dimensions;\n};\n","import React, { Component, Fragment, ReactElement } from 'react';\nimport {\n  LinearAxisTickLabel,\n  LinearAxisTickLabelProps\n} from './LinearAxisTickLabel';\nimport {\n  LinearAxisTickLine,\n  LinearAxisTickLineProps\n} from './LinearAxisTickLine';\nimport { formatValue } from '../../utils/formatting';\nimport { getTicks, getMaxTicks } from '../../utils/ticks';\nimport { TimeInterval } from 'd3-time';\nimport { CloneElement } from 'rdk';\nimport { LinearAxisProps } from './LinearAxis';\nimport ellipsize from 'ellipsize';\nimport { max } from 'd3-array';\nimport { calculateDimensions } from '../../utils/size';\n\nexport interface LinearAxisTickSeriesProps {\n  height: number;\n  width: number;\n  scale: any;\n  interval?: number | TimeInterval;\n  tickSize: number;\n  tickValues: any[];\n  orientation: 'horizontal' | 'vertical';\n  label: ReactElement<\n    LinearAxisTickLabelProps,\n    typeof LinearAxisTickLabel\n  > | null;\n  line: ReactElement<LinearAxisTickLineProps, typeof LinearAxisTickLine> | null;\n  axis: LinearAxisProps;\n}\n\ninterface ProcessedTick {\n  text: string;\n  fullText: string;\n  x: number;\n  y: number;\n  height: number;\n  width: number;\n  half: 'start' | 'end' | 'center';\n}\n\nexport class LinearAxisTickSeries extends Component<LinearAxisTickSeriesProps> {\n  static defaultProps: Partial<LinearAxisTickSeriesProps> = {\n    line: <LinearAxisTickLine />,\n    label: <LinearAxisTickLabel />,\n    tickSize: 30\n  };\n\n  /**\n   * Gets the adjusted scale given offsets.\n   */\n  getAdjustedScale() {\n    const { scale } = this.props;\n\n    if (scale.bandwidth) {\n      let offset = scale.bandwidth() / 2;\n      if (scale.round()) {\n        offset = Math.round(offset);\n      }\n\n      return (d) => +scale(d) + offset;\n    } else {\n      return (d) => +scale(d);\n    }\n  }\n\n  /**\n   * Gets the x/y position for a given tick.\n   */\n  getPosition(scaledTick: number) {\n    const { orientation } = this.props;\n\n    if (orientation === 'horizontal') {\n      return { x: scaledTick, y: 0 };\n    } else {\n      return { x: 0, y: scaledTick };\n    }\n  }\n\n  /**\n   * Gets the dimension (height/width) this axis is calculating on.\n   */\n  getDimension() {\n    const { height, width, orientation } = this.props;\n    return orientation === 'vertical' ? height : width;\n  }\n\n  /**\n   * Calculates the rotation angle that the ticks need to be shifted to.\n   * This equation will measure the length of the text in a external canvas\n   * object and determine what the longest label is and rotate until they fit.\n   */\n  getRotationAngle(ticks: any[]): number {\n    if (!this.props.label) {\n      return 0;\n    }\n\n    const label = this.props.label.props;\n    const dimension = this.getDimension();\n    const maxTicksLength = max(ticks, (tick) => tick.width);\n    let angle = 0;\n\n    if (label.rotation) {\n      if (label.rotation === true) {\n        let baseWidth = maxTicksLength;\n        const maxBaseWidth = Math.floor(dimension / ticks.length);\n\n        while (baseWidth > maxBaseWidth && angle > -90) {\n          angle -= 30;\n          baseWidth = Math.cos(angle * (Math.PI / 180)) * maxTicksLength;\n        }\n      } else {\n        angle = label.rotation;\n      }\n    }\n\n    return angle;\n  }\n\n  /**\n   * Gets the formatted label of the tick.\n   */\n  getLabelFormat(): (label: string) => string {\n    const { label, scale } = this.props;\n\n    if (label && label.props.format) {\n      return label.props.format;\n    } else if (scale.tickFormat) {\n      return scale.tickFormat.apply(scale, [5]);\n    } else {\n      return (v) => formatValue(v);\n    }\n  }\n\n  /**\n   * Gets the ticks given the dimensions and scales and returns\n   * the text and position.\n   */\n  getTicks(): ProcessedTick[] {\n    const { scale, tickSize, tickValues, interval, axis, label } = this.props;\n    const dimension = this.getDimension();\n    const maxTicks = getMaxTicks(tickSize, dimension);\n    const ticks = getTicks(scale, tickValues, axis.type, maxTicks, interval);\n    const adjustedScale = this.getAdjustedScale();\n    const format = this.getLabelFormat();\n    const midpoint = dimension / 2;\n\n    return ticks.map((tick) => {\n      const fullText = format(tick);\n      const scaledTick = adjustedScale(tick);\n      const position = this.getPosition(scaledTick);\n      const text = ellipsize(fullText, 18);\n      const size = label\n        ? calculateDimensions(\n          text,\n          label.props.fontFamily,\n          label.props.fontSize.toString()\n        )\n        : {};\n\n      return {\n        ...position,\n        ...size,\n        text,\n        fullText,\n        half:\n          scaledTick === midpoint\n            ? 'center'\n            : scaledTick < midpoint\n              ? 'start'\n              : 'end'\n      };\n    });\n  }\n\n  render() {\n    const { label, line, height, width, orientation } = this.props;\n    const ticks = this.getTicks();\n    const angle = this.getRotationAngle(ticks);\n\n    return (\n      <Fragment>\n        {ticks.map((tick, i) => (\n          <g key={i} transform={`translate(${tick.x}, ${tick.y})`}>\n            {line && (\n              <CloneElement<LinearAxisTickLineProps>\n                element={line}\n                height={height}\n                width={width}\n                orientation={orientation}\n              />\n            )}\n            {label && (\n              <CloneElement<LinearAxisTickLabelProps>\n                element={label}\n                text={tick.text}\n                fullText={tick.fullText}\n                half={tick.half}\n                angle={angle}\n                orientation={orientation}\n                line={line!}\n              />\n            )}\n          </g>\n        ))}\n      </Fragment>\n    );\n  }\n}\n","import React, { Fragment, FC, ReactElement } from 'react';\nimport { GradientProps, Gradient } from '../../Gradient';\nimport { CloneElement, useId } from 'rdk';\n\nexport interface LinearAxisLineProps {\n  height: number;\n  width: number;\n  strokeColor?: string;\n  strokeWidth: number;\n  strokeGradient: ReactElement<GradientProps, typeof Gradient> | null;\n  scale: any;\n  orientation: 'horizontal' | 'vertical';\n  className?: any;\n}\n\nexport const LinearAxisLine: FC<Partial<LinearAxisLineProps>> = ({\n  strokeColor,\n  strokeWidth,\n  strokeGradient,\n  scale,\n  orientation,\n  className\n}) => {\n  const id = useId();\n  const [range0, range1] = scale.range();\n\n  return (\n    <Fragment>\n      <line\n        className={className}\n        x1={orientation === 'vertical' ? 0 : range0}\n        // Workaround for a Chrome/Firefox bug where it won't render gradients for straight lines\n        x2={orientation === 'vertical' ? 0.00001 : range1}\n        y1={orientation === 'vertical' ? range0 : 0}\n        y2={orientation === 'vertical' ? range1 : 0.00001}\n        strokeWidth={strokeWidth}\n        stroke={strokeGradient ? `url(#axis-gradient-${id})` : strokeColor}\n      />\n      {strokeGradient && (\n        <CloneElement<GradientProps>\n          element={strokeGradient}\n          id={`axis-gradient-${id}`}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nLinearAxisLine.defaultProps = {\n  strokeColor: '#8F979F',\n  strokeWidth: 1\n};\n","import React, { Component, createRef, ReactElement } from 'react';\nimport {\n  LinearAxisTickSeries,\n  LinearAxisTickSeriesProps\n} from './LinearAxisTickSeries';\nimport { ChartDataTypes } from '../../data';\nimport { CloneElement } from 'rdk';\nimport { LinearAxisLine, LinearAxisLineProps } from './LinearAxisLine';\n\nexport interface LinearAxisDimensionChanged {\n  height?: number;\n  width?: number;\n}\n\nexport interface LinearAxisProps {\n  domain?: ChartDataTypes[];\n  scaled?: boolean;\n  roundDomains?: boolean;\n  type: 'value' | 'time' | 'category' | 'duration';\n  position: 'start' | 'end' | 'center';\n  tickSeries: ReactElement<\n    LinearAxisTickSeriesProps,\n    typeof LinearAxisTickSeries\n  >;\n  axisLine: ReactElement<LinearAxisLineProps, typeof LinearAxisLine> | null;\n  height: number;\n  width: number;\n  scale: any;\n  orientation: 'horizontal' | 'vertical';\n  onDimensionsChange: (event: LinearAxisDimensionChanged) => void;\n}\n\ninterface LinearAxisState {\n  height?: number;\n  width?: number;\n}\n\nexport class LinearAxis extends Component<LinearAxisProps, LinearAxisState> {\n  static defaultProps: Partial<LinearAxisProps> = {\n    axisLine: <LinearAxisLine />,\n    tickSeries: <LinearAxisTickSeries />,\n    scaled: false,\n    roundDomains: false,\n    onDimensionsChange: () => undefined\n  };\n\n  ref = createRef<SVGGElement>();\n\n  constructor(props: LinearAxisProps) {\n    super(props);\n\n    this.state = {\n      height: props.height,\n      width: props.width\n    };\n  }\n\n  componentDidMount() {\n    this.updateDimensions();\n  }\n\n  componentDidUpdate(prevProps: LinearAxisProps) {\n    const { height, width, scale } = this.props;\n    if (\n      width !== prevProps.width ||\n      height !== prevProps.height ||\n      scale !== prevProps.scale\n    ) {\n      this.updateDimensions();\n    }\n  }\n\n  updateDimensions() {\n    const { onDimensionsChange, orientation, position } = this.props;\n    const shouldOffset = position !== 'center';\n\n    let height;\n    let width;\n    if (shouldOffset) {\n      const dims = this.ref.current!.getBoundingClientRect();\n      width = Math.floor(dims.width);\n      height = Math.floor(dims.height);\n    }\n\n    if (orientation === 'vertical') {\n      if (this.state.width !== width) {\n        this.setState({ width });\n        onDimensionsChange({ width });\n      }\n    } else {\n      if (this.state.height !== height) {\n        this.setState({ height });\n        onDimensionsChange({ height });\n      }\n    }\n  }\n\n  getPosition() {\n    const { position, width, height, orientation } = this.props;\n    let translateY = 0;\n    let translateX = 0;\n\n    if (position === 'end' && orientation === 'horizontal') {\n      translateY = height;\n    } else if (position === 'center' && orientation === 'horizontal') {\n      translateY = height / 2;\n    } else if (position === 'end' && orientation === 'vertical') {\n      translateX = width;\n    } else if (position === 'center' && orientation === 'vertical') {\n      translateX = width / 2;\n    }\n\n    return { translateX, translateY };\n  }\n\n  render() {\n    const {\n      scale,\n      height,\n      width,\n      orientation,\n      axisLine,\n      tickSeries\n    } = this.props;\n    const { translateX, translateY } = this.getPosition();\n\n    return (\n      <g transform={`translate(${translateX}, ${translateY})`} ref={this.ref}>\n        {axisLine && (\n          <CloneElement<LinearAxisLineProps>\n            element={axisLine}\n            height={height}\n            width={width}\n            scale={scale}\n            orientation={orientation}\n          />\n        )}\n        {(tickSeries.props.line || tickSeries.props.label) && (\n          <CloneElement<LinearAxisTickSeriesProps>\n            element={tickSeries}\n            height={height}\n            width={width}\n            scale={scale}\n            orientation={orientation}\n            axis={this.props}\n          />\n        )}\n      </g>\n    );\n  }\n}\n","import React, { FC } from 'react';\nimport {\n  LinearAxisTickLabelProps,\n  LinearAxisTickLabel\n} from './LinearAxisTickLabel';\nimport {\n  LinearAxisTickLineProps,\n  LinearAxisTickLine\n} from './LinearAxisTickLine';\nimport {\n  LinearAxisTickSeriesProps,\n  LinearAxisTickSeries\n} from './LinearAxisTickSeries';\nimport { LinearAxisProps, LinearAxis } from './LinearAxis';\n\nexport const LinearXAxisTickLabel: FC<Partial<LinearAxisTickLabelProps>> = (\n  props\n) => <LinearAxisTickLabel {...props} />;\nLinearXAxisTickLabel.defaultProps = {\n  ...LinearAxisTickLabel.defaultProps,\n  rotation: true,\n  position: 'end',\n  align: 'center'\n};\n\nexport const LinearXAxisTickLine: FC<Partial<LinearAxisTickLineProps>> = (\n  props\n) => <LinearAxisTickLine {...props} />;\nLinearXAxisTickLine.defaultProps = {\n  ...LinearAxisTickLine.defaultProps,\n  position: 'end'\n};\n\nexport const LinearXAxisTickSeries: FC<Partial<LinearAxisTickSeriesProps>> = (\n  props\n) => <LinearAxisTickSeries {...props} />;\nLinearXAxisTickSeries.defaultProps = {\n  ...LinearAxisTickSeries.defaultProps,\n  tickSize: 75,\n  line: <LinearXAxisTickLine />,\n  label: <LinearXAxisTickLabel />\n};\n\nexport const LinearXAxis: FC<Partial<LinearAxisProps>> = (props) => (\n  <LinearAxis {...props} />\n);\nLinearXAxis.defaultProps = {\n  ...LinearAxis.defaultProps,\n  position: 'end',\n  roundDomains: false,\n  scaled: false,\n  type: 'value',\n  orientation: 'horizontal',\n  tickSeries: <LinearXAxisTickSeries />\n};\n","import React, { FC } from 'react';\nimport {\n  LinearAxisTickLabelProps,\n  LinearAxisTickLabel\n} from './LinearAxisTickLabel';\nimport {\n  LinearAxisTickLineProps,\n  LinearAxisTickLine\n} from './LinearAxisTickLine';\nimport {\n  LinearAxisTickSeriesProps,\n  LinearAxisTickSeries\n} from './LinearAxisTickSeries';\nimport { LinearAxisProps, LinearAxis } from './LinearAxis';\n\nexport const LinearYAxisTickLabel: FC<Partial<LinearAxisTickLabelProps>> = (\n  props\n) => <LinearAxisTickLabel {...props} />;\nLinearYAxisTickLabel.defaultProps = {\n  ...LinearAxisTickLabel.defaultProps,\n  rotation: false,\n  position: 'start',\n  align: 'center'\n};\n\nexport const LinearYAxisTickLine: FC<Partial<LinearAxisTickLineProps>> = (\n  props\n) => <LinearAxisTickLine {...props} />;\nLinearYAxisTickLine.defaultProps = {\n  ...LinearAxisTickLine.defaultProps,\n  position: 'start'\n};\n\nexport const LinearYAxisTickSeries: FC<Partial<LinearAxisTickSeriesProps>> = (\n  props\n) => <LinearAxisTickSeries {...props} />;\nLinearYAxisTickSeries.defaultProps = {\n  ...LinearAxisTickSeries.defaultProps,\n  tickSize: 30,\n  line: <LinearYAxisTickLine />,\n  label: <LinearYAxisTickLabel />\n};\n\nexport const LinearYAxis: FC<Partial<LinearAxisProps>> = (props) => (\n  <LinearAxis {...props} />\n);\nLinearYAxis.defaultProps = {\n  ...LinearAxis.defaultProps,\n  orientation: 'vertical',\n  scaled: false,\n  roundDomains: false,\n  type: 'value',\n  position: 'start',\n  tickSeries: <LinearYAxisTickSeries />\n};\n","import { LinearAxisProps } from './LinearAxis';\n\n/**\n * Returns whether the axis has a visual element or not.\n */\nexport const isAxisVisible = (axis: LinearAxisProps) =>\n  !!axis.tickSeries.props.label || !!axis.tickSeries.props.line;\n","import React, { FC } from 'react';\n\nexport interface RadialAxisTickLineProps {\n  /**\n   * Size of the tick line.\n   */\n  size?: number;\n\n  /**\n   * Stroke color of the tick line.\n   */\n  stroke: string;\n\n  /**\n   * Inner radius of the arc.\n   */\n  innerRadius: number;\n\n  /**\n   * Outer radius of the arc.\n   */\n  outerRadius: number;\n\n  /**\n   * Position of the tick line.\n   */\n  position: 'inside' | 'outside';\n}\n\nexport const RadialAxisTickLine: FC<Partial<RadialAxisTickLineProps>> = ({\n  stroke,\n  size,\n  position,\n  innerRadius,\n  outerRadius\n}) => {\n  const x1 = position === 'outside' ? size : -(outerRadius - innerRadius);\n\n  return (\n    <line x1={x1} x2={0} stroke={stroke} style={{ pointerEvents: 'none' }} />\n  );\n};\n\nRadialAxisTickLine.defaultProps = {\n  stroke: 'rgba(113, 128, 141, .5)',\n  size: 10,\n  position: 'inside'\n};\n","import React, { FC, useMemo } from 'react';\nimport { formatValue } from '../../../utils/formatting';\n\nconst rad2deg = (angle: number) => (angle * 180) / Math.PI;\n\nexport interface RadialAxisTickLabelProps {\n  /**\n   * Data to render.\n   */\n  data: any;\n\n  /**\n   * Size of the line.\n   */\n  lineSize: number;\n\n  /**\n   * Color of the text.\n   */\n  fill: string;\n\n  /**\n   * Font size of the text.\n   */\n  fontSize: number;\n\n  /**\n   * Rotation of the text.\n   */\n  rotation: number;\n\n  /**\n   * Font family of the text.\n   */\n  fontFamily: string;\n\n  /**\n   * Index of the tick.\n   */\n  index: number;\n\n  /**\n   * Padding of the tick.\n   */\n  padding: number;\n\n  /**\n   * Point of the tick.\n   */\n  point: any;\n\n  /**\n   * Auto rotate the text.\n   */\n  autoRotate: boolean;\n\n  /**\n   * Format of the label.\n   */\n  format?: (value: any, index: number) => any | string;\n}\n\nexport const RadialAxisTickLabel: FC<Partial<RadialAxisTickLabelProps>> = ({\n  point,\n  autoRotate,\n  rotation,\n  padding,\n  data,\n  fill,\n  fontFamily,\n  fontSize,\n  format,\n  lineSize,\n  index\n}) => {\n  const { transform, textAnchor } = useMemo(() => {\n    let textAnchor;\n    let transform;\n\n    if (autoRotate) {\n      const l = point >= Math.PI;\n      const r = point < 2 * Math.PI;\n\n      // TODO: This centers the text, determine better way later\n      if (\n        (rotation >= 85 && rotation <= 95) ||\n        (rotation <= -85 && rotation >= -95)\n      ) {\n        textAnchor = 'middle';\n      } else if (l && r) {\n        textAnchor = 'end';\n      } else {\n        textAnchor = 'start';\n      }\n\n      transform = `rotate(${90 - rad2deg(point)}, ${padding}, 0)`;\n    } else {\n      const shouldRotate = rotation > 100 && rotation;\n      const rotate = shouldRotate ? 180 : 0;\n      const translate = shouldRotate ? -30 : 0;\n      textAnchor = shouldRotate ? 'end' : 'start';\n      transform = `rotate(${rotate}) translate(${translate})`;\n    }\n\n    return {\n      transform,\n      textAnchor\n    };\n  }, [autoRotate, padding, point, rotation]);\n\n  const text = format ? format(data, index) : formatValue(data);\n\n  return (\n    <g transform={transform}>\n      <title>{text}</title>\n      <text\n        dy=\"0.35em\"\n        x={lineSize + 5}\n        textAnchor={textAnchor}\n        fill={fill}\n        fontFamily={fontFamily}\n        fontSize={fontSize}\n      >\n        {text}\n      </text>\n    </g>\n  );\n};\n\nRadialAxisTickLabel.defaultProps = {\n  fill: '#71808d',\n  fontSize: 11,\n  padding: 15,\n  fontFamily: 'sans-serif',\n  autoRotate: true\n};\n","import React, { FC, ReactElement } from 'react';\nimport {\n  RadialAxisTickLineProps,\n  RadialAxisTickLine\n} from './RadialAxisTickLine';\nimport {\n  RadialAxisTickLabelProps,\n  RadialAxisTickLabel\n} from './RadialAxisTickLabel';\nimport { CloneElement } from 'rdk';\n\nexport interface RadialAxisTickProps {\n  /**\n   * Scale to use for the tick.\n   */\n  scale: any;\n\n  /**\n   * Outer radius of the arc.\n   */\n  outerRadius: number;\n\n  /**\n   * Inner radius of the arc.\n   */\n  innerRadius: number;\n\n  /**\n   * Padding between the tick and the label.\n   */\n  padding: number;\n\n  /**\n   * Data to render.\n   */\n  data: any;\n\n  /**\n   * Index of the tick.\n   */\n  index: number;\n\n  /**\n   * Line element to render.\n   */\n  line: ReactElement<RadialAxisTickLineProps, typeof RadialAxisTickLine> | null;\n\n  /**\n   * Label element to render.\n   */\n  label: ReactElement<\n    RadialAxisTickLabelProps,\n    typeof RadialAxisTickLabel\n  > | null;\n}\n\nexport const RadialAxisTick: FC<Partial<RadialAxisTickProps>> = ({\n  line,\n  label,\n  scale,\n  outerRadius,\n  data,\n  index,\n  padding,\n  innerRadius\n}) => {\n  const point = scale(data);\n  const rotation = (point * 180) / Math.PI - 90;\n  const transform = `rotate(${rotation}) translate(${outerRadius + padding},0)`;\n  const lineSize = line ? line.props.size : 0;\n\n  return (\n    <g transform={transform}>\n      {line && (\n        <CloneElement<RadialAxisTickLineProps>\n          element={line}\n          innerRadius={innerRadius}\n          outerRadius={outerRadius}\n        />\n      )}\n      {label && (\n        <CloneElement<RadialAxisTickLabelProps>\n          element={label}\n          index={index}\n          point={point}\n          rotation={rotation}\n          lineSize={lineSize}\n          data={data}\n        />\n      )}\n    </g>\n  );\n};\n\nRadialAxisTick.defaultProps = {\n  outerRadius: 0,\n  padding: 0,\n  line: <RadialAxisTickLine />,\n  label: <RadialAxisTickLabel />\n};\n","import React, { FC, Fragment, ReactElement } from 'react';\nimport { RadialAxisTick, RadialAxisTickProps } from './RadialAxisTick';\nimport { CloneElement } from 'rdk';\nimport { getTicks } from '../../../utils/ticks';\nimport { TimeInterval } from 'd3-time';\n\nexport interface RadialAxisTickSeriesProps {\n  /**\n   * Scale to use for the tick.\n   */\n  scale: any;\n\n  /**\n   * Number of ticks to render.\n   */\n  count?: number;\n\n  /**\n   * Interval between ticks.\n   */\n  interval?: number | TimeInterval;\n\n  /**\n   * Tick values to render.\n   */\n  tickValues: any[];\n\n  /**\n   * Outer radius of the arc.\n   */\n  outerRadius: number;\n\n  /**\n   * Type of the axis.\n   */\n  type: 'value' | 'category' | 'time' | 'duration';\n\n  /**\n   * Inner radius of the arc.\n   */\n  innerRadius: number;\n\n  /**\n   * Tick element to render.\n   */\n  tick: ReactElement<RadialAxisTickProps, typeof RadialAxisTick>;\n}\n\nexport const RadialAxisTickSeries: FC<Partial<RadialAxisTickSeriesProps>> = ({\n  scale,\n  count,\n  outerRadius,\n  tick,\n  tickValues,\n  innerRadius,\n  interval,\n  type\n}) => {\n  const ticks = getTicks(scale, tickValues, type, count, interval || count);\n\n  return (\n    <Fragment>\n      {ticks.map((data, i) => (\n        <CloneElement<RadialAxisTickProps>\n          element={tick}\n          key={i}\n          index={i}\n          scale={scale}\n          data={data}\n          innerRadius={innerRadius}\n          outerRadius={outerRadius}\n        />\n      ))}\n    </Fragment>\n  );\n};\n\nRadialAxisTickSeries.defaultProps = {\n  count: 12,\n  type: 'time',\n  tick: <RadialAxisTick />\n};\n","import React, { FC } from 'react';\n\nexport interface RadialAxisArcProps {\n  /**\n   * Index of the arc.\n   */\n  index: number;\n\n  /**\n   * Scale to use for the arc.\n   */\n  scale: any;\n\n  /**\n   * Stroke color of the arc.\n   */\n  stroke: ((index: number) => string) | string;\n\n  /**\n   * Stroke dash array of the arc.\n   */\n  strokeDasharray: ((index: number) => string) | string;\n}\n\nexport const RadialAxisArc: FC<Partial<RadialAxisArcProps>> = ({\n  index,\n  stroke,\n  strokeDasharray,\n  scale\n}) => {\n  const r = scale(index);\n  const strokeColor = typeof stroke === 'string' ? stroke : stroke(index);\n  const strokeDash =\n    typeof strokeDasharray === 'string'\n      ? strokeDasharray\n      : strokeDasharray(index);\n\n  return (\n    <circle\n      fill=\"none\"\n      strokeDasharray={strokeDash}\n      stroke={strokeColor}\n      style={{ pointerEvents: 'none' }}\n      cx=\"0\"\n      cy=\"0\"\n      r={r}\n    />\n  );\n};\n\nRadialAxisArc.defaultProps = {\n  stroke: '#71808d',\n  strokeDasharray: '1,4'\n};\n","/**\n * Given a set of arcs, return an array of points for each arc.\n */\nexport const getPointsForLevels = ({ count, outerRadius, ticks, arcs }) => {\n  const levels: Array<Array<{ x: number; y: number }>> = [];\n  const polyangle = (Math.PI * 2) / ticks;\n\n  for (const level of arcs) {\n    const hyp = (level / count) * outerRadius;\n\n    const points: Array<{ x: number; y: number }> = [];\n    for (let vertex = 0; vertex < ticks; vertex++) {\n      const theta = vertex * polyangle;\n      points.push({\n        x: hyp * Math.sin(Math.PI - theta),\n        y: hyp * Math.cos(Math.PI - theta)\n      });\n    }\n\n    levels.push([...points, points[0]]);\n  }\n\n  return levels;\n};\n","import React, { FC, ReactElement } from 'react';\nimport { RadialAxisArc, RadialAxisArcProps } from './RadialAxisArc';\nimport { CloneElement } from 'rdk';\nimport { scaleLinear } from 'd3-scale';\nimport { getPointsForLevels } from './utils';\nimport { RadialAxisArcLine, RadialAxisArcLineProps } from './RadialAxisArcLine';\n\nexport interface RadialAxisArcSeriesProps {\n  /**\n   * Arc element to render.\n   */\n  arc: ReactElement<RadialAxisArcProps, typeof RadialAxisArc>;\n\n  /**\n   * Line element to render.\n   */\n  line: ReactElement<RadialAxisArcLineProps, typeof RadialAxisArcLine>;\n\n  /**\n   * Number of arcs to render.\n   */\n  count: number;\n\n  /**\n   * Inner radius of the arc.\n   */\n  innerRadius: number;\n\n  /**\n   * Outer radius of the arc.\n   */\n  outerRadius: number;\n\n  /**\n   * Calculated tick values by the Radial Axis.\n   */\n  tickValues?: any[];\n}\n\nexport const RadialAxisArcSeries: FC<Partial<RadialAxisArcSeriesProps>> = ({\n  count,\n  innerRadius,\n  outerRadius,\n  line,\n  arc,\n  tickValues\n}) => {\n  const scale = scaleLinear()\n    .domain([0, count])\n    .range([innerRadius, outerRadius]);\n\n  const arcs = scale.ticks(count);\n\n  const points = getPointsForLevels({\n    count,\n    outerRadius,\n    ticks: tickValues.length,\n    arcs\n  });\n\n  return (\n    <>\n      {line && (\n        <>\n          {points.map((d, i) => (\n            <CloneElement<RadialAxisArcLineProps>\n              element={line}\n              key={i}\n              data={d}\n              index={i}\n            />\n          ))}\n        </>\n      )}\n      {arc && (\n        <>\n          {arcs.map((d) => (\n            <CloneElement<RadialAxisArcProps>\n              element={arc}\n              key={d}\n              index={d}\n              scale={scale}\n            />\n          ))}\n        </>\n      )}\n    </>\n  );\n};\n\nRadialAxisArcSeries.defaultProps = {\n  type: 'arc',\n  count: 12,\n  arc: <RadialAxisArc />\n};\n","import { line } from 'd3-shape';\nimport React, { FC } from 'react';\n\nexport interface RadialAxisArcLineProps {\n  /**\n   * Stroke color of the arc.\n   */\n  stroke: ((index: number) => string) | string;\n\n  /**\n   * Data to render the line.\n   */\n  data: Array<{ x: number; y: number }>;\n\n  /**\n   * Index of the arc.\n   */\n  index: number;\n}\n\nexport const RadialAxisArcLine: FC<Partial<RadialAxisArcLineProps>> = ({\n  data,\n  stroke,\n  index\n}) => {\n  const lineGenerator = line<{ x: number; y: number }>()\n    .x((d: any) => d.x)\n    .y((d: any) => d.y);\n\n  const d = lineGenerator(data);\n  const strokeColor = typeof stroke === 'string' ? stroke : stroke(index);\n\n  return (\n    <path\n      d={d}\n      stroke={strokeColor}\n      fill=\"none\"\n      style={{ pointerEvents: 'none' }}\n    />\n  );\n};\n\nRadialAxisArcLine.defaultProps = {\n  stroke: '#71808d'\n};\n","import humanFormat from 'human-format';\n\nconst humanFormatScale = new humanFormat.Scale({\n  k: 1000,\n  M: 1000000,\n  B: 1000000000\n});\n\nconst humanFormatMillionScale = new humanFormat.Scale({\n  M: 1,\n  B: 1000,\n  T: 1000000\n});\n\nconst ONE_MILLION = 1000000;\nconst ONE_BILLION = 1000000000;\n\nexport const humanFormatBigInteger = (bigInteger) => {\n  if (bigInteger.greater(ONE_BILLION)) {\n    return humanFormat(bigInteger.divide(ONE_MILLION).toJSNumber(), {\n      scale: humanFormatMillionScale\n    });\n  }\n  return humanFormat(bigInteger.toJSNumber(), { scale: humanFormatScale });\n};\n\nexport const bigIntegerToLocaleString = (bigInteger) => {\n  let i = 0;\n  let formattedString = '';\n  for (const c of bigInteger.toString().split('').reverse()) {\n    if (i > 0 && i % 3 === 0) {\n      formattedString = ',' + formattedString;\n    }\n    formattedString = c + formattedString;\n    i++;\n  }\n  return formattedString;\n};\n","export interface Dimensions {\n  xOffset: number;\n  yOffset: number;\n  height: number;\n  width: number;\n  chartWidth: number;\n  chartHeight: number;\n  xMargin: number;\n  yMargin: number;\n}\n\nexport interface DimensionParameter {\n  xOffset: number;\n  yOffset: number;\n  yAxis: any;\n  xAxis: any;\n  height: number;\n  width: number;\n  margins: Margins;\n}\n\nexport type Margins =\n  | [number, number]\n  | [number, number, number, number]\n  | number;\n\n/**\n * Given a margins object, returns the top/left/right/bottom positions.\n */\nfunction parseMargins(margins?: Margins) {\n  let top = 0;\n  let right = 0;\n  let bottom = 0;\n  let left = 0;\n\n  if (Array.isArray(margins)) {\n    if (margins.length === 2) {\n      top = margins[0];\n      bottom = margins[0];\n      left = margins[1];\n      right = margins[1];\n    } else if (margins.length === 4) {\n      top = margins[0];\n      right = margins[1];\n      bottom = margins[2];\n      left = margins[3];\n    }\n  } else if (margins !== undefined) {\n    top = margins;\n    right = margins;\n    bottom = margins;\n    left = margins;\n  }\n\n  return {\n    top,\n    right,\n    bottom,\n    left\n  };\n}\n\n/**\n * Calculates the margins for the chart.\n */\nfunction calculateMarginOffsets(\n  height: number,\n  width: number,\n  margins: { left: number; right: number; bottom: number; top: number }\n) {\n  const { left, right, bottom, top } = margins;\n  const newHeight = height - top - bottom;\n  const newWidth = width - left - right;\n\n  return {\n    height: newHeight,\n    width: newWidth\n  };\n}\n\n/**\n * Calculates the dimensions for the chart.\n */\nexport function getDimension({\n  xOffset,\n  yOffset,\n  height,\n  width,\n  margins\n}: DimensionParameter | any): Dimensions {\n  const parsedMargins = parseMargins(margins);\n  const marginDims = calculateMarginOffsets(height, width, parsedMargins);\n  const chartWidth = marginDims.width - xOffset;\n  const chartHeight = marginDims.height - yOffset;\n\n  return {\n    xOffset,\n    yOffset,\n    height,\n    width,\n    chartWidth,\n    chartHeight,\n    xMargin: xOffset + parsedMargins.left,\n    yMargin: parsedMargins.top\n  };\n}\n","import { min, max } from 'd3-array';\n\n/**\n * Gets the min/max values handling nested arrays.\n */\nexport function extent(data: any[], attr: string): number[] {\n  const accessor = (val, fn) => {\n    if (Array.isArray(val.data)) {\n      return fn(val.data, (vv) => vv[attr]);\n    }\n    return val[attr];\n  };\n\n  const minVal = min(data, (d) => accessor(d, min));\n  const maxVal = max(data, (d) => accessor(d, max));\n\n  return [minVal, maxVal];\n}\n\n/**\n * Get the domain for the Y Axis.\n */\nexport function getYDomain({\n  data,\n  scaled = false,\n  isDiverging = false\n}): number[] {\n  const [startY, endY] = extent(data, 'y');\n  const [startY1, endY1] = extent(data, 'y1');\n\n  // If dealing w/ negative numbers, we should\n  // normalize the top and bottom values\n  if (startY < 0 || isDiverging) {\n    const posStart = -startY;\n    const maxNum = Math.max(posStart, endY);\n\n    return [-maxNum, maxNum];\n  }\n\n  // Scaled start scale at non-zero\n  if (scaled) {\n    return [startY1, endY1];\n  }\n\n  // Start at 0 based\n  return [0, endY1];\n}\n\n/**\n * Get the domain for the X Axis.\n */\nexport function getXDomain({\n  data,\n  scaled = false,\n  isDiverging = false\n}): number[] {\n  const startX0 = extent(data, 'x0')[0];\n  const endX1 = extent(data, 'x1')[1];\n\n  // Histograms use dates for start/end\n  if (typeof startX0 === 'number' && typeof endX1 === 'number') {\n    // If dealing w/ negative numbers, we should\n    // normalize the top and bottom values\n    if (startX0 < 0 || isDiverging) {\n      const posStart = -startX0;\n      const maxNum = Math.max(posStart, endX1);\n\n      return [-maxNum, maxNum];\n    }\n\n    // If not scaled, return 0/max domains\n    if (!scaled) {\n      return [0, endX1];\n    }\n  }\n\n  // Scaled start scale at non-zero\n  return [startX0, endX1];\n}\n","import { curveLinear, curveMonotoneX, curveStep } from 'd3-shape';\n\nexport type InterpolationTypes = 'linear' | 'smooth' | 'step';\nexport type RadialInterpolationTypes = 'linear' | 'smooth';\n\n/**\n * Helper function for interpolation.\n */\nexport function interpolate(\n  type: InterpolationTypes | RadialInterpolationTypes\n) {\n  if (type === 'smooth') {\n    return curveMonotoneX;\n  } else if (type === 'step') {\n    return curveStep;\n  } else {\n    return curveLinear;\n  }\n}\n","import { bisector } from 'd3-array';\nimport { applyToPoint, inverse, applyToPoints } from 'transformation-matrix';\n\ntype PointObjectNotation = { x: number; y: number };\n\n/**\n * Add ability to calculate scale band position.\n * Reference: https://stackoverflow.com/questions/38633082/d3-getting-invert-value-of-band-scales\n */\nconst scaleBandInvert = (scale) => {\n  const domain = scale.domain();\n  const paddingOuter = scale(domain[0]);\n  const eachBand = scale.step();\n  const [, end] = scale.range();\n\n  return (offset) => {\n    let index = Math.floor((offset - paddingOuter) / eachBand);\n\n    // Handle horizontal charts...\n    if (end === 0) {\n      index = index * -1;\n    }\n\n    return domain[Math.max(0, Math.min(index, domain.length - 1))];\n  };\n};\n\n/**\n * Given a point position, get the closes data point in the dataset.\n */\nexport const getClosestPoint = (pos: number, scale, data, attr = 'x') => {\n  if (scale.invert) {\n    const domain = scale.invert(pos);\n\n    // Select the index\n    const bisect = bisector((d: any) => d[attr]).right;\n    const index = bisect(data, domain);\n\n    // Determine min index\n    const minIndex = Math.max(0, index - 1);\n    const before = data[minIndex];\n\n    // Determine max index\n    const maxIndex = Math.min(data.length - 1, index);\n    const after = data[maxIndex];\n\n    // Determine which is closest to the point\n    let beforeVal = before[attr];\n    let afterVal = after[attr];\n    beforeVal = domain - beforeVal;\n    afterVal = afterVal - domain;\n\n    return beforeVal < afterVal ? before : after;\n  } else {\n    // If we have a band scale, handle that special\n    const domain = scale.domain();\n    let prop;\n\n    // Of course the Marimekko is a pain...\n    if (scale.mariemkoInvert) {\n      prop = scale.mariemkoInvert(pos);\n    } else {\n      prop = scaleBandInvert(scale)(pos);\n    }\n\n    const idx = domain.indexOf(prop);\n    return data[idx];\n  }\n};\n\n/**\n * Given an event, get the parent svg element;\n */\nexport const getParentSVG = (event) => {\n  // set node to targets owner svg\n  let node = event.target.ownerSVGElement;\n\n  // find the outermost svg\n  if (node) {\n    while (node.ownerSVGElement) {\n      node = node.ownerSVGElement;\n    }\n  }\n\n  return node;\n};\n\n/**\n * Given an event, get the relative X/Y position for a target.\n */\nexport const getPositionForTarget = ({ target, clientX, clientY }) => {\n  const rect = target.getBoundingClientRect();\n  return {\n    x: clientX - (rect?.left || 0) - target.clientLeft,\n    y: clientY - (rect?.top || 0) - target.clientTop\n  };\n};\n\n/**\n * Gets the point from q given matrix.\n */\nexport const getPointFromMatrix = (event, matrix): PointObjectNotation => {\n  const parent = getParentSVG(event);\n\n  if (!parent) {\n    return null;\n  }\n\n  // Determines client coordinates relative to the editor component\n  const { top, left } = parent.getBoundingClientRect();\n  const x = event.clientX - left;\n  const y = event.clientY - top;\n\n  // Transforms the coordinate to world coordinate (in the SVG/DIV world)\n  return applyToPoint(inverse(matrix), { x, y });\n};\n\n/**\n * Get the start/end matrix.\n */\nexport const getLimitMatrix = (\n  height: number,\n  width: number,\n  matrix\n): PointObjectNotation[] =>\n  applyToPoints(matrix, [\n    { x: 0, y: 0 },\n    { x: width, y: height }\n  ]);\n\n/**\n * Constrain the matrix.\n */\nexport const constrainMatrix = (height: number, width: number, matrix) => {\n  const [min, max] = getLimitMatrix(height, width, matrix) as {\n    x: number;\n    y: number;\n  }[];\n\n  if (max.x < width || max.y < height) {\n    return true;\n  }\n\n  if (min.x > 0 || min.y > 0) {\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * Determine if scale factor is less than allowed.\n */\nconst lessThanScaleFactorMin = (value, scaleFactor: number) =>\n  value.scaleFactorMin && value.d * scaleFactor <= value.scaleFactorMin;\n\n/**\n * Determine if scale factor is larger than allowed.\n */\nconst moreThanScaleFactorMax = (value, scaleFactor: number) =>\n  value.scaleFactorMax && value.d * scaleFactor >= value.scaleFactorMax;\n\n/**\n * Determine if both min and max scale fctors are going out of bounds.\n */\nexport const isZoomLevelGoingOutOfBounds = (value, scaleFactor: number) => {\n  const a = lessThanScaleFactorMin(value, scaleFactor) && scaleFactor < 1;\n  const b = moreThanScaleFactorMax(value, scaleFactor) && scaleFactor > 1;\n  return a || b;\n};\n","/**\n * Toggle the text selection of the body.\n */\nexport function toggleTextSelection(allowSelection: boolean) {\n  const style = allowSelection ? '' : 'none';\n  [\n    '-webkit-touch-callout',\n    '-webkit-user-select',\n    '-khtml-user-select',\n    '-moz-user-select',\n    '-ms-user-select',\n    'user-select'\n  ].forEach((prop) => (document.body.style[prop] = style));\n}\n","import { ChartInternalShallowDataShape } from '../data';\n\n/**\n * Calculates whether the stroke should be shown.\n */\nexport function calculateShowStroke(\n  current: ChartInternalShallowDataShape,\n  data: ChartInternalShallowDataShape[]\n) {\n  const i = data.indexOf(current);\n  let showLine = false;\n\n  const prev = data[i - 1];\n  if (i > 0 && prev.y) {\n    showLine = true;\n  }\n\n  const cur = data[i];\n  if (cur.y) {\n    showLine = true;\n  }\n\n  const next = data[i + 1];\n  if (i < data.length - 1 && next.y) {\n    showLine = true;\n  }\n\n  return showLine;\n}\n","/**\n * Get the angle from a radian.\n */\nexport const getDegrees = (radians: number) => (radians / Math.PI) * 180 - 90;\n","import classNames from 'classnames';\n\nexport interface PropFunctionTypes {\n  /**\n   * Classnames to apply to the element.\n   */\n  className?: any;\n\n  /**\n   * CSS styles to apply to the element.\n   */\n  style?: any;\n}\n\nexport const functionProps = (prop: string, val: any, data: any) => {\n  if (typeof val === 'function') {\n    return val(data);\n  } else if (prop === 'className') {\n    return classNames(val);\n  } else if (val !== undefined || val !== null) {\n    return val;\n  }\n\n  return {};\n};\n\nexport const constructFunctionProps = (\n  props: PropFunctionTypes,\n  data: any\n) => ({\n  className: functionProps('className', props.className, data),\n  style: functionProps('style', props.style, data)\n});\n","type AccessorCallback = (data: any) => any;\n\n/**\n * Given a dataset and a list of accessors, returns a unique collection.\n */\nexport function uniqueBy<T = any>(data: T[], ...accessors: AccessorCallback[]) {\n  const result: any[] = [];\n\n  const ittr = (arr: T[], depth: number) => {\n    for (const a of arr) {\n      const acc = accessors[depth];\n      if (acc === undefined) {\n        throw new Error(`Accessor not found for depth: ${depth}`);\n      }\n\n      const val = acc(a);\n      if (Array.isArray(val)) {\n        ittr(val, depth + 1);\n      } else if (!result.includes(val)) {\n        result.push(val);\n      }\n    }\n  };\n\n  ittr(data, 0);\n\n  return result;\n}\n","import React from 'react';\nimport { calculateDimensions } from './size';\n\nexport interface WrapTextInputs {\n  key: string;\n  x?: any;\n  paddingY?: number;\n  paddingX?: number;\n  width: number;\n  height?: number;\n  fontFamily: string;\n  fontSize: number;\n  wrap?: boolean;\n  size?: {\n    width: number;\n    height: number;\n  };\n}\n\nexport function wrapText({\n  key,\n  x = 0,\n  size,\n  paddingY,\n  wrap = true,\n  paddingX,\n  width,\n  height,\n  fontFamily,\n  fontSize\n}: WrapTextInputs) {\n  size = size || calculateDimensions(key, fontFamily, fontSize);\n  const words = key.toString().split(/\\s+/);\n\n  if (words.length > 1 && size.width > width) {\n    let rows = [];\n    let maxWidth = 0;\n    let maxHeight = 0;\n    let curText = '';\n    let currWidth = 0;\n    let nextText = '';\n    let nextWidth = 0;\n\n    for (const word of words) {\n      nextText = curText === '' ? word : `${curText} ${word}`;\n      nextWidth = calculateDimensions(nextText, fontFamily, fontSize).width;\n\n      if (nextWidth <= width - (paddingX ? 2 * paddingX : 0)) {\n        curText = nextText;\n        currWidth = nextWidth;\n      } else {\n        rows.push(curText);\n        maxWidth = Math.max(maxWidth, currWidth);\n        curText = word;\n        currWidth = calculateDimensions(curText, fontFamily, fontSize).width;\n      }\n    }\n    rows.push(curText);\n    maxHeight = rows.length * size.height;\n\n    if (height && maxHeight >= height - (paddingY ? 2 * paddingY : 0)) {\n      return null;\n    }\n\n    if (width && maxWidth >= width - (paddingX ? 2 * paddingX : 0)) {\n      return null;\n    }\n\n    if (!wrap && rows.length > 1) {\n      return rows[0];\n    }\n\n    return rows.map((r, i) => (\n      <tspan\n        key={i}\n        dominantBaseline=\"alphabetic\"\n        style={{ baselineShift: '0%' }}\n        dy={\n          i > 0\n            ? size.height\n            : height\n              ? size.height / 2 - 5\n              : -maxHeight / 2 + size.height\n        }\n        x={x}\n      >\n        {r}\n      </tspan>\n    ));\n  }\n\n  if (height && size.height + paddingY >= height) {\n    return null;\n  }\n\n  if (width && size.width + paddingX >= width) {\n    return null;\n  }\n\n  // NOTE: 5px seems to magic number for making it center\n  return (\n    <tspan\n      dominantBaseline=\"alphabetic\"\n      style={{ baselineShift: '0%' }}\n      dy={size.height / 2 - 5}\n      x={x}\n    >\n      {key}\n    </tspan>\n  );\n}\n","import React, { FC, Fragment, ReactElement } from 'react';\nimport {\n  RadialAxisTickSeries,\n  RadialAxisTickSeriesProps\n} from './RadialAxisTickSeries';\nimport {\n  RadialAxisArcSeries,\n  RadialAxisArcSeriesProps\n} from './RadialAxisArcSeries';\nimport { CloneElement } from 'rdk';\nimport { getTicks } from '../../utils';\n\nexport interface RadialAxisProps {\n  /**\n   * Height of the axis.\n   */\n  height: number;\n\n  /**\n   * Width of the axis.\n   */\n  width: number;\n\n  /**\n   * Scale to use for the axis.\n   */\n  xScale: any;\n\n  /**\n   * Inner radius of the axis.\n   */\n  innerRadius: number;\n\n  /**\n   * Type of the axis.\n   */\n  type: 'value' | 'time' | 'category';\n\n  /**\n   * Arc element to render.\n   */\n  arcs: ReactElement<\n    RadialAxisArcSeriesProps,\n    typeof RadialAxisArcSeries\n  > | null;\n\n  /**\n   * Tick element to render.\n   */\n  ticks: ReactElement<\n    RadialAxisTickSeriesProps,\n    typeof RadialAxisTickSeries\n  > | null;\n}\n\nexport const RadialAxis: FC<Partial<RadialAxisProps>> = ({\n  arcs,\n  ticks,\n  xScale,\n  height,\n  width,\n  innerRadius,\n  type\n}) => {\n  const outerRadius = Math.min(height, width) / 2;\n\n  // TODO: This is a hack to get the ticks in the parent\n  // component. This is because the ticks are needed\n  // for the arcs's lines.\n  const tickValues = getTicks(\n    xScale,\n    ticks.props.tickValues,\n    type,\n    ticks.props.count,\n    ticks.props.interval || ticks.props.count\n  );\n\n  return (\n    <Fragment>\n      {arcs && (\n        <CloneElement<RadialAxisArcSeriesProps>\n          element={arcs}\n          outerRadius={outerRadius}\n          innerRadius={innerRadius}\n          tickValues={tickValues}\n        />\n      )}\n      {ticks && (\n        <CloneElement<RadialAxisTickSeriesProps>\n          element={ticks}\n          scale={xScale}\n          type={type}\n          innerRadius={innerRadius}\n          outerRadius={outerRadius}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nRadialAxis.defaultProps = {\n  innerRadius: 10,\n  type: 'value',\n  arcs: <RadialAxisArcSeries />,\n  ticks: <RadialAxisTickSeries />\n};\n","import React, { Component, Children, cloneElement, PropsWithChildren } from 'react';\nimport { toggleTextSelection } from '../utils/selection';\n\ninterface MoveProps extends PropsWithChildren {\n  cursor?: string;\n  disabled?: boolean;\n  preventRightClick: boolean;\n  disableText: boolean;\n  threshold: number;\n  onMoveStart: (event) => void;\n  onMove: (event) => void;\n  onMoveCancel: (event) => void;\n  onMoveEnd: (event) => void;\n}\n\nexport class Move extends Component<MoveProps> {\n  static defaultProps: Partial<MoveProps> = {\n    preventRightClick: true,\n    disableText: true,\n    threshold: 0,\n    onMoveStart: () => undefined,\n    onMove: () => undefined,\n    onMoveEnd: () => undefined,\n    onMoveCancel: () => undefined\n  };\n\n  started = false;\n  deltaX = 0;\n  deltaY = 0;\n  prevXPosition = 0;\n  prevYPosition = 0;\n  rqf: any;\n\n  componentWillUnmount() {\n    cancelAnimationFrame(this.rqf);\n    this.disposeHandlers();\n  }\n\n  disposeHandlers() {\n    window.removeEventListener('mousemove', this.onMouseMove);\n    window.removeEventListener('mouseup', this.onMouseUp);\n    window.removeEventListener('touchmove', this.onTouchMove);\n    window.removeEventListener('touchend', this.onTouchEnd);\n\n    this.setCursor(false);\n    this.disableText(true);\n  }\n\n  disableText(shouldDisable: boolean) {\n    if (this.props.disableText) {\n      toggleTextSelection(shouldDisable);\n    }\n  }\n\n  setCursor(set: boolean) {\n    let { cursor } = this.props;\n\n    if (cursor) {\n      if (!set) {\n        cursor = 'inherit';\n      }\n\n      document.body.style['cursor'] = cursor;\n    }\n  }\n\n  checkThreshold() {\n    const { threshold } = this.props;\n\n    return (\n      !this.started &&\n      (Math.abs(this.deltaX) > threshold || Math.abs(this.deltaY) > threshold)\n    );\n  }\n\n  getTouchCoords(event) {\n    const { clientX, clientY } = event.touches[0];\n    return {\n      clientX,\n      clientY\n    };\n  }\n\n  onMouseDown(event: React.MouseEvent) {\n    const { preventRightClick, disabled } = this.props;\n\n    const shouldCancel = event.nativeEvent.which === 3 && preventRightClick;\n    if (shouldCancel || disabled) {\n      return;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.started = false;\n\n    // Always bind event so we cancel movement even if no action was taken\n    window.addEventListener('mousemove', this.onMouseMove);\n    window.addEventListener('mouseup', this.onMouseUp);\n  }\n\n  onMouseMove = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const { movementX, movementY } = event;\n    this.deltaX = this.deltaX + movementX;\n    this.deltaY = this.deltaY + movementY;\n\n    if (this.checkThreshold()) {\n      this.disableText(true);\n      this.setCursor(true);\n\n      this.deltaX = 0;\n      this.deltaY = 0;\n      this.started = true;\n\n      this.props.onMoveStart({\n        nativeEvent: event,\n        type: 'mouse'\n      });\n    } else {\n      this.rqf = requestAnimationFrame(() => {\n        this.props.onMove({\n          nativeEvent: event,\n          type: 'mouse',\n          x: movementX,\n          y: movementY\n        });\n      });\n    }\n  };\n\n  onMouseUp = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.disposeHandlers();\n\n    if (this.started) {\n      this.props.onMoveEnd({\n        nativeEvent: event,\n        type: 'mouse'\n      });\n    } else {\n      this.props.onMoveCancel({\n        nativeEvent: event,\n        type: 'mouse'\n      });\n    }\n  };\n\n  onTouchStart(event: React.TouchEvent) {\n    const { disabled } = this.props;\n\n    if (disabled || event.touches.length !== 1) {\n      return;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.started = false;\n    this.prevXPosition = event.touches[0].clientX;\n    this.prevYPosition = event.touches[0].clientY;\n\n    // Always bind event so we cancel movement even if no action was taken\n    window.addEventListener('touchmove', this.onTouchMove);\n    window.addEventListener('touchend', this.onTouchEnd);\n  }\n\n  onTouchMove = (event: TouchEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    // Calculate delta from previous position and current\n    const { clientX, clientY } = this.getTouchCoords(event);\n    const deltaX = clientX - this.prevXPosition;\n    const deltaY = clientY - this.prevYPosition;\n\n    // Track the delta\n    this.deltaX = this.deltaX + deltaX;\n    this.deltaY = this.deltaY + deltaY;\n\n    if (this.checkThreshold()) {\n      this.disableText(true);\n      this.setCursor(true);\n\n      this.deltaX = 0;\n      this.deltaY = 0;\n      this.started = true;\n\n      this.props.onMoveStart({\n        // TODO: Come back and clean this up...\n        nativeEvent: {\n          ...event,\n          clientX,\n          clientY\n        },\n        type: 'touch'\n      });\n    } else {\n      this.rqf = requestAnimationFrame(() => {\n        this.props.onMove({\n          // TODO: Come back and clean this up...\n          nativeEvent: {\n            ...event,\n            clientX,\n            clientY\n          },\n          type: 'touch',\n          x: deltaX,\n          y: deltaY\n        });\n      });\n    }\n\n    this.prevXPosition = clientX;\n    this.prevYPosition = clientY;\n  };\n\n  onTouchEnd = (event: TouchEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n    this.disposeHandlers();\n\n    if (this.started) {\n      this.props.onMoveEnd({\n        nativeEvent: event,\n        type: 'touch'\n      });\n    } else {\n      this.props.onMoveCancel({\n        nativeEvent: event,\n        type: 'touch'\n      });\n    }\n  };\n\n  render() {\n    return Children.map(this.props.children, (child: any) =>\n      cloneElement(child, {\n        ...child.props,\n        onMouseDown: (e) => {\n          this.onMouseDown(e);\n          if (child.props.onMouseDown) {\n            child.props.onMouseDown(e);\n          }\n        },\n        onTouchStart: (e) => {\n          this.onTouchStart(e);\n          if (child.props.onTouchStart) {\n            child.props.onTouchStart(e);\n          }\n        }\n      })\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport bind from 'memoize-bind';\nimport classNames from 'classnames';\nimport { range } from 'd3-array';\nimport { Move } from '../Gestures/Move';\nimport css from './BrushHandle.module.css';\n\nexport interface BrushHandleProps {\n  height: number;\n  onHandleDrag: (deltaX: number) => void;\n}\n\ninterface BrushHandleState {\n  isDragging: boolean;\n}\n\nexport class BrushHandle extends PureComponent<\n  BrushHandleProps,\n  BrushHandleState\n> {\n  state: BrushHandleState = {\n    isDragging: false\n  };\n\n  onMoveStart() {\n    this.setState({\n      isDragging: true\n    });\n  }\n\n  onMove(event) {\n    this.props.onHandleDrag(event.x);\n  }\n\n  onMoveEnd() {\n    this.setState({\n      isDragging: false\n    });\n  }\n\n  render() {\n    const { height } = this.props;\n    const { isDragging } = this.state;\n\n    return (\n      <Move\n        cursor=\"ew-resize\"\n        onMoveStart={bind(this.onMoveStart, this)}\n        onMove={bind(this.onMove, this)}\n        onMoveEnd={bind(this.onMoveEnd, this)}\n      >\n        <g>\n          <line className={css.line} y1=\"0\" y2={height} x1=\"5\" x2=\"5\" />\n          <rect\n            className={classNames(css.handle, { [css.dragging]: isDragging })}\n            height={height - 10}\n            style={{ cursor: 'ew-resize' }}\n            width={8}\n            y=\"5\"\n            y1={height - 5}\n          />\n          <g\n            transform={`translate(-1, ${height / 2 - 10})`}\n            style={{ pointerEvents: 'none' }}\n          >\n            {range(5).map((i) => (\n              <circle cy={i * 5} cx=\"5\" r=\".5\" key={i} className={css.dot} />\n            ))}\n          </g>\n        </g>\n      </Move>\n    );\n  }\n}\n","import React, { PureComponent, Fragment } from 'react';\nimport bind from 'memoize-bind';\nimport { BrushHandle } from './BrushHandle';\nimport { Move } from '../Gestures/Move';\nimport css from './BrushSlice.module.css';\n\nexport interface BrushChangeEvent {\n  start?: number;\n  end?: number;\n}\n\ninterface BrushSliceProps {\n  height: number;\n  width: number;\n  start: number;\n  end: number;\n  onBrushChange: (event: BrushChangeEvent) => void;\n}\n\ninterface BrushSliceState {\n  isDragging: boolean;\n}\n\nexport class BrushSlice extends PureComponent<\n  BrushSliceProps,\n  BrushSliceState\n> {\n  state: BrushSliceState = {\n    isDragging: false\n  };\n\n  onMoveStart() {\n    const { start, end, width } = this.props;\n    const hasNoSlice = start === 0 && end === width;\n\n    if (!hasNoSlice) {\n      this.setState({\n        isDragging: true\n      });\n    }\n  }\n\n  onMove({ x }) {\n    const { onBrushChange, width } = this.props;\n    let { start, end } = this.props;\n    start = start + x;\n    end = end + x;\n\n    if (start >= 0 && end <= width) {\n      onBrushChange({\n        start,\n        end\n      });\n    }\n  }\n\n  onMoveEnd() {\n    this.setState({\n      isDragging: false\n    });\n  }\n\n  onHandleDrag(direction: 'start' | 'end', deltaX: number) {\n    const { onBrushChange } = this.props;\n    let { start, end } = this.props;\n\n    start = direction === 'start' ? start + deltaX : start;\n    end = direction !== 'start' ? end + deltaX : end;\n\n    onBrushChange({\n      start,\n      end\n    });\n  }\n\n  render() {\n    const { height, start, end, width } = this.props;\n    const { isDragging } = this.state;\n    const sliceWidth = Math.max(end - start, 0);\n    const endSliceWidth = Math.max(width - end, 0);\n    const hasNoSlice = start === 0 && end === width;\n\n    return (\n      <Fragment>\n        <rect className={css.unsliced} height={height} width={start} />\n        <rect\n          transform={`translate(${end}, 0)`}\n          className={css.unsliced}\n          height={height}\n          width={endSliceWidth}\n        />\n        <g transform={`translate(${start}, 0)`}>\n          <Move\n            cursor=\"grabbing\"\n            onMoveStart={bind(this.onMoveStart, this)}\n            onMove={bind(this.onMove, this)}\n            onMoveEnd={bind(this.onMoveEnd, this)}\n          >\n            <rect\n              className={css.slice}\n              height={height}\n              width={sliceWidth}\n              style={{\n                cursor: isDragging ? 'grabbing' : 'grab',\n                opacity: hasNoSlice ? 0 : 0.1,\n                pointerEvents: !hasNoSlice ? 'initial' : 'none'\n              }}\n            />\n          </Move>\n          <g transform={'translate(-4, 0)'}>\n            <BrushHandle\n              height={height}\n              onHandleDrag={bind(this.onHandleDrag, this, 'start')}\n            />\n          </g>\n          <g transform={`translate(${sliceWidth - 5}, 0)`}>\n            <BrushHandle\n              height={height}\n              onHandleDrag={bind(this.onHandleDrag, this, 'end')}\n            />\n          </g>\n        </g>\n      </Fragment>\n    );\n  }\n}\n","import React, { PureComponent, Fragment, PropsWithChildren } from 'react';\nimport bind from 'memoize-bind';\nimport { getPositionForTarget } from '../utils/position';\nimport { BrushSlice, BrushChangeEvent } from './BrushSlice';\nimport { ChartDataTypes } from '../data';\nimport { Move } from '../Gestures/Move';\n\nexport interface BrushConfiguration {\n  disabled?: boolean;\n  fill?: string;\n  domain?: [ChartDataTypes, ChartDataTypes];\n  onBrushChange?: (e) => void;\n}\n\nexport interface BrushProps extends PropsWithChildren {\n  height: number;\n  width: number;\n  disabled?: boolean;\n  start?: number;\n  end?: number;\n  onBrushChange?: (e: BrushChangeEvent) => void;\n}\n\ninterface BrushState {\n  isSlicing: boolean;\n  isPanning: boolean;\n  start?: number;\n  end?: number;\n  initial?: number;\n}\n\nexport class Brush extends PureComponent<BrushProps, BrushState> {\n  static defaultProps: Partial<BrushProps> = {\n    disabled: false,\n    height: 0,\n    width: 0,\n    onBrushChange: () => undefined\n  };\n\n  ref: any;\n\n  constructor(props: BrushProps) {\n    super(props);\n\n    this.state = {\n      isSlicing: false,\n      isPanning: false,\n      start: props.start || 0,\n      end: props.end || props.width\n    };\n  }\n\n  componentDidUpdate(prevProps: BrushProps) {\n    // If no brush is defined and width updates, update the offset of the end handle.\n    if (\n      prevProps.width !== this.props.width &&\n      this.state.end === prevProps.width\n    ) {\n      this.setState({ end: this.props.width });\n    }\n\n    // Don't update if we are doing the slicing\n    if (!this.state.isSlicing && !this.state.isPanning) {\n      const { start, end } = this.props;\n      const startUpdated =\n        start !== prevProps.start && start !== this.state.start;\n      const endUpdated = end !== prevProps.end && end !== this.state.end;\n\n      if (startUpdated || endUpdated) {\n        this.setState({\n          ...this.ensurePositionInBounds(start, end)\n        });\n      }\n    }\n  }\n\n  getStartEnd(event, state: BrushState = this.state) {\n    const { x } = this.getPositionsForPanEvent(event);\n\n    let start;\n    let end;\n    if (x < state.initial!) {\n      start = x;\n      end = state.initial;\n    } else {\n      start = state.initial;\n      end = x;\n    }\n\n    return this.ensurePositionInBounds(start, end, state);\n  }\n\n  getPositionsForPanEvent(event) {\n    const eventObj = {\n      target: this.ref,\n      clientX: event.clientX,\n      clientY: event.clientY\n    };\n\n    return getPositionForTarget(eventObj);\n  }\n\n  ensurePositionInBounds(\n    newStart?: number,\n    newEnd?: number,\n    state: BrushState = this.state\n  ) {\n    const { width } = this.props;\n    let start = newStart;\n    let end = newEnd;\n\n    if (start === undefined || start <= 0) {\n      start = 0;\n    }\n\n    if (end === undefined) {\n      end = width;\n    }\n\n    if (start > end) {\n      start = state.start!;\n    }\n\n    if (end < start) {\n      end = state.end!;\n    }\n\n    if (end >= width) {\n      end = width;\n    }\n\n    return { start, end };\n  }\n\n  onMoveStart(event) {\n    const { disabled } = this.props;\n\n    if (!disabled) {\n      const positions = this.getPositionsForPanEvent(event.nativeEvent);\n\n      this.setState({\n        isSlicing: true,\n        initial: positions.x\n      });\n    }\n  }\n\n  onMove(event) {\n    const { disabled } = this.props;\n\n    if (!disabled) {\n      this.setState((prev) => {\n        const { onBrushChange } = this.props;\n\n        // Use setState callback so we can get the true previous value\n        // rather than the bulk updated value react will trigger\n        const { start, end } = this.getStartEnd(event.nativeEvent, prev);\n\n        if (onBrushChange) {\n          onBrushChange({\n            start,\n            end\n          });\n        }\n\n        return {\n          start,\n          end\n        };\n      });\n    }\n  }\n\n  onMoveEnd() {\n    this.setState({\n      isSlicing: false\n    });\n  }\n\n  onMoveCancel() {\n    const val = {\n      start: 0,\n      end: this.props.width\n    };\n\n    this.setState(val);\n\n    if (this.props.onBrushChange) {\n      this.props.onBrushChange(val);\n    }\n  }\n\n  onSliceChange(event: BrushChangeEvent) {\n    const val = this.ensurePositionInBounds(event.start, event.end);\n\n    this.setState(val);\n\n    if (this.props.onBrushChange) {\n      this.props.onBrushChange(val);\n    }\n  }\n\n  render() {\n    const { children, disabled, height, width } = this.props;\n    const { isSlicing, start, end } = this.state;\n\n    return (\n      <Move\n        cursor=\"crosshair\"\n        onMoveStart={bind(this.onMoveStart, this)}\n        onMove={bind(this.onMove, this)}\n        onMoveEnd={bind(this.onMoveEnd, this)}\n        onMoveCancel={bind(this.onMoveCancel, this)}\n      >\n        <g\n          style={{\n            pointerEvents: isSlicing ? 'none' : 'auto',\n            cursor: disabled ? '' : 'crosshair'\n          }}\n        >\n          {children}\n          {!disabled && (\n            <Fragment>\n              <rect\n                ref={(ref) => (this.ref = ref)}\n                height={height}\n                width={width}\n                opacity={0}\n              />\n              {start !== undefined && end !== undefined && (\n                <BrushSlice\n                  start={start}\n                  end={end}\n                  height={height}\n                  width={width}\n                  onBrushChange={bind(this.onSliceChange, this)}\n                />\n              )}\n            </Fragment>\n          )}\n        </g>\n      </Move>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport bind from 'memoize-bind';\nimport { BrushConfiguration, Brush } from './Brush';\nimport { BrushChangeEvent } from './BrushSlice';\n\nexport interface ChartBrushProps extends BrushConfiguration {\n  scale: any;\n  height: number;\n  width: number;\n  children: any;\n}\n\nexport class ChartBrush extends Component<ChartBrushProps, {}> {\n  static defaultProps: Partial<ChartBrushProps> = {};\n\n  getBrushOffset() {\n    let start;\n    let end;\n\n    const { disabled, domain, scale } = this.props;\n    if (!disabled && domain) {\n      start = scale(domain[0]);\n      end = scale(domain[1]);\n    }\n\n    return { start, end };\n  }\n\n  onBrushChange(event: BrushChangeEvent) {\n    const { onBrushChange, scale, width } = this.props;\n\n    if (onBrushChange) {\n      let domain;\n\n      if (\n        event.start !== undefined &&\n        event.end !== undefined &&\n        (event.start !== 0 || event.end !== width)\n      ) {\n        if (scale.invert) {\n          const start = scale.invert(event.start);\n          const end = scale.invert(event.end);\n          domain = [start, end];\n        } else {\n          // invert scaleBend\n          const band = scale.step();\n          const start = Math.ceil((event.start - band / 2) / band);\n          const end = Math.ceil((event.end - band / 2) / band);\n\n          domain = [scale.domain()[start], scale.domain()[end]];\n        }\n      }\n\n      onBrushChange({\n        domain\n      });\n    }\n  }\n\n  render() {\n    const { scale, height, width, children, ...rest } = this.props;\n\n    return (\n      <Brush\n        {...rest}\n        {...this.getBrushOffset()}\n        height={height}\n        width={width}\n        onBrushChange={bind(this.onBrushChange, this)}\n      >\n        {children}\n      </Brush>\n    );\n  }\n}\n","import { createContext, useContext } from 'react';\nimport { Dimensions } from '../utils';\nimport { LinearAxisDimensionChanged } from '../Axis';\n\nexport interface ChartContextProps extends Dimensions {\n  id: string;\n  chartSized?: boolean;\n  yAxisSized?: boolean;\n  xAxisSized?: boolean;\n  updateAxes: (\n    orientation: 'horizontal' | 'vertical',\n    event: LinearAxisDimensionChanged\n  ) => void;\n}\n\nexport const ChartContext = createContext<Partial<ChartContextProps>>({});\n\nexport const { Provider: ChartProvider, Consumer: ChartConsumer } =\n  ChartContext;\n\nexport const useChart = () => {\n  const context = useContext(ChartContext);\n\n  if (context === undefined) {\n    throw new Error('`useChart` hook must be used within a `ChartProvider`');\n  }\n\n  return context;\n};\n","import React, { FC, useCallback, useState, useMemo } from 'react';\nimport { Margins, getDimension } from '../utils/dimensions';\nimport useDimensions from 'react-cool-dimensions';\nimport { useId } from 'rdk';\nimport { LinearAxisDimensionChanged } from '../Axis';\nimport classNames from 'classnames';\nimport { ChartContextProps, ChartProvider } from './ChartContext';\nimport css from './ChartContainer.module.css';\n\nexport interface ChartProps {\n  /**\n   * Id of the chart.\n   */\n  id?: string;\n\n  /**\n   * Width of the chart. If not provided will autosize.\n   */\n  width?: number;\n\n  /**\n   * Height of the chart. If not provided will autosize.\n   */\n  height?: number;\n\n  /**\n   * Margins for the chart.\n   */\n  margins?: Margins;\n\n  /**\n   * Classnames for the chart.\n   */\n  className?: string;\n\n  /**\n   * Classnames for the chart.\n   */\n  containerClassName?: string;\n\n  /**\n   * Additional css styles.\n   */\n  style?: React.StyleHTMLAttributes<SVGSVGElement>;\n\n  /**\n   * Center the chart. Used mainly internally.\n   */\n  center?: boolean;\n\n  /**\n   * Center chart on X Axis only. Used mainly internally.\n   */\n  centerX?: boolean;\n\n  /**\n   * Center chart on Y Axis only. Used mainly internally.\n   */\n  centerY?: boolean;\n}\n\nexport interface ChartContainerProps extends ChartProps {\n  /**\n   * Internal property to identify if the xAxis is visible.\n   */\n  xAxisVisible?: boolean;\n\n  /**\n   * Internal property to identify if the xAxis is visible.\n   */\n  yAxisVisible?: boolean;\n\n  /**\n   * Children elements to recieve the calculated props.\n   */\n  children: (props: ChartContainerChildProps) => any;\n}\n\nexport type ChartContainerChildProps = ChartContextProps;\n\nexport const ChartContainer: FC<ChartContainerProps> = ({\n  className,\n  children,\n  center,\n  centerX,\n  centerY,\n  style,\n  margins,\n  containerClassName,\n  xAxisVisible,\n  yAxisVisible,\n  id,\n  ...rest\n}) => {\n  const curId = useId(id);\n  const [xAxisSized, setXAxisSized] = useState<boolean>(false);\n  const [yAxisSized, setYAxisSized] = useState<boolean>(false);\n  const [xOffset, setXOffset] = useState<number>(0);\n  const [yOffset, setYOffset] = useState<number>(0);\n  const { observe, width, height } = useDimensions<HTMLDivElement>();\n\n  const chartSized = useMemo(() => {\n    if (!height || !width) {\n      return false;\n    }\n\n    // TODO: @amcdnl refactor this to account for 0-2 axises on x/y\n    if (xAxisVisible && !xAxisSized) {\n      return false;\n    }\n\n    if (yAxisVisible && !yAxisSized) {\n      return false;\n    }\n\n    return true;\n  }, [height, width, xAxisSized, xAxisVisible, yAxisVisible, yAxisSized]);\n\n  const onUpdateAxes = useCallback(\n    (\n      orientation: 'horizontal' | 'vertical',\n      event: LinearAxisDimensionChanged\n    ) => {\n      if (orientation === 'horizontal') {\n        setXAxisSized(true);\n      } else {\n        setYAxisSized(true);\n      }\n\n      if (event.height) {\n        setYOffset(event.height);\n      }\n\n      if (event.width) {\n        setXOffset(event.width);\n      }\n    },\n    []\n  );\n\n  const childProps: ChartContainerChildProps = useMemo(\n    () => ({\n      chartSized,\n      id: curId,\n      updateAxes: onUpdateAxes,\n      yAxisSized,\n      xAxisSized,\n      ...getDimension({\n        margins,\n        height,\n        width,\n        yOffset,\n        xOffset\n      })\n    }),\n    [\n      chartSized,\n      curId,\n      onUpdateAxes,\n      yAxisSized,\n      xAxisSized,\n      margins,\n      height,\n      width,\n      yOffset,\n      xOffset\n    ]\n  );\n\n  const translateX = center || centerX ? width / 2 : childProps.xMargin;\n  const translateY = center || centerY ? height / 2 : childProps.yMargin;\n\n  const styleHeight =\n    rest.height !== undefined && rest.height !== null ? rest.height : '100%';\n  const styleWidth =\n    rest.width !== undefined && rest.width !== null ? rest.width : '100%';\n\n  return (\n    <div\n      ref={observe}\n      style={{ height: styleHeight, width: styleWidth }}\n      className={classNames(containerClassName, css.container)}\n    >\n      <ChartProvider value={childProps}>\n        {height > 0 && width > 0 && (\n          <svg\n            width={width}\n            height={height}\n            className={className}\n            style={style}\n          >\n            <g transform={`translate(${translateX}, ${translateY})`}>\n              {children(childProps)}\n            </g>\n          </svg>\n        )}\n      </ChartProvider>\n    </div>\n  );\n};\n","import bigInt from 'big-integer';\nimport { bigIntegerToLocaleString } from '../../common/utils/bigint';\nimport {\n  ChartDataTypes,\n  ChartInternalDataTypes,\n  ChartNestedDataShape,\n  ChartShallowDataShape\n} from './types';\n\nexport function normalizeValue(\n  value: ChartDataTypes,\n  maxBigInt: bigInt.BigInteger\n): ChartInternalDataTypes {\n  if (bigInt.isInstance(value)) {\n    if (maxBigInt.greater(1000000)) {\n      const divideBy = maxBigInt.divide(1000000);\n      return (value as bigInt.BigInteger).divide(divideBy).toJSNumber();\n    } else {\n      return (value as bigInt.BigInteger).toJSNumber();\n    }\n  } else {\n    return value as ChartInternalDataTypes;\n  }\n}\n\nexport function normalizeValueForFormatting(\n  value: ChartDataTypes\n): ChartInternalDataTypes {\n  if (bigInt.isInstance(value)) {\n    return bigIntegerToLocaleString(value as bigInt.BigInteger);\n  }\n  return value as ChartInternalDataTypes;\n}\n\nexport function getMaxBigIntegerForNested(series: ChartNestedDataShape[]) {\n  let maxBigInteger = bigInt.one;\n  for (const group of series) {\n    const maxBigIntegerForGroup = getMaxBigIntegerForShallow(group.data);\n    if (maxBigIntegerForGroup.greater(maxBigInteger)) {\n      maxBigInteger = maxBigIntegerForGroup;\n    }\n  }\n  return maxBigInteger;\n}\n\nexport function getMaxBigIntegerForShallow(series: ChartShallowDataShape[]) {\n  let maxBigInteger = bigInt.one;\n  for (const point of series) {\n    if (bigInt.isInstance(point.data)) {\n      const bigInteger = point.data as bigInt.BigInteger;\n      if (bigInteger.greater(maxBigInteger)) {\n        maxBigInteger = bigInteger;\n      }\n    }\n  }\n  return maxBigInteger;\n}\n","import { median } from 'd3-array';\nimport {\n  ChartInternalNestedDataShape,\n  ChartShallowDataShape,\n  ChartNestedDataShape,\n  ChartInternalShallowDataShape,\n  ChartDataTypes\n} from './types';\nimport {\n  getMaxBigIntegerForNested,\n  getMaxBigIntegerForShallow,\n  normalizeValue,\n  normalizeValueForFormatting\n} from './bigInteger';\nimport bigInt from 'big-integer';\n\nexport type Direction = 'vertical' | 'horizontal';\n\n/**\n * Accepts a `ChartDataShape` and transforms it to a chart readable data shape.\n *\n * Example:\n *\n *   [{\n *    key: 'Threat Intel',\n *    data: [{ key:'2011', data: 25 }]\n *   }]\n *\n * will be transformed to:\n *\n *  [{\n *    key: 'Threat Intel',\n *    data: [\n *      key: 'Threat Intel',\n *      x: '2011',\n *      y: 25\n *    ]\n *  }]\n */\nexport function buildNestedChartData(\n  series: ChartNestedDataShape[],\n  sort = false,\n  direction: Direction = 'vertical'\n): ChartInternalNestedDataShape[] {\n  let result: ChartInternalNestedDataShape[] = [];\n  const maxBigInteger = getMaxBigIntegerForNested(series);\n  const isVertical = direction === 'vertical';\n\n  for (const point of series) {\n    for (const nestedPoint of point.data) {\n      const key = normalizeValueForFormatting(point.key);\n      let idx = result.findIndex((r) => {\n        const left = r.key;\n        if (left instanceof Date && key instanceof Date) {\n          return left.getTime() === key.getTime();\n        }\n        return left === key;\n      });\n\n      if (idx === -1) {\n        result.push({\n          key,\n          metadata: point.metadata,\n          data: []\n        });\n\n        idx = result.length - 1;\n      }\n\n      const x = normalizeValue(\n        isVertical ? nestedPoint.key : nestedPoint.data,\n        maxBigInteger\n      );\n\n      const y = normalizeValue(\n        isVertical ? nestedPoint.data : nestedPoint.key,\n        maxBigInteger\n      );\n\n      result[idx].data.push({\n        key,\n        value: normalizeValueForFormatting(nestedPoint.data),\n        metadata: nestedPoint.metadata,\n        id: point.id,\n        x,\n        x0: isVertical ? x : 0,\n        x1: x,\n        y,\n        y0: isVertical ? 0 : y,\n        y1: y\n      });\n    }\n  }\n\n  // Sort the series data based on the median value\n  if (sort) {\n    result = result.sort((a, b) => {\n      const aMax = median(a.data, (d: any) => d.y)!;\n      const bMax = median(b.data, (d: any) => d.y)!;\n      return aMax < bMax ? 1 : -1;\n    });\n  }\n\n  return result;\n}\n\nfunction addToChartType(\n  a: ChartDataTypes,\n  b: number | bigInt.BigInteger\n): ChartDataTypes {\n  if (bigInt.isInstance(a) && bigInt.isInstance(b)) {\n    return (a as bigInt.BigInteger).add(b as bigInt.BigInteger);\n  } else if (a instanceof Date && typeof b === 'number') {\n    return new Date(a.valueOf() + b);\n  } else if (typeof a === 'number' && typeof b === 'number') {\n    return a + b;\n  } else {\n    throw new Error('Invalid types to addToChartTypes');\n  }\n}\n\n/**\n * Accepts a shallow shape and normalizes it to a chart readable format.\n */\nexport function buildShallowChartData(\n  series: ChartShallowDataShape[],\n  direction: Direction = 'vertical',\n  binSize: number | undefined = undefined\n): ChartInternalShallowDataShape[] {\n  const result: ChartInternalShallowDataShape[] = [];\n  const maxBigInteger = getMaxBigIntegerForShallow(series);\n  const isVertical = direction === 'vertical';\n\n  for (const point of series) {\n    const isTuple = Array.isArray(point.data);\n    let k1 = point.key;\n    if (binSize) {\n      k1 = addToChartType(point.key, binSize);\n    }\n\n    const props = {\n      k0: normalizeValue(point.key, maxBigInteger),\n      k1: normalizeValue(k1, maxBigInteger),\n      v0: normalizeValue(isTuple ? point.data[0] : 0, maxBigInteger),\n      v1: normalizeValue(isTuple ? point.data[1] : point.data, maxBigInteger)\n    };\n\n    const xProp = isVertical ? 'k' : 'v';\n    const yProp = isVertical ? 'v' : 'k';\n\n    result.push({\n      key: normalizeValueForFormatting(props.k0),\n      value: normalizeValueForFormatting(props.v1),\n      metadata: point.metadata,\n      id: point.id,\n      x: props[`${xProp}1`],\n      x0: props[`${xProp}0`],\n      x1: props[`${xProp}1`],\n      y: props[`${yProp}1`],\n      y0: props[`${yProp}0`],\n      y1: props[`${yProp}1`]\n    });\n  }\n\n  return result;\n}\n","import { histogram } from 'd3-array';\nimport { ChartInternalShallowDataShape, ChartInternalDataTypes } from './types';\n\n/**\n * Build a histogram given data set.\n */\nexport function buildBins(\n  xScale,\n  thresholds,\n  data: any[]\n): ChartInternalShallowDataShape[] {\n  const layout = histogram()\n    .value((d: any) => d.x)\n    .domain(xScale.domain())\n    .thresholds(xScale.ticks(thresholds));\n\n  const bins = layout(data as any);\n\n  return bins.map((bin) => ({\n    x0: bin.x0 as ChartInternalDataTypes,\n    x1: bin.x1 as ChartInternalDataTypes,\n    y: bin.length,\n    y0: 0,\n    y1: bin.length\n  }));\n}\n","import { stack, stackOffsetExpand, stackOffsetDiverging } from 'd3-shape';\nimport { ChartNestedDataShape, ChartInternalNestedDataShape } from './types';\nimport {\n  getMaxBigIntegerForNested,\n  normalizeValue,\n  normalizeValueForFormatting\n} from './bigInteger';\nimport { uniqueBy } from '../../common/utils/array';\n\nexport type StackTypes = 'default' | 'expand' | 'diverging';\n\n/**\n * Given a dataset like:\n *\n *   [{\n *    key: 'Threat Intel',\n *    data: [{ key:'2011', data: 25 }]\n *   }]\n *\n * it will transform it to:\n *\n *  [\n *    { x: 'Theat Intel', '2011': 25 }\n *  ]\n */\nfunction transformDataToStack(data: ChartNestedDataShape[]) {\n  const result: any[] = [];\n  const maxBigInteger = getMaxBigIntegerForNested(data);\n\n  for (const category of data) {\n    for (const value of category.data) {\n      let idx = result.findIndex((r) => {\n        if (r.x instanceof Date && category.key instanceof Date) {\n          return r.x.getTime() === category.key.getTime();\n        }\n        return r.x === category.key;\n      });\n\n      if (idx === -1) {\n        result.push({\n          metadata: category.metadata,\n          x: category.key,\n          formattedValues: {}\n        });\n\n        idx = result.length - 1;\n      }\n\n      result[idx].metadata = value.metadata;\n\n      result[idx][value.key as string] = normalizeValue(\n        value.data,\n        maxBigInteger\n      );\n\n      result[idx].formattedValues[value.key as string] =\n        normalizeValueForFormatting(value.data);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Translates the stack data to a chart standard dataset.\n */\nfunction transformStackToData(\n  stackData,\n  direction = 'vertical'\n): ChartInternalNestedDataShape[] {\n  const result: ChartInternalNestedDataShape[] = [];\n  const isVertical = direction === 'vertical';\n\n  // Transform the data from the d3 stack format to our internal format\n  for (const category of stackData) {\n    for (const point of category) {\n      const key = point.data.x;\n\n      let idx = result.findIndex((r) => {\n        if (r.key instanceof Date && key instanceof Date) {\n          return r.key.getTime() === key.getTime();\n        }\n        return r.key === key;\n      });\n\n      if (idx === -1) {\n        result.push({\n          key,\n          data: []\n        });\n\n        idx = result.length - 1;\n      }\n\n      const categoryKey = category.key;\n      const y = point.data[categoryKey];\n      const [y0, y1] = point;\n\n      result[idx].data.push({\n        metadata: point.data.metadata,\n        key,\n        x: isVertical ? categoryKey : y1,\n        x0: isVertical ? categoryKey : y0,\n        x1: isVertical ? categoryKey : y1,\n        y: isVertical ? y : categoryKey,\n        y0: isVertical ? y0 : categoryKey,\n        y1: isVertical ? y1 : categoryKey,\n        value: point.data.formattedValues[categoryKey]\n      });\n    }\n  }\n\n  return result;\n}\n\n/**\n * Builds a stack dataset from the standard data format.\n */\nexport function buildBarStackData(\n  data: ChartNestedDataShape[] = [],\n  offset: StackTypes = 'default',\n  direction = 'vertical'\n) {\n  const keys = uniqueBy<ChartNestedDataShape>(\n    data,\n    (d) => d.data,\n    (d) => d.key\n  );\n  const stackData = transformDataToStack(data);\n\n  let stackFn = stack();\n  if (offset === 'expand') {\n    stackFn = stackFn.offset(stackOffsetExpand);\n  } else if (offset === 'diverging') {\n    stackFn = stackFn.offset(stackOffsetDiverging);\n  }\n\n  const result = stackFn.keys(keys)(stackData);\n\n  return transformStackToData(result, direction);\n}\n","import { ChartNestedDataShape, ChartInternalNestedDataShape } from './types';\nimport { buildBarStackData } from './barStack';\n\n/**\n * Builds a stack dataset from the standard data format.\n */\nexport function buildMarimekkoData(\n  data: ChartNestedDataShape[] = []\n): ChartInternalNestedDataShape[] {\n  const result = buildBarStackData(data, 'expand');\n  const sums = {};\n\n  // Calculate the sum for each series and the total sum\n  let totalSum = 0;\n  for (const series of result) {\n    const sum = series.data.reduce((acc, cur) => acc + (cur.y as number), 0);\n\n    sums[series.key as string] = sum;\n    totalSum += sum;\n  }\n\n  // Calculate the x0/x1 for each series\n  let prev = 0;\n  for (const series of result) {\n    const x0 = prev;\n    const x1 = prev + sums[series.key as string] / totalSum;\n    prev = x1;\n\n    for (const point of series.data) {\n      point.x0 = x0;\n      point.x1 = x1;\n    }\n  }\n\n  return result;\n}\n","import { stack, stackOffsetExpand } from 'd3-shape';\nimport {\n  ChartNestedDataShape,\n  ChartInternalDataShape,\n  ChartInternalNestedDataShape,\n  ChartInternalShallowDataShape\n} from './types';\nimport {\n  getMaxBigIntegerForNested,\n  normalizeValue,\n  normalizeValueForFormatting\n} from './bigInteger';\nimport { uniqueBy } from '../../common/utils/array';\n\n/**\n * Given a dataset like:\n *\n *   [{\n *    key: 'Threat Intel',\n *    data: [{ key:'2011', data: 25 }]\n *   }]\n *\n * it will transform it to:\n *\n *  [\n *    { x: '2011', 'Theat Intel': 25 }\n *  ]\n */\nfunction transformDataToStack(data) {\n  const result: any[] = [];\n  const maxBigInteger = getMaxBigIntegerForNested(data);\n\n  for (const category of data) {\n    for (const value of category.data) {\n      let idx = result.findIndex((r) => {\n        if (r.x instanceof Date && value.key instanceof Date) {\n          return r.x.getTime() === value.key.getTime();\n        }\n        return r.x === value.key;\n      });\n\n      if (idx === -1) {\n        result.push({\n          x: value.key,\n          formattedValues: {}\n        });\n\n        idx = result.length - 1;\n      }\n\n      result[idx][category.key as string] = normalizeValue(\n        value.data,\n        maxBigInteger\n      );\n      result[idx].formattedValues[\n        category.key as string\n      ] = normalizeValueForFormatting(value.data);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Translates the stack data to a chart standard dataset.\n */\nfunction transformStackToData(stackData): ChartInternalNestedDataShape[] {\n  const result: ChartInternalNestedDataShape[] = [];\n\n  for (const category of stackData) {\n    const series: ChartInternalShallowDataShape[] = [];\n\n    for (const point of category) {\n      const [y0, y1] = point;\n      const x = point.data.x;\n      series.push({\n        key: category.key,\n        x,\n        x0: x,\n        x1: x,\n        y: y1 - y0,\n        y0,\n        y1,\n        value: point.data.formattedValues[category.key]\n      });\n    }\n\n    result.push({\n      key: category.key,\n      data: series\n    });\n  }\n\n  return result;\n}\n\n/**\n * Builds a stack dataset from the standard data format.\n */\nexport function buildStackData(\n  data: ChartNestedDataShape[],\n  normalized = false\n): ChartInternalDataShape[] {\n  const keys = uniqueBy<ChartNestedDataShape>(data, (d) => d.key);\n  const stackData = transformDataToStack(data);\n  const stackFn = !normalized ? stack() : stack().offset(stackOffsetExpand);\n\n  const result = stackFn.keys(keys)(stackData);\n\n  return transformStackToData(result);\n}\n","import { ChartShallowDataShape } from './types';\nimport { Direction, buildShallowChartData } from './builder';\n\nexport const buildWaterfall = (\n  series: ChartShallowDataShape[],\n  direction: Direction = 'vertical',\n  binSize: number | undefined = undefined\n) => {\n  const data = buildShallowChartData(series, direction, binSize);\n  const isVertical = direction === 'vertical';\n  const v = isVertical ? 'y' : 'x';\n\n  let cumulative = 0;\n  for (const point of data) {\n    point[`${v}0`] = cumulative;\n    cumulative += point[v] as number;\n    point[`${v}1`] = cumulative;\n    point[v] = cumulative;\n  }\n\n  return data;\n};\n","import React, { Component, PropsWithChildren, createRef } from 'react';\nimport { toggleTextSelection } from '../utils/selection';\nimport { smoothMatrix, transform, translate } from 'transformation-matrix';\nimport { constrainMatrix } from '../utils/position';\n\ninterface PanProps extends PropsWithChildren {\n  disabled: boolean;\n  threshold: number;\n  cursor?: string;\n  x: number;\n  y: number;\n  scale: number;\n  matrix: any;\n  width: number;\n  height: number;\n  constrain: boolean;\n  globalPanning: boolean;\n  onPanStart: (event: PanStartEvent) => void;\n  onPanMove: (event: PanMoveEvent) => void;\n  onPanEnd: (event: PanEndEvent) => void;\n  onPanCancel: (event: PanCancelEvent) => void;\n}\n\nexport interface PanStartEvent {\n  source: 'mouse' | 'touch';\n  nativeEvent: MouseEvent | TouchEvent;\n}\n\nexport interface PanMoveEvent {\n  source: 'mouse' | 'touch';\n  x: number;\n  y: number;\n  nativeEvent: MouseEvent | TouchEvent;\n}\n\nexport interface PanEndEvent {\n  source: 'mouse' | 'touch';\n  nativeEvent: MouseEvent | TouchEvent;\n}\n\nexport interface PanCancelEvent {\n  source: 'mouse' | 'touch';\n  nativeEvent: MouseEvent | TouchEvent;\n}\n\nexport class Pan extends Component<PanProps> {\n  static defaultProps: Partial<PanProps> = {\n    x: 0,\n    y: 0,\n    disabled: false,\n    scale: 1,\n    threshold: 10,\n    globalPanning: true,\n    onPanStart: () => undefined,\n    onPanMove: () => undefined,\n    onPanEnd: () => undefined,\n    onPanCancel: () => undefined\n  };\n\n  prevXPosition: number = 0;\n  prevYPosition: number = 0;\n  started: boolean = false;\n  deltaX: number = 0;\n  deltaY: number = 0;\n  childRef = createRef<SVGGElement>();\n\n  componentDidMount() {\n    if (this.childRef.current) {\n      this.childRef.current.addEventListener('mousedown', this.onMouseDown, {\n        passive: false\n      });\n      this.childRef.current.addEventListener('touchstart', this.onTouchStart, {\n        passive: false\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.disposeHandlers();\n\n    if (this.childRef.current) {\n      this.childRef.current.removeEventListener('mousedown', this.onMouseDown);\n      this.childRef.current.removeEventListener(\n        'touchstart',\n        this.onTouchStart\n      );\n    }\n  }\n\n  disposeHandlers() {\n    window.removeEventListener('mousemove', this.onMouseMove);\n    window.removeEventListener('mouseup', this.onMouseUp);\n    window.removeEventListener('touchmove', this.onTouchMove);\n    window.removeEventListener('touchend', this.onTouchEnd);\n\n    // Reset cursor on body back to original\n    document.body.style['cursor'] = 'inherit';\n    toggleTextSelection(true);\n  }\n\n  checkThreshold() {\n    const { threshold } = this.props;\n    return (\n      !this.started &&\n      (Math.abs(this.deltaX) > threshold || Math.abs(this.deltaY) > threshold)\n    );\n  }\n\n  onPanStart(nativeEvent, source: 'mouse' | 'touch') {\n    this.props.onPanStart({\n      nativeEvent,\n      source\n    });\n  }\n\n  onPanMove(x: number, y: number, source: 'mouse' | 'touch', nativeEvent) {\n    this.props.onPanMove({\n      source,\n      nativeEvent,\n      x,\n      y\n    });\n  }\n\n  onPanEnd(nativeEvent, source: 'mouse' | 'touch') {\n    const { onPanEnd } = this.props;\n\n    onPanEnd({\n      nativeEvent,\n      source\n    });\n  }\n\n  pan(x: number, y: number, nativeEvent, source: 'mouse' | 'touch') {\n    const { scale, constrain, width, height, matrix } = this.props;\n\n    const newMatrix = smoothMatrix(\n      transform(matrix, translate(x / scale, y / scale)),\n      100\n    );\n\n    const shouldConstrain =\n      constrain && constrainMatrix(height, width, newMatrix);\n    if (!shouldConstrain) {\n      this.onPanMove(newMatrix.e, newMatrix.f, source, nativeEvent);\n    }\n\n    return shouldConstrain;\n  }\n\n  onMouseDown = (event: MouseEvent) => {\n    // Stop at disabled\n    if (this.props.disabled) {\n      return;\n    }\n\n    // Ignore right click\n    if (event.which === 3) {\n      return;\n    }\n\n    // If global panning is turned off, it will only pan on the container\n    if (\n      !this.props.globalPanning &&\n      event.target &&\n      !(event.target as HTMLElement).classList.contains('pan-container')\n    ) {\n      return;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    toggleTextSelection(false);\n    this.started = false;\n\n    // Always bind event so we cancel movement even if no action was taken\n    window.addEventListener('mousemove', this.onMouseMove);\n    window.addEventListener('mouseup', this.onMouseUp);\n  };\n\n  onMouseMove = (event: MouseEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.deltaX = this.deltaX + event.movementX;\n    this.deltaY = this.deltaY + event.movementY;\n\n    if (this.checkThreshold()) {\n      if (this.props.cursor) {\n        document.body.style['cursor'] = this.props.cursor;\n      }\n\n      this.deltaX = 0;\n      this.deltaY = 0;\n      this.started = true;\n\n      this.onPanStart(event, 'mouse');\n    } else {\n      this.pan(event.movementX, event.movementY, event, 'mouse');\n    }\n  };\n\n  onMouseUp = (event: MouseEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.disposeHandlers();\n    toggleTextSelection(true);\n\n    if (this.started) {\n      this.onPanEnd(event, 'mouse');\n    } else {\n      this.props.onPanCancel({\n        nativeEvent: event,\n        source: 'mouse'\n      });\n    }\n  };\n\n  onTouchStart = (event: TouchEvent) => {\n    // Stop at disabled\n    if (this.props.disabled) {\n      return;\n    }\n\n    // Reqquire more than one touch\n    if (event.touches.length !== 1) {\n      return;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    toggleTextSelection(false);\n    this.started = false;\n\n    this.prevXPosition = event.touches[0].clientX;\n    this.prevYPosition = event.touches[0].clientY;\n\n    // Always bind event so we cancel movement even if no action was taken\n    window.addEventListener('touchmove', this.onTouchMove);\n    window.addEventListener('touchend', this.onTouchEnd);\n  };\n\n  onTouchMove = (event: TouchEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    // Calculate delta from previous position and current\n    const x = event.touches[0].clientX;\n    const y = event.touches[0].clientY;\n\n    const deltaX = x - this.prevXPosition;\n    const deltaY = y - this.prevYPosition;\n\n    this.deltaX = this.deltaX + deltaX;\n    this.deltaY = this.deltaY + deltaY;\n\n    if (this.checkThreshold()) {\n      this.deltaX = 0;\n      this.deltaY = 0;\n      this.started = true;\n\n      this.onPanStart(event, 'touch');\n    } else {\n      const contrained = this.pan(deltaX, deltaY, event, 'touch');\n\n      if (!contrained) {\n        this.prevXPosition = x;\n        this.prevYPosition = y;\n      }\n    }\n  };\n\n  onTouchEnd = (event: TouchEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.disposeHandlers();\n    toggleTextSelection(true);\n\n    if (this.started) {\n      this.onPanEnd(event, 'touch');\n    } else {\n      this.props.onPanCancel({\n        nativeEvent: event,\n        source: 'touch'\n      });\n    }\n  };\n\n  render() {\n    return <g ref={this.childRef}>{this.props.children}</g>;\n  }\n}\n","/**\n * Gets the position between a given set of points.\n */\nexport const getMidpoint = (pointA, pointB) => ({\n  x: (pointA.x + pointB.x) / 2,\n  y: (pointA.y + pointB.y) / 2\n});\n\n/**\n * Gets the distance between a given set of points.\n */\nexport const getDistanceBetweenPoints = (pointA, pointB) =>\n  Math.sqrt(\n    Math.pow(pointB.y - pointA.y, 2) + Math.pow(pointB.x - pointA.x, 2)\n  );\n\n/**\n * Get touch points.\n */\nexport function getTouchPoints(event, node) {\n  const { left, top } = node.getBoundingClientRect();\n\n  const [pointA, pointB] = [...event.touches].map((touch) => ({\n    x: touch.clientX - Math.round(left),\n    y: touch.clientY - Math.round(top)\n  }));\n\n  const distance = getDistanceBetweenPoints(pointA, pointB);\n  const midpoint = getMidpoint(pointA, pointB);\n\n  return {\n    pointA,\n    pointB,\n    distance,\n    midpoint\n  };\n}\n","import React, { Component, PropsWithChildren, createRef } from 'react';\nimport { toggleTextSelection } from '../utils/selection';\nimport {\n  getPointFromMatrix,\n  isZoomLevelGoingOutOfBounds\n} from '../utils/position';\nimport { getTouchPoints } from './pinchUtils';\nimport {\n  scale,\n  smoothMatrix,\n  transform,\n  translate,\n  applyToPoint,\n  inverse\n} from 'transformation-matrix';\n\ninterface ZoomGestureProps extends PropsWithChildren {\n  disabled?: boolean;\n  maxZoom: number;\n  minZoom: number;\n  scaleFactor: number;\n  scale: number;\n  matrix: any;\n  x: number;\n  y: number;\n  style?: any;\n  disableMouseWheel?: boolean;\n  requireZoomModifier?: boolean;\n  onZoom: (event: ZoomEvent) => void;\n  onZoomEnd: () => void;\n}\n\nexport interface ZoomEvent {\n  scale: number;\n  x: number;\n  y: number;\n  nativeEvent: any;\n}\n\nexport class Zoom extends Component<ZoomGestureProps> {\n  static defaultProps: Partial<ZoomGestureProps> = {\n    x: 0,\n    y: 0,\n    scale: 1,\n    scaleFactor: 0.1,\n    minZoom: 1,\n    maxZoom: 10\n  };\n\n  firstTouch: any;\n  lastDistance: any;\n  timeout: any;\n  childRef = createRef<SVGGElement>();\n  rqf: any;\n\n  componentDidMount() {\n    const { disabled, disableMouseWheel } = this.props;\n\n    const ref = this.childRef.current;\n    if (!disabled && ref) {\n      if (!disableMouseWheel) {\n        ref.addEventListener('mousewheel', this.onMouseWheel, {\n          passive: false\n        });\n      }\n\n      ref.addEventListener('touchstart', this.onTouchStart, { passive: false });\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('touchmove', this.onTouchMove);\n    window.removeEventListener('touchend', this.onTouchEnd);\n    cancelAnimationFrame(this.rqf);\n    clearTimeout(this.timeout);\n\n    const ref = this.childRef.current;\n    if (ref) {\n      ref.removeEventListener('mousewheel', this.onMouseWheel);\n      ref.removeEventListener('touchstart', this.onTouchStart);\n    }\n\n    toggleTextSelection(true);\n  }\n\n  getStep(delta: number) {\n    const { scaleFactor } = this.props;\n    return -delta > 0 ? scaleFactor + 1 : 1 - scaleFactor;\n  }\n\n  scale(x: number, y: number, step: number, nativeEvent) {\n    const { minZoom, maxZoom, onZoom, matrix } = this.props;\n\n    const outside = isZoomLevelGoingOutOfBounds(\n      {\n        d: matrix.a,\n        scaleFactorMin: minZoom,\n        scaleFactorMax: maxZoom\n      },\n      step\n    );\n\n    if (!outside) {\n      const newMatrix = smoothMatrix(\n        transform(\n          matrix,\n          translate(x, y),\n          scale(step, step),\n          translate(-x, -y)\n        ),\n        100\n      );\n\n      this.rqf = requestAnimationFrame(() => {\n        onZoom({\n          scale: newMatrix.a,\n          x: newMatrix.e,\n          y: newMatrix.f,\n          nativeEvent\n        });\n      });\n    }\n\n    return outside;\n  }\n\n  onMouseWheel = (event) => {\n    const {\n      disableMouseWheel,\n      requireZoomModifier,\n      matrix,\n      onZoomEnd\n    } = this.props;\n\n    if (disableMouseWheel) {\n      return false;\n    }\n\n    const hasModifier = event.metaKey || event.ctrlKey;\n    if (requireZoomModifier && !hasModifier) {\n      return false;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    const point = getPointFromMatrix(event, matrix);\n    if (point) {\n      const { x, y } = point as { x: number; y: number };\n      const step = this.getStep(event.deltaY);\n\n      this.scale(x, y, step, event);\n\n      // Do small timeout to 'guess' when its done zooming\n      clearTimeout(this.timeout);\n      this.timeout = setTimeout(() => onZoomEnd(), 500);\n    }\n  };\n\n  onTouchStart = (event: TouchEvent) => {\n    if (event.touches.length === 2) {\n      event.preventDefault();\n      event.stopPropagation();\n      toggleTextSelection(false);\n\n      this.firstTouch = getTouchPoints(event, this.childRef.current);\n      this.lastDistance = this.firstTouch.distance;\n\n      window.addEventListener('touchmove', this.onTouchMove);\n      window.addEventListener('touchend', this.onTouchEnd);\n    }\n  };\n\n  onTouchMove = (event: TouchEvent) => {\n    if (event.touches.length === 2) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      const { distance } = getTouchPoints(event, this.childRef.current);\n      const distanceFactor = distance / this.lastDistance;\n\n      const point = applyToPoint(inverse(this.props.matrix), {\n        x: this.firstTouch.midpoint.x,\n        y: this.firstTouch.midpoint.y\n      }) as { x: number; y: number };\n\n      if (point.x && point.y) {\n        const outside = this.scale(point.x, point.y, distanceFactor, event);\n\n        if (!outside) {\n          this.lastDistance = distance;\n        }\n      }\n    }\n  };\n\n  onTouchEnd = (event: TouchEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    window.removeEventListener('touchmove', this.onTouchMove);\n    window.removeEventListener('touchend', this.onTouchEnd);\n\n    toggleTextSelection(true);\n    this.props.onZoomEnd();\n  };\n\n  render() {\n    const { style, children } = this.props;\n    return (\n      <g ref={this.childRef} style={style}>\n        {children}\n      </g>\n    );\n  }\n}\n","import React, { FC, ReactElement } from 'react';\nimport classNames from 'classnames';\nimport { CloneElement } from 'rdk';\nimport {\n  DiscreteLegendEntryProps,\n  DiscreteLegendEntry\n} from './DiscreteLegendEntry';\nimport css from './DiscreteLegend.module.css';\n\nexport interface DiscreteLegendProps {\n  /**\n   * CSS Class name.\n   */\n  className?: string;\n\n  /**\n   * CSS Styles.\n   */\n  style?: React.CSSProperties;\n\n  /**\n   * Orientation of the legend.\n   */\n  orientation?: 'horizontal' | 'vertical';\n\n  /**\n   * Entry components to show in the legend.\n   */\n  entries: ReactElement<DiscreteLegendEntryProps, typeof DiscreteLegendEntry>[];\n}\n\nexport const DiscreteLegend: FC<Partial<DiscreteLegendProps>> = ({\n  entries,\n  orientation,\n  style,\n  className\n}) => (\n  <div\n    className={classNames(css.container, className, {\n      [css.horizontal]: orientation === 'horizontal',\n      [css.vertical]: orientation === 'vertical'\n    })}\n    style={style}\n  >\n    {entries.map((entry, index) => (\n      <CloneElement<DiscreteLegendEntryProps>\n        element={entry}\n        key={`dle-${index}`}\n        orientation={orientation}\n      />\n    ))}\n  </div>\n);\n\nDiscreteLegend.defaultProps = {\n  orientation: 'vertical'\n};\n","import React, { FC } from 'react';\nimport classNames from 'classnames';\nimport css from './DiscreteLegendSymbol.module.css';\n\nexport interface DiscreteLegendSymbolProps {\n  /**\n   * Color for the symbol set by the `DiscreteLegendEntry`.\n   */\n  color: string;\n\n  /**\n   * CSS Class names.\n   */\n  className?: string;\n}\n\nexport const DiscreteLegendSymbol: FC<Partial<DiscreteLegendSymbolProps>> = ({\n  className,\n  color\n}) => (\n  <div\n    className={classNames(css.symbol, className)}\n    style={{ background: color }}\n  />\n);\n","import React, { Component, ReactNode, ReactElement, FC } from 'react';\nimport classNames from 'classnames';\nimport {\n  DiscreteLegendSymbol,\n  DiscreteLegendSymbolProps\n} from './DiscreteLegendSymbol';\nimport { CloneElement } from 'rdk';\nimport css from './DiscreteLegendEntry.module.css';\n\nexport interface DiscreteLegendEntryProps {\n  /**\n   * Label for the entry.\n   */\n  label: string;\n\n  /**\n   * Color for the entry.\n   */\n  color: string;\n\n  /**\n   * Symbol for the entry.\n   */\n  symbol:\n    | ReactElement<DiscreteLegendSymbolProps, typeof DiscreteLegendSymbol>\n    | ReactNode;\n\n  /**\n   * CSS Styles.\n   */\n  style?: React.CSSProperties;\n\n  /**\n   * CSS Class names.\n   */\n  className?: string;\n\n  /**\n   * HTML Title Attribute.\n   */\n  title?: string;\n\n  /**\n   * Orientation of the entry set internally by `DiscreteLegend`.\n   */\n  orientation: 'horizontal' | 'vertical';\n\n  /**\n   * Mouse enter event.\n   */\n  onMouseEnter: (event: React.MouseEvent<HTMLDivElement>) => void;\n\n  /**\n   * Mouse leave event.\n   */\n  onMouseLeave: (event: React.MouseEvent<HTMLDivElement>) => void;\n\n  /**\n   * On click event.\n   */\n  onClick: (event: React.MouseEvent<HTMLDivElement>) => void;\n}\n\nexport const DiscreteLegendEntry: FC<Partial<DiscreteLegendEntryProps>> = ({\n  label,\n  symbol,\n  title,\n  className,\n  color,\n  style,\n  orientation,\n  onMouseEnter,\n  onMouseLeave,\n  onClick\n}) => (\n  <div\n    title={title}\n    className={classNames(css.entry, className, {\n      [css.vertical]: orientation === 'vertical',\n      [css.horizontal]: orientation === 'horizontal'\n    })}\n    onClick={onClick}\n    onMouseEnter={onMouseEnter}\n    onMouseLeave={onMouseLeave}\n    style={style}\n  >\n    <CloneElement<DiscreteLegendSymbolProps> element={symbol} color={color} />\n    <span className={css.label}>{label}</span>\n  </div>\n);\n\nDiscreteLegendEntry.defaultProps = {\n  symbol: <DiscreteLegendSymbol />,\n  orientation: 'horizontal'\n};\n","import React, { PureComponent } from 'react';\nimport classNames from 'classnames';\nimport { ChartDataShape } from '../../../common/data';\nimport chroma from 'chroma-js';\nimport { uniqueBy } from '../../../common/utils/array';\nimport { extent } from 'd3-array';\nimport { formatValue } from '../../utils/formatting';\n\nimport css from './SequentialLegend.module.css';\n\nexport interface SequentialLegendProps {\n  /**\n   * CSS Class name.\n   */\n  className?: any;\n\n  /**\n   * CSS Styles.\n   */\n  style?: any;\n\n  /**\n   * Orientation of the legend.\n   */\n  orientation?: 'horizontal' | 'vertical';\n\n  /**\n   * Data to use to render the scale.\n   */\n  data: ChartDataShape[];\n\n  /**\n   * Color scheme for the scale.\n   */\n  colorScheme: string[];\n}\n\nexport class SequentialLegend extends PureComponent<SequentialLegendProps> {\n  static defaultProps: Partial<SequentialLegendProps> = {\n    colorScheme: ['rgba(28, 107, 86, 0.5)', '#2da283'],\n    orientation: 'vertical'\n  };\n\n  render() {\n    const { orientation, className, style, colorScheme, data } = this.props;\n\n    // Generate the color gradient\n    const color = chroma\n      .scale(colorScheme)\n      .colors(10)\n      .reverse()\n      .map((c, i) => `${c} ${i * 10}%`)\n      .join(',');\n\n    // Get the extent from the data passed\n    const [end, start] = extent(\n      uniqueBy(\n        data,\n        (d) => d.data,\n        (d) => d.data\n      )\n    );\n\n    // Get direction\n    const gradientDir = orientation === 'vertical' ? '' : 'to left,';\n\n    return (\n      <div\n        style={style}\n        className={classNames(css.container, className, {\n          [css.vertical]: orientation === 'vertical',\n          [css.horizontal]: orientation === 'horizontal'\n        })}\n      >\n        <div className={css.start}>{formatValue(start)}</div>\n        <div\n          className={css.gradient}\n          style={{\n            background: `linear-gradient(${gradientDir}${color})`\n          }}\n        />\n        <div className={css.end}>{formatValue(end)}</div>\n      </div>\n    );\n  }\n}\n","import classNames from 'classnames';\nimport React, { FC, useMemo } from 'react';\nimport css from './Gridline.module.css';\n\nexport interface GridlineProps {\n  /**\n   * Height of the line set by the `GridlineSeries`.\n   */\n  height: number;\n\n  /**\n   * Width of the line set by the `GridlineSeries`.\n   */\n  width: number;\n\n  /**\n   * CSS Classname to apply.\n   */\n  className?: string;\n\n  /**\n   * Direction set by the `GridlineSeries`.\n   */\n  direction: 'all' | 'x' | 'y';\n\n  /**\n   * D3 Scale set by `GridlineSeries`.\n   */\n  scale: any;\n\n  /**\n   * SVG Stroke Width Property.\n   */\n  strokeWidth: number;\n\n  /**\n   * SVG Stroke Color Property.\n   */\n  strokeColor: string;\n\n  /**\n   * Data point for the position set by the `GridlineSeries`.\n   */\n  data: number;\n\n  /**\n   * Index set by the `GridlineSeries`.\n   */\n  index: number;\n\n  /**\n   * SVG Stroke Dash Array Property.\n   */\n  strokeDasharray: string;\n}\n\nexport const Gridline: FC<Partial<GridlineProps>> = ({\n  strokeWidth,\n  direction,\n  className,\n  strokeColor,\n  data,\n  height,\n  width,\n  scale,\n  strokeDasharray\n}) => {\n  const coords = useMemo(() => {\n    const pos = scale(data);\n\n    if (direction === 'x') {\n      return {\n        x1: pos,\n        x2: pos,\n        y1: 0,\n        y2: height\n      };\n    } else {\n      return {\n        y1: pos,\n        y2: pos,\n        x1: 0,\n        x2: width\n      };\n    }\n  }, [direction, data, height, width, scale]);\n\n  return (\n    <line\n      {...coords}\n      className={classNames(css.gridLine, className)}\n      strokeDasharray={strokeDasharray}\n      strokeWidth={strokeWidth}\n      stroke={strokeColor}\n      fill=\"none\"\n    />\n  );\n};\n\nGridline.defaultProps = {\n  strokeWidth: 1,\n  strokeDasharray: '2 5',\n  direction: 'all',\n  strokeColor: 'rgba(153, 153, 153, 0.5)'\n};\n","import React, { Fragment, ReactElement, FC, useMemo, useCallback } from 'react';\nimport { Gridline, GridlineProps } from './Gridline';\nimport { getTicks, getMaxTicks } from '../utils/ticks';\nimport { CloneElement } from 'rdk';\nimport { LinearAxisProps } from '../Axis';\nimport { GridStripeProps, GridStripe } from './GridStripe';\n\ntype GridLineElement = ReactElement<GridlineProps, typeof Gridline>;\ntype GridStripeElement = ReactElement<GridStripeProps, typeof GridStripe>;\ntype GridElement = GridLineElement | GridStripeElement;\n\nexport interface GridlineSeriesProps {\n  /**\n   * D3 scale for Y Axis.\n   */\n  yScale: any;\n\n  /**\n   * D3 scale for X Axis.\n   */\n  xScale: any;\n\n  /**\n   * The linear axis component for the Y Axis of the chart.\n   */\n  yAxis: LinearAxisProps;\n\n  /**\n   * The linear axis component for the X Axis of the chart.\n   */\n  xAxis: LinearAxisProps;\n\n  /**\n   * Height of the chart.\n   */\n  height: number;\n\n  /**\n   * Width of the chart.\n   */\n  width: number;\n\n  /**\n   * Gridline that is rendered.\n   */\n  line: GridLineElement | null;\n\n  /**\n   * GridStripe that is rendered.\n   */\n  stripe: GridStripeElement | null;\n}\n\nexport const GridlineSeries: FC<Partial<GridlineSeriesProps>> = ({\n  line,\n  stripe,\n  yScale,\n  xScale,\n  yAxis,\n  xAxis,\n  height,\n  width\n}) => {\n  const shouldRenderY = (direction: 'all' | 'x' | 'y') =>\n    direction === 'all' || direction === 'y';\n  const shouldRenderX = (direction: 'all' | 'x' | 'y') =>\n    direction === 'all' || direction === 'x';\n\n  const { yAxisGrid, xAxisGrid } = useMemo(() => {\n    return {\n      yAxisGrid: getTicks(\n        yScale,\n        yAxis.tickSeries.props.tickValues,\n        yAxis.type,\n        getMaxTicks(yAxis.tickSeries.props.tickSize, height),\n        yAxis.tickSeries.props.interval\n      ),\n      xAxisGrid: getTicks(\n        xScale,\n        xAxis.tickSeries.props.tickValues,\n        xAxis.type,\n        getMaxTicks(xAxis.tickSeries.props.tickSize, width),\n        xAxis.tickSeries.props.interval\n      )\n    };\n  }, [height, width, xAxis, yAxis, yScale, xScale]);\n\n  const renderGroup = useCallback(\n    (\n      element: GridElement,\n      grid,\n      scale,\n      direction: 'x' | 'y',\n      type: 'line' | 'stripe'\n    ) => {\n      return grid.map((point, index) => (\n        <Fragment key={`${type}-${direction}-${index}`}>\n          <CloneElement<GridlineProps | GridStripeProps>\n            element={element}\n            index={index}\n            scale={scale}\n            data={point}\n            height={height}\n            width={width}\n            direction={direction}\n          />\n        </Fragment>\n      ));\n    },\n    [height, width]\n  );\n\n  const renderSeries = useCallback(\n    (yAxisGrid, xAxisGrid, element: GridElement, type: 'line' | 'stripe') => {\n      return (\n        <Fragment>\n          {shouldRenderY(element.props.direction) &&\n            renderGroup(element, yAxisGrid, yScale, 'y', type)}\n          {shouldRenderX(element.props.direction) &&\n            renderGroup(element, xAxisGrid, xScale, 'x', type)}\n        </Fragment>\n      );\n    },\n    [renderGroup, xScale, yScale]\n  );\n\n  return (\n    <g style={{ pointerEvents: 'none' }}>\n      {line && renderSeries(yAxisGrid, xAxisGrid, line, 'line')}\n      {stripe && renderSeries(yAxisGrid, xAxisGrid, stripe, 'stripe')}\n    </g>\n  );\n};\n\nGridlineSeries.defaultProps = {\n  line: <Gridline direction=\"all\" />,\n  stripe: null\n};\n","import classNames from 'classnames';\nimport React, { FC, useMemo } from 'react';\nimport css from './GridStripe.module.css';\n\nexport interface GridStripeProps {\n  /**\n   * Position set by the `GridlineSeries`.\n   */\n  position: 'horizontal' | 'vertical';\n\n  /**\n   * CSS Classname to apply.\n   */\n  className?: string;\n\n  /**\n   * Stripe fill color.\n   */\n  fill: string;\n\n  /**\n   * Height of the line set by the `GridlineSeries`.\n   */\n  height: number;\n\n  /**\n   * Width of the line set by the `GridlineSeries`.\n   */\n  width: number;\n\n  /**\n   * Direction set by the `GridlineSeries`.\n   */\n  direction: 'all' | 'x' | 'y';\n\n  /**\n   * D3 Scale set by `GridlineSeries`.\n   */\n  scale: any;\n\n  /**\n   * Data point for the position set by the `GridlineSeries`.\n   */\n  data: number;\n\n  /**\n   * Index set by the `GridlineSeries`.\n   */\n  index: number;\n}\n\nexport const GridStripe: FC<Partial<GridStripeProps>> = ({\n  fill,\n  className,\n  position,\n  data,\n  height,\n  width,\n  scale,\n  index\n}) => {\n  const coords = useMemo(() => {\n    const pos = scale(data);\n    const stripeFill = index % 2 ? 'none' : fill;\n    const dim = scale.bandwidth();\n\n    if (position === 'vertical') {\n      return {\n        y: 0,\n        x: pos,\n        height: height,\n        width: dim,\n        fill: stripeFill\n      };\n    } else {\n      return {\n        y: pos,\n        x: 0,\n        height: dim,\n        width,\n        fill: stripeFill\n      };\n    }\n  }, [scale, data, index, height, width, fill, position]);\n\n  return <rect className={classNames(css.gridStripe, className)} {...coords} />;\n};\n\nGridStripe.defaultProps = {\n  fill: '#393c3e'\n};\n","import React, { FC } from 'react';\nimport css from './MarkLine.module.css';\n\nexport interface MarkLineProps {\n  height: number;\n  pointX?: number;\n  strokeColor: string;\n  strokeWidth: number;\n}\n\nexport const MarkLine: FC<Partial<MarkLineProps>> = ({\n  pointX,\n  height,\n  strokeWidth = 1,\n  strokeColor = '#eee'\n}) => (\n  <line\n    stroke={strokeColor}\n    strokeWidth={strokeWidth}\n    y1=\"0\"\n    vectorEffect=\"non-scaling-stroke\"\n    y2={height}\n    x1={pointX}\n    x2={pointX}\n    className={css.markLine}\n  />\n);\n","import React, { FC } from 'react';\n\nexport interface GradientStopProps {\n  offset: number | string;\n  stopOpacity: number | string;\n  color?: string;\n}\n\nexport const GradientStop: FC<Partial<GradientStopProps>> = ({\n  color,\n  offset,\n  stopOpacity = 1\n}) => <stop offset={offset} stopOpacity={stopOpacity} stopColor={color} />;\n","import React, { FC, ReactElement } from 'react';\nimport { GradientStop, GradientStopProps } from './GradientStop';\nimport { CloneElement } from 'rdk';\n\nexport interface GradientProps {\n  id: string;\n  stops: ReactElement<GradientStopProps, typeof GradientStop>[];\n  color?: string;\n  direction: 'vertical' | 'horizontal';\n}\n\nexport const Gradient: FC<Partial<GradientProps>> = ({\n  id,\n  color,\n  direction,\n  stops\n}) => {\n  const pos =\n    direction === 'vertical'\n      ? {\n        x1: '10%',\n        x2: '10%',\n        y1: '100%',\n        y2: '0%'\n      }\n      : {\n        y1: '0%',\n        y2: '0%',\n        x1: '0%',\n        x2: '100%'\n      };\n\n  return (\n    <linearGradient spreadMethod=\"pad\" id={id} {...pos}>\n      {stops.map((stop, index) => (\n        <CloneElement<GradientStopProps>\n          element={stop}\n          key={`gradient-${index}`}\n          color={stop.props.color || color}\n        />\n      ))}\n    </linearGradient>\n  );\n};\n\nGradient.defaultProps = {\n  direction: 'vertical',\n  stops: [\n    <GradientStop offset=\"0%\" stopOpacity={0.3} key=\"start\" />,\n    <GradientStop offset=\"80%\" stopOpacity={1} key=\"stop\" />\n  ]\n};\n","import React, { FC, ReactElement } from 'react';\nimport { GradientStop, GradientStopProps } from './GradientStop';\nimport { CloneElement } from 'rdk';\n\nexport interface RadialGradientProps {\n  id: string;\n  stops: ReactElement<GradientStopProps, typeof GradientStop>[];\n  color?: string;\n  radius: number | string;\n}\n\nexport const RadialGradient: FC<Partial<RadialGradientProps>> = ({\n  id,\n  color,\n  radius = '30%',\n  stops = [\n    <GradientStop offset=\"0%\" stopOpacity={0.2} key=\"start\" />,\n    <GradientStop offset=\"80%\" stopOpacity={0.7} key=\"stop\" />\n  ]\n}) => (\n  <radialGradient\n    id={id}\n    cx={0}\n    cy={0}\n    r={radius}\n    gradientUnits=\"userSpaceOnUse\"\n  >\n    {stops.map((stop, index) => (\n      <CloneElement<GradientStopProps>\n        element={stop}\n        key={`gradient-${index}`}\n        color={color}\n      />\n    ))}\n  </radialGradient>\n);\n","import React, { FC } from 'react';\n\nexport interface MaskProps {\n  id?: string;\n  fill?: string;\n}\n\nexport const Mask: FC<MaskProps> = ({ id, fill }) => (\n  <mask id={id}>\n    <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill={fill} />\n  </mask>\n);\n","import React, { FC } from 'react';\nimport { MaskProps } from './Mask';\n\nexport interface StripesProps extends MaskProps {\n  id?: string;\n  fill?: string;\n}\n\nexport const Stripes: FC<StripesProps> = ({ id, fill }) => (\n  <pattern\n    id={id}\n    width=\"4\"\n    height=\"4\"\n    patternUnits=\"userSpaceOnUse\"\n    patternTransform=\"rotate(45)\"\n  >\n    <rect className=\"area-stripe\" width=\"1\" height=\"4\" fill={fill} />\n  </pattern>\n);\n","import React, { Fragment, FC } from 'react';\nimport { formatValue } from '../utils/formatting';\nimport { ChartInternalDataTypes } from '../data';\nimport css from './TooltipTemplate.module.css';\n\ninterface SingleTooltipValue {\n  key?: ChartInternalDataTypes;\n  value?: ChartInternalDataTypes;\n  x: ChartInternalDataTypes;\n  y: ChartInternalDataTypes;\n}\n\ninterface MultipleTooltipValues {\n  x: ChartInternalDataTypes;\n  data: SingleTooltipValue[];\n}\n\ninterface TooltipTemplateProps {\n  /**\n   * Tooltip data value.\n   */\n  value?: SingleTooltipValue | MultipleTooltipValues;\n\n  /**\n   * Color scheme to apply.\n   */\n  color?: any;\n\n  /**\n   * Additional CSS classes to apply.\n   */\n  className?: any;\n}\n\nexport const TooltipTemplate: FC<TooltipTemplateProps> = ({\n  value,\n  color,\n  className\n}) => {\n  if (!value) {\n    return null;\n  }\n\n  const renderValues = (data: SingleTooltipValue, index: number) => {\n    const fill = color(data, index);\n\n    return (\n      <span className={css.subValue}>\n        <span className={css.subValueColor} style={{ backgroundColor: fill }} />\n        <span className={css.subValueName}>\n          {formatValue(data.key || data.x)}:\n        </span>\n        <span>{formatValue(data.value || data.y)}</span>\n      </span>\n    );\n  };\n\n  const renderMultiple = (value: MultipleTooltipValues) => {\n    const excessCount = value.data.length - 15;\n    const pagedValues = value.data.slice(0, 15);\n\n    return (\n      <Fragment>\n        {pagedValues.map((point, i) => (\n          <Fragment key={i}>{renderValues(point, i)}</Fragment>\n        ))}\n        {excessCount > 0 && <div>...{excessCount} more...</div>}\n      </Fragment>\n    );\n  };\n\n  const isMultiple = Array.isArray((value as any).data);\n\n  return (\n    <div className={className} role=\"tooltip\">\n      <div className={css.label}>{formatValue(value!.x)}</div>\n      <div className={css.value}>\n        {isMultiple && renderMultiple(value as MultipleTooltipValues)}\n        {!isMultiple && (\n          <Fragment>\n            {formatValue(\n              (value as SingleTooltipValue).value ||\n                (value as SingleTooltipValue).y\n            )}\n          </Fragment>\n        )}\n      </div>\n    </div>\n  );\n};\n","import React, { cloneElement, FC } from 'react';\nimport { Tooltip, TooltipProps } from 'reablocks';\nimport { TooltipTemplate } from './TooltipTemplate';\n\nexport interface ChartTooltipProps extends TooltipProps {\n  /**\n   * Content for the tooltip.\n   */\n  content: any;\n\n  /**\n   * Tooltip data value.\n   */\n  value?: any;\n\n  /**\n   * Color scheme to apply.\n   */\n  color?: any;\n\n  /**\n   * Complete dataset.\n   */\n  data: any;\n\n  /**\n   * Whether the tooltip should move with the cursor or not.\n   */\n  followCursor?: boolean;\n}\n\nexport const ChartTooltip: FC<Partial<ChartTooltipProps>> = ({\n  content,\n  value,\n  data,\n  color,\n  ...rest\n}) => (\n  <Tooltip\n    {...rest}\n    content={() => {\n      if (!value && !data) {\n        return null;\n      }\n\n      return typeof content === 'function'\n        ? content(data || value, color)\n        : cloneElement(content, {\n          ...content.props,\n          value,\n          color\n        });\n    }}\n  />\n);\n\nChartTooltip.defaultProps = {\n  content: <TooltipTemplate />\n};\n","import React, { Fragment, Component, ReactElement, createRef } from 'react';\nimport { TooltipAreaEvent } from './TooltipAreaEvent';\nimport { Placement } from 'rdk';\nimport {\n  ChartDataTypes,\n  ChartInternalDataShape,\n  ChartInternalShallowDataShape,\n  ChartInternalNestedDataShape\n} from '../data';\nimport { getPositionForTarget, getClosestPoint } from '../utils/position';\nimport bind from 'memoize-bind';\nimport { CloneElement } from 'rdk';\nimport { ChartTooltip, ChartTooltipProps } from './ChartTooltip';\nimport { arc } from 'd3-shape';\nimport memoize from 'memoize-one';\nimport isEqual from 'react-fast-compare';\n\nexport interface TooltipAreaProps {\n  /**\n   * Popperjs placement.\n   */\n  placement: Placement;\n\n  /**\n   * Chart height. Set internally.\n   */\n  height: number;\n\n  /**\n   * Chart width. Set internally.\n   */\n  width: number;\n\n  /**\n   * Chart D3 XScale. Set internally.\n   */\n  xScale: any;\n\n  /**\n   * Chart D3 YScale. Set internally.\n   */\n  yScale: any;\n\n  /**\n   * Whether the tooltip is disabled or not.\n   */\n  disabled: boolean;\n\n  /**\n   * Color setter.\n   */\n  color: any;\n\n  /**\n   * Chart internal data type.\n   */\n  data: ChartInternalDataShape[];\n\n  /**\n   * Child elements to be contained by.\n   */\n  children?: any;\n\n  /**\n   * Whether the area is radial or not.\n   */\n  isRadial?: boolean;\n\n  /**\n   * Inner-radius to set the positioning by. Set internally.\n   */\n  innerRadius?: number;\n\n  /**\n   * Outer-radius to set the positioning by. Set internally.\n   */\n  outerRadius?: number;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip: ReactElement<ChartTooltipProps, typeof ChartTooltip>;\n\n  /**\n   * Whether to inverse the data or not.\n   */\n  inverse: boolean;\n\n  /**\n   * When pointer entered mouse area.\n   */\n  onValueEnter: (event: TooltipAreaEvent) => void;\n\n  /**\n   * When pointer left mouse area.\n   */\n  onValueLeave: () => void;\n\n  /**\n   * Whether the layout is horizontal or not.\n   */\n  isHorizontal: boolean;\n}\n\ninterface TooltipAreaState {\n  visible?: boolean;\n  placement?: Placement;\n  value?: any;\n  offsetX?: any;\n  offsetY?: any;\n}\n\ninterface TooltipDataShape {\n  x?: ChartDataTypes;\n  y?: ChartDataTypes;\n  data?: ChartDataTypes | Array<ChartDataTypes | ChartInternalShallowDataShape>;\n}\n\nexport class TooltipArea extends Component<TooltipAreaProps, TooltipAreaState> {\n  static defaultProps: Partial<TooltipAreaProps> = {\n    isRadial: false,\n    tooltip: <ChartTooltip />,\n    inverse: true,\n    onValueEnter: () => undefined,\n    onValueLeave: () => undefined\n  };\n\n  prevX: number | undefined;\n  prevY: number | undefined;\n  state: TooltipAreaState = {};\n  ref = createRef<SVGRectElement | SVGPathElement | any>();\n\n  getXCoord(x: number, y: number) {\n    const { isRadial, width, height } = this.props;\n\n    // If the shape is radial, we need to convert the X coords to a radial format.\n    if (isRadial) {\n      const outerRadius = Math.min(width, height) / 2;\n      let rad = Math.atan2(y - outerRadius, x - outerRadius) + Math.PI / 2;\n\n      // TODO: Figure out what the 'correct' way to do this is...\n      if (rad < 0) {\n        rad += Math.PI * 2;\n      }\n\n      return rad;\n    }\n\n    return x;\n  }\n\n  onMouseMove(event: React.MouseEvent) {\n    const {\n      xScale,\n      yScale,\n      onValueEnter,\n      height,\n      width,\n      data,\n      isRadial,\n      isHorizontal,\n      placement\n    } = this.props;\n    const { value } = this.state;\n    const transformed = this.transformData(data);\n\n    // Get our default placement\n    let newPlacement = placement;\n    if (!placement) {\n      if (isHorizontal) {\n        newPlacement = 'right';\n      } else {\n        newPlacement = 'top';\n      }\n    }\n\n    // Get the path container element\n    let target = this.ref.current;\n\n    const { y, x } = getPositionForTarget({\n      target: target,\n      // Manually pass the x/y from the event\n      clientX: event.clientX,\n      clientY: event.clientY\n    });\n\n    // Need to flip scales/coords if we are a horz layout\n    let keyScale;\n    let valueScale;\n    let coord;\n    if (isHorizontal) {\n      keyScale = yScale;\n      valueScale = xScale;\n      coord = y;\n    } else {\n      coord = this.getXCoord(x, y);\n      keyScale = xScale;\n      valueScale = yScale;\n    }\n\n    const newValue = getClosestPoint(coord, keyScale, transformed);\n\n    if (!isEqual(newValue, value) && newValue) {\n      const pointX = keyScale(newValue.x);\n      let pointY = valueScale(newValue.y);\n      let marginX = 0;\n      let marginY = 0;\n\n      if (isNaN(pointY)) {\n        pointY = height / 2;\n        marginX = 10;\n        if (!placement) {\n          newPlacement = 'right';\n        }\n      } else {\n        marginY = -10;\n      }\n\n      // If the points didn't change, don't trigger an update\n      if (pointX === this.prevX && pointY === this.prevY) {\n        return;\n      }\n\n      this.prevY = pointY;\n      this.prevX = pointX;\n\n      const target = event.target as SVGRectElement;\n      const { top, left } = target.getBoundingClientRect();\n\n      let offsetX = 0;\n      let offsetY = 0;\n\n      if (isRadial) {\n        // If its radial, we need to convert the coords to radial format\n        const outerRadius = Math.min(width, height) / 2;\n        offsetX = pointY * Math.cos(pointX - Math.PI / 2) + outerRadius;\n        offsetY = pointY * Math.sin(pointX - Math.PI / 2) + outerRadius;\n      } else {\n        offsetX = pointX;\n        offsetY = pointY;\n      }\n\n      offsetX += left + marginX;\n      offsetY += top + marginY;\n\n      this.setState({\n        placement: newPlacement,\n        visible: true,\n        value: newValue,\n        offsetX,\n        offsetY\n      });\n\n      onValueEnter({\n        visible: true,\n        value: newValue,\n        pointY,\n        pointX,\n        offsetX,\n        offsetY,\n        nativeEvent: event\n      });\n    }\n  }\n\n  onMouseLeave() {\n    this.prevX = undefined;\n    this.prevY = undefined;\n\n    this.setState({\n      value: undefined,\n      visible: false\n    });\n\n    this.props.onValueLeave();\n  }\n\n  getTooltipReference() {\n    const { offsetX, offsetY } = this.state;\n\n    return {\n      width: 4,\n      height: 4,\n      top: offsetY,\n      left: offsetX\n    };\n  }\n\n  transformData = memoize((series: ChartInternalDataShape[]) => {\n    const { inverse, isHorizontal } = this.props;\n    const result: TooltipDataShape[] = [];\n\n    if (inverse) {\n      for (const point of series) {\n        const seriesPoint = point as ChartInternalNestedDataShape;\n        if (Array.isArray(seriesPoint.data)) {\n          for (const nestedPoint of seriesPoint.data) {\n            const right = nestedPoint.x;\n            let idx = result.findIndex((r) => {\n              const left = r.x;\n              if (left instanceof Date && right instanceof Date) {\n                return left.getTime() === right.getTime();\n              }\n              return left === right;\n            });\n\n            if (idx === -1) {\n              result.push({\n                x: nestedPoint.x,\n                data: []\n              });\n\n              idx = result.length - 1;\n            }\n\n            const data = result[idx].data;\n\n            if (Array.isArray(data)) {\n              data.push(nestedPoint);\n            }\n          }\n        } else {\n          result.push(point);\n        }\n      }\n    } else {\n      for (const point of series) {\n        const nestedPoint = point as ChartInternalNestedDataShape;\n        if (Array.isArray(nestedPoint.data)) {\n          result.push({\n            ...nestedPoint,\n            x: nestedPoint.key,\n            data: nestedPoint.data.map((d) => ({\n              ...d,\n              key: !isHorizontal ? d.x : d.y,\n              value: !isHorizontal ? d.y : d.x\n            }))\n          });\n        } else {\n          const shallowPoint = point as ChartInternalShallowDataShape;\n          result.push({\n            ...shallowPoint,\n            // Histograms special logic...\n            x: shallowPoint.key === undefined ? shallowPoint.x0 : point.key,\n            y:\n              shallowPoint.value === undefined\n                ? shallowPoint.y\n                : shallowPoint.value\n          });\n        }\n      }\n    }\n\n    return result;\n  });\n\n  renderRadial() {\n    let { height, width, innerRadius, outerRadius } = this.props;\n\n    innerRadius = innerRadius || 0;\n    outerRadius = outerRadius || Math.min(width, height) / 2;\n\n    const d = arc()({\n      innerRadius,\n      outerRadius,\n      startAngle: 180,\n      endAngle: Math.PI / 2\n    });\n\n    return (\n      <path\n        d={d!}\n        opacity=\"0\"\n        cursor=\"auto\"\n        ref={this.ref}\n        onMouseMove={bind(this.onMouseMove, this)}\n      />\n    );\n  }\n\n  renderLinear() {\n    const { height, width } = this.props;\n\n    return (\n      <rect\n        height={height}\n        ref={this.ref}\n        width={width}\n        opacity={0}\n        cursor=\"auto\"\n        onMouseMove={bind(this.onMouseMove, this)}\n      />\n    );\n  }\n\n  render() {\n    const { isRadial, children, tooltip, disabled, color } = this.props;\n    const { visible, placement, value } = this.state;\n\n    return (\n      <Fragment>\n        {disabled && children}\n        {!disabled && (\n          <g onMouseLeave={bind(this.onMouseLeave, this)}>\n            {isRadial && this.renderRadial()}\n            {!isRadial && this.renderLinear()}\n            <CloneElement<ChartTooltipProps>\n              element={tooltip}\n              visible={visible}\n              placement={placement}\n              modifiers={{\n                offset: {\n                  offset: '0, 15px'\n                }\n              }}\n              reference={this.getTooltipReference()}\n              color={color}\n              value={value}\n            />\n            {children}\n          </g>\n        )}\n      </Fragment>\n    );\n  }\n}\n","import React, { Component, PropsWithChildren, createRef } from 'react';\nimport bind from 'memoize-bind';\nimport {\n  Pan,\n  PanMoveEvent,\n  PanStartEvent,\n  PanEndEvent,\n  PanCancelEvent\n} from '../Gestures/Pan';\nimport { Zoom, ZoomEvent } from '../Gestures/Zoom';\nimport {\n  identity,\n  fromObject,\n  fromDefinition,\n  transform\n} from 'transformation-matrix';\nimport isEqual from 'react-fast-compare';\n\nexport interface ZoomPanEvent {\n  scale: number;\n  x: number;\n  y: number;\n  type: 'zoom' | 'pan';\n  nativeEvent: any;\n}\n\nexport interface ZoomPanProps extends PropsWithChildren {\n  height: number;\n  width: number;\n  scale: number;\n  x: number;\n  y: number;\n  pannable: boolean;\n  zoomable: boolean;\n  disabled?: boolean;\n  maxZoom: number;\n  minZoom: number;\n  zoomStep: number;\n  constrain: boolean;\n  globalPanning: boolean;\n  disableMouseWheel?: boolean;\n  requireZoomModifier?: boolean;\n  onZoomPan: (event: ZoomPanEvent) => void;\n  onZoom: (event: ZoomEvent) => void;\n  onZoomEnd: () => void;\n  onPanStart: (event: PanStartEvent) => void;\n  onPanMove: (event: PanMoveEvent) => void;\n  onPanEnd: (event: PanEndEvent) => void;\n  onPanCancel: (event: PanCancelEvent) => void;\n}\n\ninterface ZoomPanState {\n  isZooming: boolean;\n  isPanning: boolean;\n  matrix: any;\n}\n\nexport class ZoomPan extends Component<ZoomPanProps, ZoomPanState> {\n  static defaultProps: Partial<ZoomPanProps> = {\n    maxZoom: 10,\n    minZoom: 0,\n    zoomStep: 0.1,\n    pannable: true,\n    zoomable: true,\n    constrain: true,\n    height: 0,\n    width: 0,\n    x: 0,\n    y: 0,\n    scale: 1,\n    globalPanning: true,\n    onPanStart: () => undefined,\n    onPanMove: () => undefined,\n    onPanEnd: () => undefined,\n    onPanCancel: () => undefined,\n    onZoom: () => undefined,\n    onZoomEnd: () => undefined\n  };\n\n  static getDerivedStateFromProps(props: ZoomPanProps, state: ZoomPanState) {\n    // TODO: the types in the library don't seem to be correct...\n    const matrix = transform(\n      (fromDefinition as any)([\n        { type: 'translate', tx: props.x, ty: props.y },\n        { type: 'scale', sx: props.scale, sy: props.scale }\n      ])\n    );\n\n    if (!isEqual(matrix, state.matrix)) {\n      return {\n        matrix\n      };\n    }\n\n    return null;\n  }\n\n  zoomRef = createRef<Zoom>();\n  panRef = createRef<Pan>();\n  state: ZoomPanState = {\n    isZooming: false,\n    isPanning: false,\n    matrix: identity()\n  };\n\n  onPanStart(event: PanStartEvent) {\n    this.setState({\n      isPanning: true\n    });\n\n    this.props.onPanStart(event);\n  }\n\n  onPanMove(event: PanMoveEvent) {\n    this.props.onZoomPan({\n      scale: this.props.scale,\n      x: event.x,\n      y: event.y,\n      type: 'pan',\n      nativeEvent: event.nativeEvent\n    });\n\n    this.props.onPanMove(event);\n  }\n\n  onPanEnd(event: PanEndEvent) {\n    this.setState({ isPanning: false });\n    this.props.onPanEnd(event);\n  }\n\n  onZoom(event: ZoomEvent) {\n    this.props.onZoomPan({\n      x: event.x,\n      y: event.y,\n      scale: event.scale,\n      nativeEvent: event.nativeEvent,\n      type: 'zoom'\n    });\n\n    this.props.onZoom(event);\n  }\n\n  onZoomEnd() {\n    this.setState({\n      isZooming: false\n    });\n\n    this.props.onZoomEnd();\n  }\n\n  render() {\n    const {\n      height,\n      width,\n      children,\n      disabled,\n      pannable,\n      maxZoom,\n      minZoom,\n      zoomable,\n      scale,\n      x,\n      y,\n      disableMouseWheel,\n      constrain,\n      zoomStep,\n      onPanCancel,\n      requireZoomModifier,\n      globalPanning\n    } = this.props;\n    const { isZooming, isPanning } = this.state;\n    const cursor = pannable ? 'move' : 'auto';\n    const selection = isZooming || isPanning ? 'none' : 'auto';\n    const matrix = fromObject(this.state.matrix);\n\n    return (\n      <Pan\n        x={x}\n        y={y}\n        scale={scale}\n        matrix={matrix}\n        constrain={constrain}\n        height={height}\n        width={width}\n        disabled={!pannable || disabled}\n        ref={this.panRef}\n        globalPanning={globalPanning}\n        onPanStart={bind(this.onPanStart, this)}\n        onPanMove={bind(this.onPanMove, this)}\n        onPanEnd={bind(this.onPanEnd, this)}\n        onPanCancel={onPanCancel}\n      >\n        <Zoom\n          ref={this.zoomRef}\n          disabled={!zoomable || disabled}\n          scaleFactor={zoomStep}\n          disableMouseWheel={disableMouseWheel}\n          maxZoom={maxZoom}\n          minZoom={minZoom}\n          scale={scale}\n          x={x}\n          y={y}\n          style={{ cursor }}\n          requireZoomModifier={requireZoomModifier}\n          matrix={matrix}\n          onZoom={bind(this.onZoom, this)}\n          onZoomEnd={bind(this.onZoomEnd, this)}\n        >\n          {!disabled && (\n            <rect\n              height={height}\n              width={width}\n              opacity={0}\n              className=\"pan-container\"\n            />\n          )}\n          <g\n            style={{\n              pointerEvents: selection,\n              userSelect: selection\n            }}\n          >\n            {children}\n          </g>\n        </Zoom>\n      </Pan>\n    );\n  }\n}\n","import { scaleLinear, scaleTime, scaleBand } from 'd3-scale';\nimport { getXDomain, getYDomain } from '../utils/domains';\nimport {\n  ChartInternalShallowDataShape,\n  ChartInternalNestedDataShape\n} from '../data';\nimport { uniqueBy } from '../utils/array';\n\ninterface ScaleConfig {\n  type: 'category' | 'value' | 'time' | 'duration';\n  roundDomains?: boolean;\n  data: any[];\n  domain?: any[];\n  padding?: number;\n  scaled?: boolean;\n  width?: number;\n  height?: number;\n  isMultiSeries?: boolean;\n  isDiverging?: boolean;\n}\n\n/**\n * Gets the X Scale function.\n */\nexport function getXScale({\n  type,\n  roundDomains,\n  data,\n  width,\n  domain,\n  padding,\n  scaled,\n  isMultiSeries = false,\n  isDiverging = false\n}: ScaleConfig) {\n  let scale;\n\n  if (type === 'time' || type === 'duration' || type === 'value') {\n    if (type === 'time') {\n      scale = scaleTime().rangeRound([0, width!]);\n    } else {\n      scale = scaleLinear().rangeRound([0, width!]);\n    }\n\n    scale = scale.domain(domain || getXDomain({ data, scaled, isDiverging }));\n  } else {\n    if (!domain) {\n      if (isMultiSeries) {\n        domain = uniqueBy<ChartInternalShallowDataShape>(data, (d) => d.key);\n      } else {\n        domain = uniqueBy<ChartInternalShallowDataShape>(data, (d) => d.x);\n      }\n    }\n\n    scale = scaleBand()\n      .rangeRound([0, width!])\n      .padding(padding || 0)\n      .domain(domain as ReadonlyArray<any>);\n  }\n\n  return roundDomains ? scale.nice() : scale;\n}\n\n/**\n * Gets the Y Scale function.\n */\nexport function getYScale({\n  type,\n  height,\n  data,\n  domain,\n  roundDomains = false,\n  scaled = false,\n  padding = 0,\n  isMultiSeries = false,\n  isDiverging = false\n}: ScaleConfig) {\n  let scale;\n\n  if (type === 'time' || type === 'value' || type === 'duration') {\n    scale = scaleLinear()\n      .range([height!, 0])\n      .domain(domain || getYDomain({ data, scaled, isDiverging }));\n  } else {\n    if (!domain) {\n      if (isMultiSeries) {\n        domain = uniqueBy<ChartInternalNestedDataShape>(\n          data as [],\n          (d) => d.key\n        );\n      } else {\n        domain = uniqueBy<ChartInternalShallowDataShape>(data, (d) => d.y);\n      }\n    }\n\n    scale = scaleBand()\n      .rangeRound([height!, 0])\n      .padding(padding)\n      .domain(domain as ReadonlyArray<any>);\n  }\n\n  return roundDomains ? scale.nice() : scale;\n}\n","import { scaleLinear } from 'd3-scale';\nimport { ChartInternalNestedDataShape } from '../data';\nimport { uniqueBy } from '../utils/array';\n\ninterface MariemkoScaleData {\n  data: ChartInternalNestedDataShape[];\n  width: number;\n  valueScale: any;\n  padding: number;\n}\n\n/**\n * Get a linear scale for the mariemko chart.\n */\nexport const getMarimekkoScale = (width: number, roundDomains: boolean) => {\n  const scale = scaleLinear().rangeRound([0, width]);\n  return roundDomains ? scale.nice() : scale;\n};\n\n/**\n * Builds a fake scale function to get a group scale for a marimekko value scale.\n */\nexport const getMarimekkoGroupScale = ({\n  data,\n  width,\n  valueScale,\n  padding\n}: MariemkoScaleData) => {\n  const domain = uniqueBy<ChartInternalNestedDataShape>(data, (d) => d.key);\n  const barCount = data.length;\n  const widthMinusPadding = width - padding * (barCount - 1);\n  const xMultiplier = widthMinusPadding / width;\n\n  // Given a data series, find the x0/x1 for it.\n  const getXRange = (series) => {\n    const [val] = series.data;\n    const x0 = valueScale(val.x0);\n    const x1 = valueScale(val.x1);\n    return { x0, x1 };\n  };\n\n  const scale: any = (arg) => {\n    let result = 0;\n    const index = data.findIndex((d) => d.key === arg);\n    const series = data[index];\n\n    if (series && series.data && series.data.length) {\n      const { x1, x0 } = getXRange(series);\n      result = (x1 - x0) / 2 + x0;\n\n      if (padding) {\n        result = result * xMultiplier + index * padding;\n      }\n    }\n\n    return result;\n  };\n\n  scale.range = () => [0, width];\n  scale.domain = () => domain;\n\n  // Special invert function for marimekko\n  scale.mariemkoInvert = (offset: number) => {\n    let found;\n\n    for (let i = 0; i < domain.length; i++) {\n      const attr = domain[i];\n      const series = data[i];\n      const { x1, x0 } = getXRange(series);\n\n      if (offset >= x0 - padding / 2 && offset <= x1 - padding / 2) {\n        found = attr;\n        break;\n      }\n    }\n\n    return found;\n  };\n\n  return scale;\n};\n","import { scaleBand } from 'd3-scale';\nimport { uniqueBy } from '../utils/array';\n\n/**\n * Get the group scale aka x0.\n */\nexport function getGroupScale({\n  dimension,\n  padding,\n  data,\n  direction = 'vertical'\n}) {\n  const domain = uniqueBy(data, (d) => d.key);\n  const spacing = domain.length / (dimension / padding + 1);\n  const range = direction === 'vertical' ? [0, dimension] : [dimension, 0];\n\n  return scaleBand()\n    .rangeRound(range as any)\n    .paddingInner(spacing)\n    .paddingOuter(spacing / 2)\n    .domain(domain as string[]);\n}\n\n/**\n * Get the inner scale aka x1.\n */\nexport function getInnerScale({ groupScale, padding, data, prop = 'x' }) {\n  const dimension = groupScale.bandwidth();\n  const domain = uniqueBy(\n    data,\n    (d) => d.data,\n    (d) => d[prop]\n  );\n  const spacing = domain.length / (dimension / padding + 1);\n\n  return scaleBand()\n    .rangeRound([0, dimension])\n    .paddingInner(spacing)\n    .domain(domain as string[]);\n}\n","import { scaleLinear } from 'd3-scale';\n\n/**\n * Get the Y Scale for a given set of radiuses.\n * Reference: https://github.com/d3/d3-scale/issues/90\n */\nexport const getRadialYScale = (\n  innerRadius: number,\n  outerRadius: number,\n  domain: any[]\n) => {\n  if (domain[0] === 0 && domain[1] === 0) {\n    // If all values are 0, set the domain to [0, 1], so the zero values are\n    // all at the bottom of the chart, not the middle.\n    domain = [0, 1];\n  }\n  const y = scaleLinear()\n    .range([innerRadius * innerRadius, outerRadius * outerRadius])\n    .domain(domain);\n\n  const yScale = Object.assign((d) => Math.sqrt(y(d)), y);\n\n  return yScale;\n};\n","import React, { Component, PropsWithChildren } from 'react';\nimport bind from 'memoize-bind';\nimport { ZoomPan, ZoomPanEvent } from './ZoomPan';\nimport { ChartInternalDataShape, ChartDataTypes } from '../data';\nimport { getXScale } from '../scales';\n\nexport interface ZoomPanChangeEvent {\n  domain: [ChartDataTypes, ChartDataTypes];\n  isZoomed: boolean;\n}\n\nexport interface ChartZoomPanProps extends PropsWithChildren {\n  data: ChartInternalDataShape[];\n  domain?: [ChartDataTypes, ChartDataTypes];\n  axisType: 'value' | 'time' | 'category' | 'duration';\n  roundDomains: boolean;\n  height: number;\n  width: number;\n  scale: number;\n  offset: number;\n  pannable: boolean;\n  zoomable: boolean;\n  disabled?: boolean;\n  maxZoom: number;\n  zoomStep: number;\n  disableMouseWheel?: boolean;\n  requireZoomModifier?: boolean;\n  onZoomPan?: (event: ZoomPanChangeEvent) => void;\n}\n\nexport class ChartZoomPan extends Component<ChartZoomPanProps> {\n  static defaultProps: Partial<ChartZoomPanProps> = {\n    onZoomPan: () => undefined\n  };\n\n  onZoomPan(event: ZoomPanEvent) {\n    const { width, data, axisType, roundDomains, onZoomPan } = this.props;\n    const can =\n      event.type === 'zoom' || (event.type === 'pan' && event.scale > 1);\n\n    if (can) {\n      const scale: any = getXScale({\n        width: width,\n        type: axisType,\n        roundDomains,\n        data\n      });\n\n      const newScale = scale.copy().domain(\n        scale\n          .range()\n          .map((x) => (x - event.x) / event.scale)\n          .map(scale.clamp(true).invert, event.x)\n      );\n\n      onZoomPan!({\n        domain: newScale.domain(),\n        isZoomed: event.scale !== 1\n      });\n    }\n  }\n\n  getOffset() {\n    let zoomOffset = {\n      scale: undefined,\n      x: undefined\n    } as any;\n\n    const {\n      disabled,\n      domain,\n      width,\n      data,\n      axisType,\n      roundDomains\n    } = this.props;\n\n    if (!disabled && domain) {\n      const xScale: any = getXScale({\n        width,\n        type: axisType,\n        roundDomains,\n        data\n      });\n\n      let offset = xScale(domain[0]);\n      const endOffset = xScale(domain[1]);\n      const scale = width / (endOffset - offset);\n\n      // Apply the new scale to the offset so its scaled correctly\n      offset = offset * scale;\n\n      zoomOffset = {\n        scale: scale,\n        x: -offset\n      };\n    }\n\n    return zoomOffset;\n  }\n\n  render() {\n    const { data, height, children, width, onZoomPan, ...rest } = this.props;\n    const { scale, x } = this.getOffset();\n\n    return (\n      <ZoomPan\n        {...rest}\n        scale={scale}\n        x={x}\n        height={height}\n        width={width}\n        pannable={scale > 1}\n        onZoomPan={bind(this.onZoomPan, this)}\n      >\n        {children}\n      </ZoomPan>\n    );\n  }\n}\n","export const DEFAULT_TRANSITION = {\n  type: 'spring',\n  velocity: 5,\n  damping: 20,\n  // https://github.com/framer/motion/issues/1513#issuecomment-1121133717\n  restDelta: 0.01,\n  restSpeed: 0.01\n};\n","import React, { useEffect } from 'react';\nimport { motion, useMotionValue, useSpring } from 'framer-motion';\nimport { interpolate } from 'd3-interpolate';\nimport { DEFAULT_TRANSITION } from './config';\n\nexport const MotionPath = ({ custom, transition, ...rest }) => {\n  const d = useMotionValue(custom.exit.d);\n  const prevPath = useMotionValue(custom.exit.d);\n  const spring = useSpring(prevPath, {\n    ...DEFAULT_TRANSITION,\n    from: 0,\n    to: 1\n  });\n\n  useEffect(() => {\n    const interpolator = interpolate(prevPath.get(), custom.enter.d);\n    const unsub = spring.onChange(v => d.set(interpolator(v)));\n    // TODO: this is causing the animation to run REALLY fast on init\n    prevPath.set(custom.enter.d);\n    return unsub;\n  });\n\n  const { d: enterD, ...enterRest } = custom.enter;\n  const { d: exitD, ...exitRest } = custom.exit;\n\n  return (\n    <motion.path\n      {...rest}\n      initial={exitRest}\n      exit={exitRest}\n      animate={enterRest}\n      transition={transition}\n      d={transition.type !== false ? d : enterD}\n    />\n  );\n};\n","import chroma from 'chroma-js';\n\n/**\n * Color Schemes\n * Credits: https://gka.github.io/chroma.js/#chroma-brewer\n */\nexport const schemes = {\n  cybertron: chroma.scale(['#2d60e8', '#26efb5']).correctLightness().colors(8),\n  ...chroma.brewer\n};\n","import { scaleOrdinal } from 'd3-scale';\nimport { maxIndex } from 'd3-array';\nimport { schemes } from './schemes';\n\nexport type ColorSchemeType =\n  | ((data, index: number, active?: any[]) => string)\n  | string[]\n  | string;\n\ntype ColorHelperProps = {\n  colorScheme: ColorSchemeType;\n  point: any;\n  data: any[];\n  index: number;\n  active: any[];\n  scale?: any;\n  domain?: any[];\n  key?: any;\n  attribute?: string;\n  isMultiSeries?: boolean;\n};\n\n/**\n * Given a point, get the key attributes for it.\n */\nconst rangeHelper = (point: any, attribute: string) =>\n  point.map((r, i) => {\n    if (r) {\n      if (r[attribute] !== undefined) {\n        return r[attribute];\n      } else if (r.data && r.data[attribute] !== undefined) {\n        return r.data[attribute];\n      }\n    }\n\n    return i;\n  });\n\n/**\n * Get a color given a range.\n */\nexport const getColor = (props: Partial<ColorHelperProps>) => {\n  let {\n    point,\n    colorScheme,\n    attribute,\n    index,\n    data,\n    active,\n    isMultiSeries,\n    domain,\n    key,\n    scale\n  } = {\n    attribute: 'key',\n    isMultiSeries: false,\n    scale: scaleOrdinal,\n    ...props\n  };\n\n  if (typeof colorScheme === 'string' && schemes[colorScheme]) {\n    colorScheme = schemes[colorScheme];\n  }\n\n  if (Array.isArray(colorScheme)) {\n    if (!domain) {\n      if (isMultiSeries && Array.isArray(data)) {\n        const maxIdx = maxIndex(data, (d) => d.data.length);\n        const maxVal = data[maxIdx];\n        data = maxVal.data;\n      }\n\n      domain = rangeHelper(data, attribute);\n    }\n\n    key = key !== undefined ? key : point[attribute];\n\n    return scale(colorScheme).domain(domain)(key);\n  } else if (typeof colorScheme === 'function') {\n    return colorScheme(point, index!, active);\n  } else {\n    return colorScheme;\n  }\n};\n","import { animate } from 'framer-motion';\nimport { useEffect, useRef } from 'react';\n\nexport interface CountInputs {\n  /**\n   * Number to animate to\n   */\n  to: number;\n\n  /**\n   * Number to animate from. Defaults 0.\n   */\n  from?: number;\n\n  /**\n   * Duration of the animation in seconds. Defaults 1.\n   */\n  duration?: number;\n\n  /**\n   * Delay of the animation. Defaults 0.\n   */\n  delay?: number;\n\n  /**\n   * Localize the number. Defaults true.\n   */\n  format?: boolean;\n\n  /**\n   * Number of decimal places. Defaults 0.\n   */\n  decimalPlaces?: number;\n\n  /**\n   * Prefix the number with a string or number.\n   */\n  prefix?: string | number;\n\n  /**\n   * Suffix the number with a string or number.\n   */\n  suffix?: string | number;\n}\n\nexport const COUNT_DEFAULTS = {\n  from: 0,\n  duration: 1,\n  delay: 0,\n  format: true,\n  decimalPlaces: 0\n};\n\nexport const useCount = ({\n  from,\n  to,\n  duration,\n  delay,\n  prefix,\n  suffix,\n  decimalPlaces,\n  format\n}: CountInputs) => {\n  const nodeRef = useRef<any | null>(null);\n\n  from = from || COUNT_DEFAULTS.from;\n  duration = duration || COUNT_DEFAULTS.duration;\n  delay = delay || COUNT_DEFAULTS.delay;\n  format = format || COUNT_DEFAULTS.format;\n  decimalPlaces = decimalPlaces || COUNT_DEFAULTS.decimalPlaces;\n\n  useEffect(() => {\n    const node = nodeRef.current;\n\n    const controls = animate(from, to, {\n      duration,\n      delay,\n      onUpdate(value) {\n        let formatted: number | string = value;\n        if (decimalPlaces) {\n          formatted = Number(value.toFixed(decimalPlaces));\n        } else {\n          formatted = Number(value.toFixed(0));\n        }\n\n        if (format) {\n          formatted = formatted.toLocaleString();\n        }\n\n        if (node) {\n          if (prefix) {\n            formatted = `${prefix}${formatted}`;\n          }\n          if (suffix) {\n            formatted = `${formatted}${suffix}`;\n          }\n\n          node.textContent = formatted as string;\n        }\n      }\n    });\n\n    return () => controls.stop();\n  }, [from, to, duration, delay, decimalPlaces, format, prefix, suffix]);\n\n  return nodeRef;\n};\n","import React, { FC } from 'react';\nimport { CountInputs, useCount } from './useCount';\n\nexport interface CountProps extends CountInputs {\n  className?: string;\n}\n\nexport const Count: FC<CountProps> = ({ className, ...rest }) => {\n  const ref = useCount(rest);\n  return <span ref={ref} className={className} />;\n};\n\nCount.defaultProps = {\n  from: 0,\n  duration: 1,\n  delay: 0,\n  localize: true,\n  decimalPlaces: 0\n};\n","import React, { FC, Fragment } from 'react';\n\nexport interface GlowProps {\n  /**\n   * The color of the glow.\n   */\n  color?: string;\n\n  /**\n   * The x offset of the glow.\n   */\n  x?: number;\n\n  /**\n   * The y offset of the glow.\n   */\n  y?: number;\n\n  /**\n   * The blur radius of the glow.\n   */\n  blur?: number;\n}\n\nexport const Glow: FC<GlowProps> = () => (\n  <Fragment />\n);\n\nGlow.defaultProps = {\n  x: 1,\n  y: 1,\n  blur: 5,\n  color: 'rgb(93, 37, 238, 0.5)'\n};\n","import React, {\n  Fragment,\n  ReactNode,\n  ReactElement,\n  useState,\n  FC,\n  useRef,\n  useMemo,\n  useCallback\n} from 'react';\nimport { ChartInternalShallowDataShape } from '../../common/data';\nimport { ChartTooltip, ChartTooltipProps } from '../../common/Tooltip';\nimport classNames from 'classnames';\nimport { CloneElement } from 'rdk';\nimport {\n  constructFunctionProps,\n  PropFunctionTypes\n} from '../../common/utils/functions';\nimport { motion } from 'framer-motion';\nimport { DEFAULT_TRANSITION } from '../../common/Motion';\nimport { schemes, getColor, ColorSchemeType } from '../../common/color';\nimport { identifier } from 'safe-identifier';\nimport css from './ScatterPoint.module.css';\nimport { Glow, GlowProps } from '../../common/Glow';\n\nexport type ScatterPointProps = {\n  /**\n   * Whether the element is active or not. Set internally by `ScatterSeries`.\n   */\n  active?: boolean;\n\n  /**\n   * Size of the circle element.\n   */\n  size?: ((data: ChartInternalShallowDataShape) => number) | number;\n\n  /**\n   * Color of the circle.\n   */\n  color?: ColorSchemeType;\n\n  /**\n   * Cursor for the element.\n   */\n  cursor?: string;\n\n  /**\n   * D3 scale for X Axis. Set internally by `ScatterPlot`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `ScatterPlot`.\n   */\n  yScale: any;\n\n  /**\n   * Height of the chart. Set internally by `ScatterPlot`.\n   */\n  height: number;\n\n  /**\n   * Whether to animate the enter/update/exit. Set internally by `ScatterSeries`.\n   */\n  animated?: boolean;\n\n  /**\n   * Index of the element in the series. Set internally by `ScatterSeries`.\n   */\n  index: number;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Parsed data shape. Set internally by `ScatterPlot`.\n   */\n  data: ChartInternalShallowDataShape;\n\n  /**\n   * Id set internally by `ScatterPlot`.\n   */\n  id: string;\n\n  /**\n   * Glow element for the point.\n   */\n  glow?: ReactElement<GlowProps, typeof Glow> | null;\n\n  /**\n   * Symbol element to render.\n   */\n  symbol?: (data: ChartInternalShallowDataShape) => ReactNode;\n\n  /**\n   * Whether the elment is visiblbe or not.\n   */\n  visible?: (data: ChartInternalShallowDataShape, index: number) => boolean;\n\n  /**\n   * Event for when a symbol is clicked.\n   */\n  onClick?: (data: ChartInternalShallowDataShape) => void;\n\n  /**\n   * Event for when the symbol has mouse enter.\n   */\n  onMouseEnter?: (data: ChartInternalShallowDataShape) => void;\n\n  /**\n   * Event for when the symbol has mouse leave.\n   */\n  onMouseLeave?: (data: ChartInternalShallowDataShape) => void;\n} & PropFunctionTypes;\n\nexport const ScatterPoint: FC<Partial<ScatterPointProps>> = ({\n  symbol,\n  index,\n  id,\n  data,\n  xScale,\n  yScale,\n  active,\n  tooltip,\n  cursor,\n  size,\n  glow,\n  color,\n  animated,\n  onClick,\n  onMouseEnter,\n  onMouseLeave,\n  ...rest\n}) => {\n  const rectRef = useRef<any | null>(null);\n  const [tooltipVisible, setTooltipVisible] = useState<boolean>(false);\n  const extras = useMemo(\n    () => constructFunctionProps(rest, data),\n    [rest, data]\n  );\n  const r = useMemo(\n    () => (typeof size === 'function' ? size(data!) : size),\n    [size, data]\n  );\n  const renderedSymbol = useMemo(\n    () => (symbol ? symbol(data!) : null),\n    [data, symbol]\n  );\n\n  const transitionProps = useMemo(\n    () =>\n      animated\n        ? {\n          ...DEFAULT_TRANSITION,\n          delay: index! * 0.005\n        }\n        : {\n          type: false,\n          delay: 0\n        },\n    [index, animated]\n  );\n\n  const enterProps = useMemo(() => {\n    let cy = yScale(data!.y1);\n    if (yScale.bandwidth) {\n      const width = yScale.bandwidth();\n      cy = cy + width / 2;\n    }\n\n    return {\n      x: xScale(data!.x),\n      y: cy\n    };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data, yScale]);\n\n  const exitProps = useMemo(() => {\n    const [yStartDomain] = yScale.domain();\n    return {\n      y: yScale(yStartDomain),\n      x: xScale(data!.x)\n    };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data, yScale]);\n\n  const fill = useMemo(\n    () =>\n      getColor({\n        colorScheme: color,\n        index,\n        point: data\n      }),\n    [data, color, index]\n  );\n\n  const key = `symbol-${id}-${identifier(`${data!.id}`)}`;\n  const glowStyles = glow ? {\n    filter: `drop-shadow(${glow.props.x}px ${glow.props.y}px ${glow.props.blur}px ${glow.props.color})`\n  } : {};\n\n  return (\n    <Fragment>\n      <g\n        ref={rectRef}\n        className={classNames({\n          [css.inactive]: !active\n        })}\n        onMouseEnter={() => {\n          setTooltipVisible(true);\n          onMouseEnter(data!);\n        }}\n        onMouseLeave={() => {\n          setTooltipVisible(false);\n          onMouseLeave(data!);\n        }}\n        onClick={() => onClick(data!)}\n      >\n        {symbol ? (\n          <motion.g\n            key={key}\n            {...extras}\n            initial={{\n              translateX: exitProps.x,\n              translateY: exitProps.y,\n              opacity: 0\n            }}\n            animate={{\n              translateX: enterProps.x,\n              translateY: enterProps.y,\n              opacity: 1\n            }}\n            exit={{\n              translateX: exitProps.x,\n              translateY: exitProps.y,\n              opacity: 0\n            }}\n            transition={transitionProps}\n          >\n            {renderedSymbol}\n          </motion.g>\n        ) : (\n          <motion.circle\n            key={key}\n            className={extras.className}\n            style={{\n              ...extras.style,\n              ...glowStyles,\n              cursor\n            }}\n            fill={fill}\n            initial={{\n              cx: exitProps.x,\n              cy: exitProps.y,\n              r,\n              opacity: 0\n            }}\n            animate={{\n              cx: enterProps.x,\n              cy: enterProps.y,\n              opacity: 1,\n              r\n            }}\n            exit={{\n              cx: exitProps.x,\n              cy: exitProps.y,\n              r,\n              opacity: 0\n            }}\n            transition={transitionProps}\n          />\n        )}\n      </g>\n      {tooltip && !tooltip.props.disabled && (\n        <CloneElement<ChartTooltipProps>\n          element={tooltip}\n          visible={tooltipVisible}\n          reference={rectRef}\n          value={data}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nScatterPoint.defaultProps = {\n  active: true,\n  tooltip: <ChartTooltip />,\n  cursor: 'pointer',\n  size: 4,\n  color: schemes.cybertron[0],\n  animated: true,\n  onClick: () => undefined,\n  onMouseEnter: () => undefined,\n  onMouseLeave: () => undefined\n};\n","import React, { useCallback, Fragment, ReactElement, FC } from 'react';\nimport { ChartInternalShallowDataShape } from '../../common/data';\nimport { CloneElement } from 'rdk';\nimport { ScatterPoint, ScatterPointProps } from './ScatterPoint';\nimport { identifier } from 'safe-identifier';\n\nexport interface ScatterSeriesProps {\n  /**\n   * Point that is rendered.\n   */\n  point: ReactElement<ScatterPointProps, typeof ScatterPoint>;\n\n  /**\n   * D3 scale for X Axis. Set internally by `ScatterPlot`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `ScatterPlot`.\n   */\n  yScale: any;\n\n  /**\n   * Parsed data shape. Set internally by `ScatterPlot`.\n   */\n  data: ChartInternalShallowDataShape[];\n\n  /**\n   * Id set internally by `ScatterPlot`.\n   */\n  id: string;\n\n  /**\n   * Height of the chart. Set internally by `ScatterPlot`.\n   */\n  height: number;\n\n  /**\n   * Width of the chart. Set internally by `ScatterPlot`.\n   */\n  width: number;\n\n  /**\n   * Whether the chart has been zoomed or not. Set internally by `ScatterPlot`.\n   */\n  isZoomed: boolean;\n\n  /**\n   * Whether to animate the enter/update/exit.\n   */\n  animated: boolean;\n\n  /**\n   * Active element ids to highlight.\n   */\n  activeIds?: string[];\n}\n\n// For bubble charts, often symbols exceed the area\n// and we want to add a little bit of padding to prevent clipping\nconst PADDING = 25;\nconst HALF_PADDING = PADDING / 2;\n\nexport const ScatterSeries: FC<Partial<ScatterSeriesProps>> = ({\n  data,\n  height,\n  width,\n  id,\n  isZoomed,\n  activeIds,\n  point,\n  ...rest\n}) => {\n  const renderPoint = useCallback(\n    (pointData: ChartInternalShallowDataShape, index: number) => {\n      let pointId;\n      if (pointData.id) {\n        pointId = pointData.id;\n      }\n\n      const key = identifier(`${pointId || index}`);\n      const active =\n        !(activeIds && activeIds.length) || activeIds.includes(pointId);\n\n      const visible = point.props.visible;\n      if (visible && !visible(pointData, index)) {\n        return <Fragment key={key} />;\n      }\n\n      return (\n        <CloneElement<ScatterPointProps>\n          element={point}\n          key={key}\n          {...rest}\n          id={id}\n          data={pointData}\n          index={index}\n          active={active}\n        />\n      );\n    },\n    [point, id, rest, activeIds]\n  );\n\n  return (\n    <Fragment>\n      <defs>\n        <clipPath id={`${id}-path`}>\n          <rect\n            width={isZoomed ? width : width! + PADDING}\n            height={height! + PADDING}\n            x={isZoomed ? 0 : -HALF_PADDING}\n            y={-HALF_PADDING}\n          />\n        </clipPath>\n      </defs>\n      <g clipPath={`url(#${id}-path)`}>{data!.map(renderPoint)}</g>\n    </Fragment>\n  );\n};\n\nScatterSeries.defaultProps = {\n  point: <ScatterPoint />\n};\n","import React, {\n  FC,\n  Fragment,\n  ReactElement,\n  useState,\n  useRef,\n  useCallback,\n  useMemo\n} from 'react';\nimport classNames from 'classnames';\nimport {\n  ChartShallowDataShape,\n  buildShallowChartData,\n  ChartDataTypes\n} from '../common/data';\nimport {\n  isAxisVisible,\n  LinearAxisProps,\n  LinearXAxis,\n  LinearYAxis,\n  LinearAxis\n} from '../common/Axis';\nimport { getYScale, getXScale } from '../common/scales';\nimport { ScatterSeries, ScatterSeriesProps } from './ScatterSeries';\nimport { GridlineSeries, GridlineSeriesProps } from '../common/Gridline';\nimport {\n  ZoomPanChangeEvent,\n  ChartZoomPanProps,\n  ChartZoomPan\n} from '../common/ZoomPan';\nimport { ChartBrushProps, ChartBrush } from '../common/Brush';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '../common/containers/ChartContainer';\nimport { CloneElement } from 'rdk';\nimport css from './ScatterPlot.module.css';\n\nexport interface ScatterPlotProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * The series component that renders the scatter components.\n   */\n  series: ReactElement<ScatterSeriesProps, typeof ScatterSeries>;\n\n  /**\n   * The linear axis component for the Y Axis of the chart.\n   */\n  yAxis: ReactElement<LinearAxisProps, typeof LinearAxis>;\n\n  /**\n   * The linear axis component for the X Axis of the chart.\n   */\n  xAxis: ReactElement<LinearAxisProps, typeof LinearAxis>;\n\n  /**\n   * The chart's background gridlines component.\n   */\n  gridlines: ReactElement<GridlineSeriesProps, typeof GridlineSeries> | null;\n\n  /**\n   * The chart's brush component.\n   */\n  brush: ReactElement<ChartBrushProps, typeof ChartBrush> | null;\n\n  /**\n   * The chart's zoom pan component.\n   */\n  zoomPan: ReactElement<ChartZoomPanProps, typeof ChartZoomPan> | null;\n\n  /**\n   * Any secondary axis components. Useful for multi-axis charts.\n   */\n  secondaryAxis?: ReactElement<LinearAxisProps, typeof LinearAxis>[];\n}\n\nexport const ScatterPlot: FC<Partial<ScatterPlotProps>> = ({\n  id,\n  width,\n  height,\n  margins,\n  className,\n  series,\n  xAxis,\n  yAxis,\n  data,\n  gridlines,\n  containerClassName,\n  brush,\n  zoomPan,\n  secondaryAxis\n}) => {\n  const zoomControlled = useMemo(\n    () =>\n      // eslint-disable-next-line\n      !zoomPan?.props?.domain?.hasOwnProperty('domain'),\n    [zoomPan]\n  );\n\n  const timeout = useRef<any | null>(null);\n  const [preventAnimation, setPreventAnimation] = useState<boolean>(false);\n  const [zoomDomain, setZoomDomain] = useState<\n    [ChartDataTypes, ChartDataTypes] | null\n  >(null);\n  const [isZoomed, setIsZoomed] = useState<boolean>(false);\n  const aggregatedData = useMemo(() => buildShallowChartData(data), [data]);\n\n  const getScales = useCallback(\n    (chartHeight: number, chartWidth: number) => {\n      const yScale = getYScale({\n        roundDomains: yAxis.props.roundDomains,\n        type: yAxis.props.type,\n        height: chartHeight,\n        data: aggregatedData,\n        domain: yAxis.props.domain\n      });\n\n      const xScale = getXScale({\n        width: chartWidth,\n        type: xAxis.props.type,\n        roundDomains: xAxis.props.roundDomains,\n        data: aggregatedData,\n        domain: zoomDomain || xAxis.props.domain\n      });\n\n      return {\n        yScale,\n        xScale\n      };\n    },\n    [yAxis, xAxis, aggregatedData, zoomDomain]\n  );\n\n  const onZoomPan = useCallback(\n    (event: ZoomPanChangeEvent) => {\n      if (zoomControlled) {\n        setPreventAnimation(true);\n        setZoomDomain(event.domain);\n        setIsZoomed(event.isZoomed);\n\n        clearTimeout(timeout.current);\n        timeout.current = setTimeout(() => setPreventAnimation(true), 500);\n      }\n    },\n    [zoomControlled]\n  );\n\n  const renderChart = useCallback(\n    ({\n      chartHeight,\n      chartWidth,\n      id,\n      updateAxes,\n      chartSized\n    }: ChartContainerChildProps) => {\n      const { yScale, xScale } = getScales(chartHeight, chartWidth);\n      const animated =\n        preventAnimation === true ? false : series.props.animated;\n      const disableBrush = aggregatedData.length <= 1;\n\n      return (\n        <Fragment>\n          {chartSized && gridlines && (\n            <CloneElement<GridlineSeriesProps>\n              element={gridlines}\n              height={chartHeight}\n              width={chartWidth}\n              yScale={yScale}\n              xScale={xScale}\n              yAxis={yAxis.props}\n              xAxis={xAxis.props}\n            />\n          )}\n          <CloneElement<LinearAxisProps>\n            element={xAxis}\n            height={chartHeight}\n            width={chartWidth}\n            scale={xScale}\n            onDimensionsChange={(e) => updateAxes('horizontal', e)}\n          />\n          <CloneElement<LinearAxisProps>\n            element={yAxis}\n            height={chartHeight}\n            width={chartWidth}\n            scale={yScale}\n            onDimensionsChange={(e) => updateAxes('vertical', e)}\n          />\n          {secondaryAxis &&\n            secondaryAxis.map((axis, i) => (\n              <CloneElement<LinearAxisProps>\n                key={i}\n                element={axis}\n                height={chartHeight}\n                width={chartWidth}\n                onDimensionsChange={(e) => updateAxes('horizontal', e)}\n              />\n            ))}\n          {chartSized && (\n            <CloneElement<ChartBrushProps>\n              disabled={disableBrush}\n              element={brush}\n              height={chartHeight}\n              width={chartWidth}\n              scale={xScale}\n            >\n              <CloneElement<ChartZoomPanProps>\n                element={zoomPan}\n                onZoomPan={onZoomPan}\n                height={chartHeight}\n                width={chartWidth}\n                axisType={xAxis.props.type}\n                roundDomains={xAxis.props.roundDomains}\n                data={aggregatedData}\n                domain={zoomDomain}\n              >\n                <CloneElement<ScatterSeriesProps>\n                  element={series}\n                  id={`area-series-${id}`}\n                  data={aggregatedData}\n                  height={chartHeight}\n                  width={chartWidth}\n                  yScale={yScale}\n                  xScale={xScale}\n                  isZoomed={isZoomed}\n                  animated={animated}\n                />\n              </CloneElement>\n            </CloneElement>\n          )}\n        </Fragment>\n      );\n    },\n    [\n      getScales,\n      preventAnimation,\n      series,\n      gridlines,\n      yAxis,\n      xAxis,\n      secondaryAxis,\n      brush,\n      zoomPan,\n      onZoomPan,\n      aggregatedData,\n      zoomDomain,\n      isZoomed\n    ]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      containerClassName={containerClassName}\n      margins={margins}\n      xAxisVisible={isAxisVisible(xAxis.props)}\n      yAxisVisible={isAxisVisible(yAxis.props)}\n      className={classNames(css.scatterPlot, className)}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n\nScatterPlot.defaultProps = {\n  data: [],\n  xAxis: <LinearXAxis type=\"time\" />,\n  yAxis: <LinearYAxis type=\"value\" />,\n  series: <ScatterSeries />,\n  gridlines: <GridlineSeries />,\n  brush: null,\n  zoomPan: null\n};\n","import React, { FC, ReactElement, useCallback } from 'react';\nimport { ChartInternalShallowDataShape } from '../../common/data';\nimport { CloneElement } from 'rdk';\nimport {\n  ScatterPoint,\n  ScatterSeries,\n  ScatterPointProps\n} from '../../ScatterPlot';\nimport css from './PointSeries.module.css';\nimport isEqual from 'react-fast-compare';\n\nexport interface PointSeriesProps {\n  animated: boolean;\n  color: any;\n  activeValues?: any;\n  data: ChartInternalShallowDataShape[];\n  yScale: any;\n  xScale: any;\n  id: string;\n  height: number;\n  width: number;\n  show: boolean | 'hover' | 'first' | 'last';\n  point: ReactElement<ScatterPointProps, typeof ScatterPoint>;\n  index: number;\n}\n\nexport const PointSeries: FC<Partial<PointSeriesProps>> = ({\n  data,\n  xScale,\n  yScale,\n  animated,\n  point,\n  color,\n  height,\n  width,\n  id,\n  activeValues,\n  show\n}) => {\n  const getIsVisible = useCallback(\n    (point: ChartInternalShallowDataShape, index: number) => {\n      const isActive =\n        activeValues && point && isEqual(activeValues.x, point.x);\n\n      if (show === 'hover') {\n        return isActive;\n      } else if (show === 'first') {\n        if (activeValues) {\n          return isActive;\n        } else {\n          return index === 0;\n        }\n      } else if (show === 'last') {\n        if (activeValues) {\n          return isActive;\n        } else {\n          return index === data.length - 1;\n        }\n      }\n\n      return show;\n    },\n    [activeValues, data.length, show]\n  );\n\n  return (\n    <ScatterSeries\n      height={height}\n      width={width}\n      id={id}\n      animated={animated}\n      data={data}\n      xScale={xScale}\n      yScale={yScale}\n      point={\n        <CloneElement<ScatterPointProps>\n          element={point}\n          color={color}\n          className={css.point}\n          size={4}\n          tooltip={null}\n          visible={getIsVisible}\n        />\n      }\n    />\n  );\n};\n\nPointSeries.defaultProps = {\n  show: 'hover',\n  point: <ScatterPoint />\n};\n","import React, { Fragment, useMemo, ReactElement, FC, useCallback } from 'react';\nimport { area } from 'd3-shape';\nimport { Gradient, GradientProps } from '../../common/Gradient';\nimport { Mask, MaskProps } from '../../common/Mask';\nimport {\n  interpolate,\n  InterpolationTypes\n} from '../../common/utils/interpolation';\nimport {\n  ChartInternalDataShape,\n  ChartInternalShallowDataShape\n} from '../../common/data';\nimport { CloneElement } from 'rdk';\nimport {\n  constructFunctionProps,\n  PropFunctionTypes\n} from '../../common/utils/functions';\nimport { MotionPath, DEFAULT_TRANSITION } from '../../common/Motion';\n\nexport interface AreaProps extends PropFunctionTypes {\n  /**\n   * Id set internally by `AreaSeries`.\n   */\n  id: string;\n\n  /**\n   * Parsed data shape. Set internally by `AreaChart`.\n   */\n  data: ChartInternalDataShape[];\n\n  /**\n   * Interpolation for the area. Set internally by `AreaSeries`.\n   */\n  interpolation: InterpolationTypes;\n\n  /**\n   * Color for the area. Set internally by `AreaSeries`.\n   */\n  color: any;\n\n  /**\n   * D3 scale for X Axis. Set internally by `AreaChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `AreaChart`.\n   */\n  yScale: any;\n\n  /**\n   * Index of the area in the series. Set internally by `AreaSeries`.\n   */\n  index: number;\n\n  /**\n   * Total number of areas in the series. Set internally by `AreaSeries`.\n   */\n  total: number;\n\n  /**\n   * Whether to animate the enter/update/exit. Set internally by `AreaSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * Mask to apply to the area.\n   */\n  mask: ReactElement<MaskProps, typeof Mask> | null;\n\n  /**\n   * Gradient to apply to the area.\n   */\n  gradient: ReactElement<GradientProps, typeof Gradient> | null;\n}\n\nexport const Area: FC<Partial<AreaProps>> = ({\n  id,\n  gradient,\n  mask,\n  data,\n  color,\n  index,\n  total,\n  xScale,\n  yScale,\n  animated,\n  interpolation,\n  ...rest\n}) => {\n  const stroke = color(data, index);\n\n  const coords = useMemo(() => {\n    return data.map((item: any) => ({\n      x: xScale(item.x),\n      x1: xScale(item.x) - xScale(item.x1),\n      y: yScale(item.y),\n      y0: yScale(item.y0),\n      y1: yScale(item.y1)\n    })) as ChartInternalShallowDataShape[];\n  }, [data, xScale, yScale]);\n\n  const getAreaPath = useCallback(\n    (d: ChartInternalShallowDataShape[]) => {\n      // If the input data is a single value and this is the only\n      // area in a series, fill the available space with an area:\n      if (d.length === 1 && total === 1) {\n        const [point] = d;\n        // Assume the single data point's `x` value\n        // is the middle of the graph:\n        const midpoint = point.x as number;\n        d = [{ ...point }, { ...point }];\n        const [start, end] = d;\n        start.x = 0;\n        end.x = midpoint * 2;\n      }\n\n      const fn = area()\n        .x((d: any) => d.x)\n        .y0((d: any) => d.y0)\n        .y1((d: any) => d.y1)\n        .curve(interpolate(interpolation));\n\n      return fn(d as any);\n    },\n    [interpolation, total]\n  );\n\n  const enter = useMemo(() => {\n    const areaPath = getAreaPath(coords);\n\n    return {\n      d: areaPath === null ? undefined : areaPath\n    };\n  }, [coords, getAreaPath]);\n\n  const exit = useMemo(() => {\n    const maxY = Math.max(...yScale.range());\n    const coords = data.map((item: any) => ({\n      x: xScale(item.x),\n      x1: 0,\n      y: 0,\n      y1: maxY,\n      y0: maxY\n    })) as ChartInternalShallowDataShape[];\n\n    const areaPath = getAreaPath(coords);\n\n    return {\n      d: areaPath === null ? undefined : areaPath\n    };\n  }, [data, getAreaPath, xScale, yScale]);\n\n  const fill = useMemo(() => {\n    if (mask) {\n      return `url(#mask-pattern-${id})`;\n    } else {\n      if (gradient) {\n        return `url(#gradient-${id})`;\n      }\n\n      return '';\n    }\n  }, [gradient, id, mask]);\n\n  const transition = useMemo(() => {\n    if (animated) {\n      return {\n        ...DEFAULT_TRANSITION,\n        delay: index * 0.05\n      };\n    } else {\n      return {\n        type: false,\n        delay: 0\n      };\n    }\n  }, [animated, index]);\n\n  const renderArea = useCallback(() => {\n    const maskPath = mask ? `url(#mask-${id})` : '';\n    const extras = constructFunctionProps(rest, data);\n\n    return (\n      <MotionPath\n        {...extras}\n        pointerEvents=\"none\"\n        mask={maskPath}\n        fill={fill}\n        transition={transition}\n        custom={{\n          enter,\n          exit\n        }}\n      />\n    );\n  }, [data, enter, exit, fill, id, mask, rest, transition]);\n\n  return (\n    <Fragment>\n      {renderArea()}\n      {mask && (\n        <Fragment>\n          <Mask id={`mask-${id}`} fill={`url(#gradient-${id})`} />\n          <CloneElement<MaskProps>\n            element={mask}\n            id={`mask-pattern-${id}`}\n            fill={stroke}\n          />\n        </Fragment>\n      )}\n      {gradient && (\n        <CloneElement<GradientProps>\n          element={gradient}\n          id={`gradient-${id}`}\n          color={stroke}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nArea.defaultProps = {\n  gradient: <Gradient />,\n  interpolation: 'linear'\n};\n","import React, {\n  FC,\n  Fragment,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState\n} from 'react';\nimport { line } from 'd3-shape';\nimport {\n  interpolate,\n  InterpolationTypes\n} from '../../common/utils/interpolation';\nimport {\n  ChartInternalDataShape,\n  ChartInternalShallowDataShape\n} from '../../common/data';\nimport { calculateShowStroke } from '../../common/utils/stroke';\nimport {\n  constructFunctionProps,\n  PropFunctionTypes\n} from '../../common/utils/functions';\nimport { MotionPath, DEFAULT_TRANSITION } from '../../common/Motion';\n\nexport interface LineProps extends PropFunctionTypes {\n  /**\n   * Id set internally by `AreaChart`.\n   */\n  id: string;\n\n  /**\n   * Parsed data shape. Set internally by `AreaChart`.\n   */\n  data: ChartInternalDataShape[];\n\n  /**\n   * Width of the chart. Set internally by `AreaChart`.\n   */\n  width: number;\n\n  /**\n   * Interpolation for the area. Set internally by `AreaSeries`.\n   */\n  interpolation: InterpolationTypes;\n\n  /**\n   * Color for the area. Set internally by `AreaSeries`.\n   */\n  color: any;\n\n  /**\n   * D3 scale for X Axis. Set internally by `AreaChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `AreaChart`.\n   */\n  yScale: any;\n\n  /**\n   * Index of the area in the series. Set internally by `AreaSeries`.\n   */\n  index: number;\n\n  /**\n   * Whether to animate the enter/update/exit. Set internally by `AreaSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * Stroke width of the line.\n   */\n  strokeWidth: number;\n\n  /**\n   * Show the stroke if there is no value.\n   */\n  showZeroStroke: boolean;\n\n  /**\n   * Internal property to identify if there is a area or not.\n   */\n  hasArea: boolean;\n}\n\nexport const Line: FC<Partial<LineProps>> = ({\n  width,\n  data,\n  color,\n  index,\n  strokeWidth,\n  hasArea,\n  animated,\n  yScale,\n  xScale,\n  showZeroStroke,\n  interpolation,\n  ...rest\n}) => {\n  const [pathLength, setPathLength] = useState<number | null>(null);\n  const ghostPathRef = useRef<SVGPathElement | null>(null);\n\n  useEffect(() => {\n    if (ghostPathRef.current) {\n      setPathLength(ghostPathRef.current.getTotalLength());\n    }\n  }, [data, xScale, yScale, width]);\n\n  const getLinePath = useCallback(\n    (point: ChartInternalShallowDataShape[]) => {\n      const fn = line()\n        .x((d: any) => d.x)\n        .y((d: any) => d.y1)\n        .defined((d: any) => showZeroStroke || calculateShowStroke(d, point))\n        .curve(interpolate(interpolation));\n\n      return fn(point as any);\n    },\n    [interpolation, showZeroStroke]\n  );\n\n  const transition = useMemo(() => {\n    if (animated) {\n      return {\n        ...DEFAULT_TRANSITION,\n        delay: hasArea ? 0 : index * 0.05\n      };\n    } else {\n      return {\n        type: false,\n        delay: 0\n      };\n    }\n  }, [animated, hasArea, index]);\n\n  const coords = useMemo(() => {\n    return data.map((item: any) => ({\n      x: xScale(item.x),\n      x1: xScale(item.x) - xScale(item.x1),\n      y: yScale(item.y),\n      y0: yScale(item.y0),\n      y1: yScale(item.y1)\n    })) as ChartInternalShallowDataShape[];\n  }, [data, xScale, yScale]);\n\n  const enter = useMemo(() => {\n    const linePath = getLinePath(coords);\n\n    let strokeDasharray = '';\n    if (!hasArea && pathLength !== null) {\n      strokeDasharray = `${pathLength} ${pathLength}`;\n    }\n\n    return {\n      d: linePath === null ? undefined : linePath,\n      strokeDashoffset: 0,\n      strokeDasharray: strokeDasharray\n    };\n  }, [coords, getLinePath, hasArea, pathLength]);\n\n  const exit = useMemo(() => {\n    let newCoords = coords;\n    if (hasArea) {\n      const maxY = Math.max(...yScale.range());\n      newCoords = data.map((item: any) => ({\n        x: xScale(item.x),\n        x1: 0,\n        y: maxY,\n        y1: maxY,\n        y0: maxY\n      })) as ChartInternalShallowDataShape[];\n    }\n\n    const linePath = getLinePath(newCoords);\n\n    let strokeDasharray = '';\n    let strokeDashoffset = 0;\n    if (!hasArea && pathLength !== null) {\n      strokeDasharray = `${pathLength} ${pathLength}`;\n      strokeDashoffset = pathLength;\n    }\n\n    return {\n      d: linePath === null ? undefined : linePath,\n      strokeDasharray,\n      strokeDashoffset\n    };\n  }, [coords, data, getLinePath, hasArea, pathLength, xScale, yScale]);\n\n  const stroke = color(data, index);\n  const extras = constructFunctionProps(rest, data);\n  const showLine = hasArea || pathLength !== null;\n\n  // framer-motion freaks out when these are added for area\n  if (hasArea) {\n    delete enter.strokeDashoffset;\n    delete exit.strokeDashoffset;\n  }\n\n  return (\n    <Fragment>\n      {showLine && (\n        <MotionPath\n          {...extras}\n          pointerEvents=\"none\"\n          stroke={stroke}\n          strokeWidth={strokeWidth}\n          fill=\"none\"\n          transition={transition}\n          custom={{\n            enter,\n            exit\n          }}\n        />\n      )}\n      {!hasArea && (\n        <path opacity=\"0\" d={enter.d} ref={ghostPathRef} pointerEvents=\"none\" />\n      )}\n    </Fragment>\n  );\n};\n\nLine.defaultProps = {\n  showZeroStroke: true,\n  strokeWidth: 3\n};\n","import React, {\n  Fragment,\n  ReactElement,\n  FC,\n  useCallback,\n  useState\n} from 'react';\nimport { PointSeries, PointSeriesProps } from './PointSeries';\nimport { Area, AreaProps } from './Area';\nimport { MarkLine, MarkLineProps } from '../../common/MarkLine';\nimport {\n  ChartInternalDataShape,\n  ChartInternalNestedDataShape,\n  ChartInternalShallowDataShape\n} from '../../common/data';\nimport { CloneElement } from 'rdk';\nimport {\n  TooltipArea,\n  TooltipAreaProps,\n  TooltipAreaEvent\n} from '../../common/Tooltip';\nimport { Line, LineProps } from './Line';\nimport { InterpolationTypes } from '../../common/utils/interpolation';\nimport { getColor, ColorSchemeType } from '../../common/color';\nimport { identifier } from 'safe-identifier';\n\nexport type AreaChartTypes =\n  | 'standard'\n  | 'grouped'\n  | 'stacked'\n  | 'stackedNormalized';\n\nexport interface AreaSeriesProps {\n  /**\n   * Id set internally by `AreaChart`.\n   */\n  id: string;\n\n  /**\n   * D3 scale for X Axis. Set internally by `AreaChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `AreaChart`.\n   */\n  yScale: any;\n\n  /**\n   * Parsed data shape. Set internally by `AreaChart`.\n   */\n  data: ChartInternalDataShape[];\n\n  /**\n   * Height of the chart. Set internally by `AreaChart`.\n   */\n  height: number;\n\n  /**\n   * Width of the chart. Set internally by `AreaChart`.\n   */\n  width: number;\n\n  /**\n   * Whether to animate the enter/update/exit.\n   */\n  animated: boolean;\n\n  /**\n   * Type of area chart to render.\n   */\n  type: AreaChartTypes;\n\n  /**\n   * Interpolation type for the area/line.\n   */\n  interpolation: InterpolationTypes;\n\n  /**\n   * Tooltip for the chart area.\n   */\n  tooltip: ReactElement<TooltipAreaProps, typeof TooltipArea>;\n\n  /**\n   * Markline for the chart.\n   */\n  markLine: ReactElement<MarkLineProps, typeof MarkLine> | null;\n\n  /**\n   * Symbols used to show points.\n   */\n  symbols: ReactElement<PointSeriesProps, typeof PointSeries> | null;\n\n  /**\n   * Line that is rendered.\n   */\n  line: ReactElement<LineProps, typeof Line> | null;\n\n  /**\n   * Area that is rendered.\n   */\n  area: ReactElement<AreaProps, typeof Area> | null;\n\n  /**\n   * Color scheme for the series.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Whether the chart has been zoomed or not. Set internally by `AreaChart`.\n   */\n  isZoomed: boolean;\n}\n\n// For area charts, often symbols exceed the area\n// and we want to add a little bit of padding to prevent clipping\nconst PADDING = 25;\nconst HALF_PADDING = PADDING / 2;\n\nexport const AreaSeries: FC<Partial<AreaSeriesProps>> = ({\n  data,\n  height,\n  id,\n  width,\n  isZoomed,\n  tooltip,\n  xScale,\n  yScale,\n  type,\n  markLine,\n  symbols,\n  animated,\n  area,\n  interpolation,\n  line,\n  colorScheme\n}) => {\n  const [activeValues, setActiveValues] = useState<any | null>(null);\n  const [activePoint, setActivePoint] = useState<any | null>(null);\n\n  const onValueEnter = useCallback((event: TooltipAreaEvent) => {\n    setActivePoint(event.pointX);\n    setActiveValues(event.value);\n  }, []);\n\n  const onValueLeave = useCallback(() => {\n    setActivePoint(undefined);\n    setActiveValues(undefined);\n  }, []);\n\n  const isMulti =\n    type === 'grouped' || type === 'stacked' || type === 'stackedNormalized';\n\n  const getPointColor = useCallback(\n    (point, index: number) => {\n      const key = Array.isArray(point) ? point?.[0]?.key : point?.key;\n\n      return getColor({\n        data,\n        colorScheme,\n        active: activeValues,\n        point,\n        index,\n        key\n      });\n    },\n    [activeValues, colorScheme, data]\n  );\n\n  const renderArea = useCallback(\n    (data: ChartInternalShallowDataShape[], index = 0, total = 1) => (\n      <Fragment>\n        {line && (\n          <CloneElement<LineProps>\n            element={line}\n            xScale={xScale}\n            yScale={yScale}\n            data={data}\n            width={width}\n            index={index}\n            hasArea={area !== null}\n            animated={animated}\n            interpolation={interpolation}\n            color={getPointColor}\n          />\n        )}\n        {area && (\n          <CloneElement<AreaProps>\n            element={area}\n            id={`${id}-area-${index}`}\n            xScale={xScale}\n            yScale={yScale}\n            data={data}\n            index={index}\n            total={total}\n            animated={animated}\n            interpolation={interpolation}\n            color={getPointColor}\n          />\n        )}\n      </Fragment>\n    ),\n    [\n      animated,\n      area,\n      getPointColor,\n      id,\n      interpolation,\n      line,\n      width,\n      xScale,\n      yScale\n    ]\n  );\n\n  const renderSymbols = useCallback(\n    (data: ChartInternalShallowDataShape[], index = 0) => {\n      const visible = symbols !== null;\n      const activeSymbols =\n        (symbols && symbols.props.activeValues) || activeValues;\n\n      // Animations are only valid for Area\n      const isAnimated = area !== undefined && animated && !activeSymbols;\n\n      return (\n        <Fragment>\n          {visible && (\n            <CloneElement<PointSeriesProps>\n              element={symbols}\n              key={`point-series-${id}`}\n              id={id}\n              height={height}\n              width={width}\n              activeValues={activeSymbols}\n              xScale={xScale}\n              yScale={yScale}\n              index={index}\n              data={data}\n              animated={isAnimated}\n              color={() => getPointColor(data, index)}\n            />\n          )}\n        </Fragment>\n      );\n    },\n    [\n      activeValues,\n      animated,\n      area,\n      getPointColor,\n      height,\n      id,\n      symbols,\n      width,\n      xScale,\n      yScale\n    ]\n  );\n\n  const renderMarkLine = useCallback(() => (\n    <>\n      {activeValues && markLine && (\n        <CloneElement<MarkLineProps>\n          element={markLine}\n          height={height}\n          pointX={activePoint}\n        />\n      )}\n    </>\n  ), [activePoint, activeValues, height, markLine]);\n\n  const renderSingleSeries = useCallback(\n    (data: ChartInternalShallowDataShape[]) => (\n      <Fragment>\n        {renderArea(data)}\n        {renderMarkLine()}\n        {renderSymbols(data)}\n      </Fragment>\n    ),\n    [renderArea, renderMarkLine, renderSymbols]\n  );\n\n  const renderMultiSeries = useCallback(\n    (data: ChartInternalNestedDataShape[]) => (\n      <Fragment>\n        {data\n          .map((point, index) => (\n            <Fragment key={identifier(`${point.key}`)}>\n              {renderArea(point.data, index, data.length)}\n            </Fragment>\n          ))\n          .reverse()}\n        {renderMarkLine()}\n        {data\n          .map((point, index) => (\n            <Fragment key={identifier(`${point.key}`)}>\n              {renderSymbols(point.data, index)}\n            </Fragment>\n          ))\n          .reverse()}\n      </Fragment>\n    ),\n    [renderArea, renderMarkLine, renderSymbols]\n  );\n\n  return (\n    <Fragment>\n      <defs>\n        <clipPath id={`${id}-path`}>\n          <rect\n            width={isZoomed ? width : width + PADDING}\n            height={height + PADDING}\n            x={isZoomed ? 0 : -HALF_PADDING}\n            y={-HALF_PADDING}\n          />\n        </clipPath>\n      </defs>\n      <CloneElement<TooltipAreaProps>\n        element={tooltip}\n        xScale={xScale}\n        yScale={yScale}\n        data={data}\n        height={height}\n        width={width}\n        color={getPointColor}\n        onValueEnter={onValueEnter}\n        onValueLeave={onValueLeave}\n      >\n        <g clipPath={`url(#${id}-path)`}>\n          {isMulti && renderMultiSeries(data as ChartInternalNestedDataShape[])}\n          {!isMulti &&\n            renderSingleSeries(data as ChartInternalShallowDataShape[])}\n        </g>\n      </CloneElement>\n    </Fragment>\n  );\n};\n\nAreaSeries.defaultProps = {\n  colorScheme: 'cybertron',\n  animated: true,\n  interpolation: 'linear',\n  type: 'standard',\n  line: <Line />,\n  area: <Area />,\n  markLine: <MarkLine />,\n  tooltip: <TooltipArea />,\n  symbols: <PointSeries />\n};\n","import React, { Component, FC } from 'react';\nimport { AreaSeriesProps, AreaSeries } from './AreaSeries';\nimport { formatValue } from '../../common/utils/formatting';\nimport {\n  TooltipTemplate,\n  TooltipArea,\n  ChartTooltip\n} from '../../common/Tooltip';\nimport { CloneElement } from 'rdk';\nimport { PointSeriesProps } from './PointSeries';\nimport { ScatterPointProps } from '../../ScatterPlot';\n\nexport const StackedNormalizedAreaSeries: FC<Partial<AreaSeriesProps>> = ({\n  type,\n  symbols,\n  ...rest\n}) => (\n  <AreaSeries\n    {...rest}\n    type=\"stackedNormalized\"\n    symbols={\n      symbols && (\n        <CloneElement<PointSeriesProps>\n          element={symbols}\n          {...symbols.props}\n          point={\n            <CloneElement<ScatterPointProps>\n              element={symbols.props.point}\n              {...symbols.props.point.props}\n              tooltip={null}\n            />\n          }\n        />\n      )\n    }\n  />\n);\n\nStackedNormalizedAreaSeries.defaultProps = {\n  ...AreaSeries.defaultProps,\n  type: 'stackedNormalized',\n  tooltip: (\n    <TooltipArea\n      tooltip={\n        <ChartTooltip\n          content={(series, color) => {\n            if (!series) {\n              return null;\n            }\n\n            const value = {\n              ...series,\n              data: series.data.map((d) => ({\n                ...d,\n                value: `${formatValue(d.value)}  ${formatValue(\n                  Math.floor((d.y1 - d.y0) * 100)\n                )}%`\n              }))\n            };\n\n            return <TooltipTemplate color={color} value={value} />;\n          }}\n        />\n      }\n    />\n  )\n};\n","import React, { FC } from 'react';\nimport { AreaSeriesProps, AreaSeries } from './AreaSeries';\nimport { CloneElement } from 'rdk';\nimport { PointSeriesProps } from './PointSeries';\nimport { ScatterPointProps } from '../../ScatterPlot';\n\nexport const StackedAreaSeries: FC<Partial<AreaSeriesProps>> = ({\n  type,\n  symbols,\n  ...rest\n}) => (\n  <AreaSeries\n    {...rest}\n    type=\"stacked\"\n    symbols={\n      symbols && (\n        <CloneElement<PointSeriesProps>\n          element={symbols}\n          {...symbols.props}\n          point={\n            <CloneElement<ScatterPointProps>\n              element={symbols.props.point}\n              {...symbols.props.point.props}\n              tooltip={null}\n            />\n          }\n        />\n      )\n    }\n  />\n);\n\nStackedAreaSeries.defaultProps = {\n  ...AreaSeries.defaultProps,\n  type: 'stacked'\n};\n","import React, {\n  Fragment,\n  useEffect,\n  ReactElement,\n  FC,\n  useCallback,\n  useMemo,\n  useState,\n  useRef\n} from 'react';\nimport classNames from 'classnames';\nimport { AreaSeries, AreaSeriesProps } from './AreaSeries';\nimport {\n  isAxisVisible,\n  LinearAxisProps,\n  LinearXAxis,\n  LinearYAxis,\n  LinearAxis\n} from '../common/Axis/LinearAxis';\nimport { getXScale, getYScale } from '../common/scales';\nimport { GridlineSeries, GridlineSeriesProps } from '../common/Gridline';\nimport {\n  ChartDataShape,\n  ChartNestedDataShape,\n  buildStackData,\n  buildShallowChartData,\n  ChartShallowDataShape,\n  buildNestedChartData\n} from '../common/data';\nimport css from './AreaChart.module.css';\nimport { ChartBrushProps, ChartBrush } from '../common/Brush';\nimport {\n  ZoomPanChangeEvent,\n  ChartZoomPanProps,\n  ChartZoomPan\n} from '../common/ZoomPan';\nimport {\n  ChartContainerChildProps,\n  ChartContainer,\n  ChartProps\n} from '../common/containers/ChartContainer';\nimport { CloneElement } from 'rdk';\n\nexport interface AreaChartProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartDataShape[];\n\n  /**\n   * The series component that renders the area/line/circles components.\n   */\n  series: ReactElement<AreaSeriesProps, typeof AreaSeries>;\n\n  /**\n   * The linear axis component for the Y Axis of the chart.\n   */\n  yAxis: ReactElement<LinearAxisProps, typeof LinearAxis>;\n\n  /**\n   * The linear axis component for the X Axis of the chart.\n   */\n  xAxis: ReactElement<LinearAxisProps, typeof LinearAxis>;\n\n  /**\n   * The chart's background gridlines component.\n   */\n  gridlines: ReactElement<GridlineSeriesProps, typeof GridlineSeries> | null;\n\n  /**\n   * The chart's brush component.\n   */\n  brush: ReactElement<ChartBrushProps, typeof ChartBrush> | null;\n\n  /**\n   * The chart's zoom pan component.\n   */\n  zoomPan: ReactElement<ChartZoomPanProps, typeof ChartZoomPan> | null;\n\n  /**\n   * Any secondary axis components. Useful for multi-axis charts.\n   */\n  secondaryAxis?: ReactElement<LinearAxisProps, typeof LinearAxis>[];\n}\n\nexport const AreaChart: FC<Partial<AreaChartProps>> = ({\n  xAxis,\n  yAxis,\n  id,\n  data,\n  width,\n  height,\n  margins,\n  className,\n  containerClassName,\n  series,\n  gridlines,\n  brush,\n  zoomPan,\n  secondaryAxis\n}) => {\n  const zoom: any = zoomPan ? zoomPan.props : {};\n  const [zoomDomain, setZoomDomain] = useState<any>(zoom.domain);\n  const [preventAnimation, setPreventAnimation] = useState<boolean>(false);\n  const [isZoomed, setIsZoomed] = useState<boolean>(!!zoom.domain);\n  // eslint-disable-next-line\n  const [zoomControlled] = useState<boolean>(!zoom.hasOwnProperty('domain'));\n\n  const timeoutRef = useRef<any | null>(null);\n\n  const seriesType = series.props.type;\n  const isMultiSeries =\n    seriesType === 'stacked' ||\n    seriesType === 'stackedNormalized' ||\n    seriesType === 'grouped';\n\n  const animated = preventAnimation === true ? false : series.props.animated;\n\n  useEffect(() => {\n    if (zoomPan) {\n      const zoom = zoomPan.props;\n      if (!zoomControlled && zoom.domain !== zoomDomain) {\n        setZoomDomain(zoom.domain);\n        setIsZoomed(!!zoom.domain);\n      }\n    }\n  }, [zoomControlled, zoomDomain, zoomPan]);\n\n  const aggregatedData = useMemo(() => {\n    if (seriesType === 'stacked' || seriesType === 'stackedNormalized') {\n      return buildStackData(\n        data as ChartNestedDataShape[],\n        seriesType === 'stackedNormalized'\n      );\n    } else if (seriesType === 'grouped') {\n      return buildNestedChartData(data as ChartNestedDataShape[], true);\n    } else {\n      return buildShallowChartData(data as ChartShallowDataShape[]);\n    }\n  }, [data, seriesType]);\n\n  const getScales = useCallback(\n    (chartWidth: number, chartHeight: number) => {\n      const xScale = getXScale({\n        width: chartWidth,\n        type: xAxis.props.type,\n        roundDomains: xAxis.props.roundDomains,\n        data: aggregatedData,\n        domain: zoomDomain || xAxis.props.domain,\n        isMultiSeries\n      });\n\n      const yScale = getYScale({\n        roundDomains: yAxis.props.roundDomains,\n        type: yAxis.props.type,\n        height: chartHeight,\n        data: aggregatedData,\n        domain: yAxis.props.domain,\n        isMultiSeries\n      });\n\n      return { xScale, yScale };\n    },\n    [\n      aggregatedData,\n      isMultiSeries,\n      xAxis.props.domain,\n      xAxis.props.roundDomains,\n      xAxis.props.type,\n      yAxis.props.domain,\n      yAxis.props.roundDomains,\n      yAxis.props.type,\n      zoomDomain\n    ]\n  );\n\n  const onZoomPan = useCallback(\n    (event: ZoomPanChangeEvent) => {\n      if (zoomControlled) {\n        setZoomDomain(event.domain);\n        setIsZoomed(event.isZoomed);\n        setPreventAnimation(true);\n\n        clearTimeout(timeoutRef.current);\n        timeoutRef.current = setTimeout(() => setPreventAnimation(false));\n      }\n    },\n    [zoomControlled]\n  );\n\n  const renderChart = useCallback(\n    ({\n      chartHeight,\n      chartWidth,\n      id,\n      updateAxes,\n      chartSized\n    }: ChartContainerChildProps) => {\n      const { xScale, yScale } = getScales(chartWidth, chartHeight);\n      const disableBrush = aggregatedData.length <= 1;\n\n      return (\n        <Fragment>\n          {chartSized && gridlines && (\n            <CloneElement<GridlineSeriesProps>\n              element={gridlines}\n              height={chartHeight}\n              width={chartWidth}\n              yScale={yScale}\n              xScale={xScale}\n              yAxis={yAxis.props}\n              xAxis={xAxis.props}\n            />\n          )}\n          <CloneElement<LinearAxisProps>\n            element={xAxis}\n            height={chartHeight}\n            width={chartWidth}\n            scale={xScale}\n            onDimensionsChange={(event) => updateAxes('horizontal', event)}\n          />\n          <CloneElement<LinearAxisProps>\n            element={yAxis}\n            height={chartHeight}\n            width={chartWidth}\n            scale={yScale}\n            onDimensionsChange={(event) => updateAxes('vertical', event)}\n          />\n          {secondaryAxis &&\n            secondaryAxis.map((axis, i) => (\n              <CloneElement<LinearAxisProps>\n                key={i}\n                element={axis}\n                height={chartHeight}\n                width={chartWidth}\n                onDimensionsChange={(event) => updateAxes('horizontal', event)}\n              />\n            ))}\n          {chartSized && (\n            <CloneElement<ChartBrushProps>\n              disabled={disableBrush}\n              element={brush}\n              height={chartHeight}\n              width={chartWidth}\n              scale={xScale}\n            >\n              <CloneElement<ChartZoomPanProps>\n                element={zoomPan}\n                onZoomPan={onZoomPan}\n                height={chartHeight}\n                width={chartWidth}\n                axisType={xAxis.props.type}\n                roundDomains={xAxis.props.roundDomains}\n                data={aggregatedData}\n                domain={zoomDomain}\n              >\n                <CloneElement<AreaSeriesProps>\n                  element={series}\n                  id={`area-series-${id}`}\n                  data={aggregatedData}\n                  height={chartHeight}\n                  width={chartWidth}\n                  yScale={yScale}\n                  xScale={xScale}\n                  isZoomed={isZoomed}\n                  animated={animated}\n                />\n              </CloneElement>\n            </CloneElement>\n          )}\n        </Fragment>\n      );\n    },\n    [\n      aggregatedData,\n      animated,\n      brush,\n      getScales,\n      gridlines,\n      isZoomed,\n      onZoomPan,\n      secondaryAxis,\n      series,\n      xAxis,\n      yAxis,\n      zoomDomain,\n      zoomPan\n    ]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      containerClassName={containerClassName}\n      xAxisVisible={isAxisVisible(xAxis.props)}\n      yAxisVisible={isAxisVisible(yAxis.props)}\n      className={classNames(\n        css.areaChart,\n        className,\n        series.type as unknown as string\n      )}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n\nAreaChart.defaultProps = {\n  data: [],\n  xAxis: <LinearXAxis type=\"time\" />,\n  yAxis: <LinearYAxis type=\"value\" />,\n  series: <AreaSeries />,\n  gridlines: <GridlineSeries />,\n  brush: null,\n  zoomPan: null\n};\n","import React, { FC } from 'react';\nimport { AreaChart, AreaChartProps } from './AreaChart';\nimport { ChartNestedDataShape } from '../common/data';\nimport { StackedAreaSeries } from './AreaSeries';\n\nexport interface StackedAreaChartProps extends AreaChartProps {\n  data: ChartNestedDataShape[];\n}\n\nexport const StackedAreaChart: FC<Partial<StackedAreaChartProps>> = (props) => (\n  <AreaChart {...props} />\n);\n\nStackedAreaChart.defaultProps = {\n  series: <StackedAreaSeries />\n};\n","import React, { FC } from 'react';\nimport { AreaChart, AreaChartProps } from './AreaChart';\nimport { ChartNestedDataShape } from '../common/data';\nimport { StackedNormalizedAreaSeries } from './AreaSeries';\nimport {\n  LinearYAxis,\n  LinearYAxisTickSeries,\n  LinearYAxisTickLabel\n} from '../common/Axis/LinearAxis';\n\nexport interface StackedNormalizedAreaChartProps extends AreaChartProps {\n  data: ChartNestedDataShape[];\n}\n\nexport const StackedNormalizedAreaChart: FC<\n  Partial<StackedNormalizedAreaChartProps>\n> = (props) => <AreaChart {...props} />;\n\nStackedNormalizedAreaChart.defaultProps = {\n  series: <StackedNormalizedAreaSeries />,\n  yAxis: (\n    <LinearYAxis\n      type=\"value\"\n      tickSeries={\n        <LinearYAxisTickSeries\n          label={\n            <LinearYAxisTickLabel\n              rotation={false}\n              format={(data) => `${data * 100}%`}\n            />\n          }\n        />\n      }\n    />\n  )\n};\n","import React, {\n  Fragment,\n  ReactElement,\n  useCallback,\n  FC,\n  useRef,\n  useMemo,\n  useState\n} from 'react';\nimport chroma from 'chroma-js';\nimport { Gradient, GradientProps } from '../../common/Gradient';\nimport classNames from 'classnames';\nimport { ChartInternalShallowDataShape, Direction } from '../../common/data';\nimport { RangeLinesProps, RangeLines } from './RangeLines';\nimport { CloneElement } from 'rdk';\nimport { Mask, MaskProps } from '../../common/Mask';\nimport {\n  constructFunctionProps,\n  PropFunctionTypes\n} from '../../common/utils/functions';\nimport { motion } from 'framer-motion';\nimport { DEFAULT_TRANSITION } from '../../common/Motion';\nimport { BarLabelProps, BarLabel } from './BarLabel';\nimport { formatValue } from '../../common/utils/formatting';\nimport { GuideBarProps, GuideBar } from './GuideBar';\nimport { ChartTooltipProps, ChartTooltip } from '../../common/Tooltip';\nimport { Glow, GlowProps } from '../../common/Glow';\n\nexport type BarType =\n  | 'standard'\n  | 'grouped'\n  | 'stacked'\n  | 'stackedNormalized'\n  | 'stackedDiverging'\n  | 'marimekko'\n  | 'waterfall';\n\nexport type BarProps = {\n  /**\n   * Whether the bar is active or not.\n   */\n  active: boolean;\n\n  /**\n   * Chroma brightness factor to brighten the active bar. See\n   * https://gka.github.io/chroma.js/#color-brighten for more info.\n   */\n  activeBrightness?: number;\n\n  /**\n   * D3 scale for X Axis. Set internally by `BarChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `BarChart`.\n   */\n  yScale: any;\n\n  /**\n   * D3 scale for X Multi-Group Axis. Set internally by `BarChart`.\n   */\n  xScale1: any;\n\n  /**\n   * Parsed data shape. Set internally by `BarChart`.\n   */\n  data: ChartInternalShallowDataShape;\n\n  /**\n   * Id set internally by `BarChart`.\n   */\n  id: string;\n\n  /**\n   * Gradient shades for the bar.\n   */\n  gradient: ReactElement<GradientProps, typeof Gradient> | null;\n\n  /**\n   * SVG rx attribute for the bar.\n   */\n  rx: number;\n\n  /**\n   * SVG ry attribute for the bar.\n   */\n  ry: number;\n\n  /**\n   * Width of the bar. Set internally by `BarSeries`.\n   */\n  width: number;\n\n  /**\n   * Padding for the bar groups.\n   */\n  padding: number;\n\n  /**\n   * Total number of bars used for animation. Set internally by `BarSeries`.\n   */\n  barCount: number;\n\n  /**\n   * Color callback for the bar.\n   */\n  color: any;\n\n  /**\n   * Cursor for the bar element.\n   */\n  cursor: string;\n\n  /**\n   * Index of the bar. Set internally by `BarSeries`.\n   */\n  barIndex: number;\n\n  /**\n   * Index of the group. Set internally by `BarSeries`.\n   */\n  groupIndex?: number;\n\n  /**\n   * Whether to animate the enter/update/exit. Set internally by `BarSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * Whether this is categorical chart or not. Set internally by `BarSeries`.\n   */\n  isCategorical: boolean;\n\n  /**\n   * Rangelines element. for the bar.\n   */\n  rangeLines: ReactElement<RangeLinesProps, typeof RangeLines> | null;\n\n  /**\n   * Mask element for the bar.\n   */\n  mask: ReactElement<MaskProps, typeof Mask> | null;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Direction of the chart. Set internally by `BarSeries`.\n   */\n  layout: Direction;\n\n  /**\n   * Type of bar chart. Set internally by `BarSeries`.\n   */\n  type: BarType;\n\n  /**\n   * Label element.\n   */\n  label: ReactElement<BarLabelProps, typeof BarLabel> | null;\n\n  /**\n   * Guide bar component.\n   */\n  guide: ReactElement<GuideBarProps, typeof GuideBar> | null;\n\n  /**\n   * Force a min height on the bar.\n   */\n  minHeight?: number;\n\n  /**\n   * Glow element for the point.\n   */\n  glow?: ReactElement<GlowProps, typeof Glow> | null;\n\n  /**\n   * Event for when the bar is clicked.\n   */\n  onClick: (event) => void;\n\n  /**\n   * Event for when the bar has mouse enter.\n   */\n  onMouseEnter: (event) => void;\n\n  /**\n   * Event for when the bar has mouse leave.\n   */\n  onMouseLeave: (event) => void;\n\n  /**\n   * Event for when a bar has mouse move.\n   */\n  onMouseMove: (event) => void;\n} & PropFunctionTypes;\n\ninterface BarCoordinates {\n  width: number;\n  height: number;\n  x: number;\n  y: number;\n}\n\nexport const Bar: FC<Partial<BarProps>> = ({\n  activeBrightness,\n  id,\n  gradient,\n  data,\n  barIndex,\n  color,\n  yScale,\n  barCount,\n  glow,\n  xScale,\n  groupIndex,\n  minHeight,\n  rangeLines,\n  animated,\n  active,\n  type,\n  tooltip,\n  layout,\n  mask,\n  label,\n  cursor,\n  rx,\n  ry,\n  isCategorical,\n  className,\n  style,\n  width,\n  padding,\n  guide,\n  xScale1,\n  onMouseEnter,\n  onClick,\n  onMouseMove,\n  onMouseLeave\n}) => {\n  const isVertical = useMemo(() => layout === 'vertical', [layout]);\n  const rect = useRef<SVGGElement | null>(null);\n  const [internalActive, setInternalActive] = useState<boolean>(active);\n\n  const glowStyles = glow ? {\n    filter: `drop-shadow(${glow.props.x}px ${glow.props.y}px ${glow.props.blur}px ${glow.props.color})`\n  } : {};\n\n  const calculateLinearScalePadding = useCallback(\n    (scale, offset: number, size: number) => {\n      // This function calculates the padding on a linear scale used by the marimekko chart.\n      const totalSize = scale.range()[1];\n      const sizeMinusPadding = totalSize - padding * (barCount - 1);\n      const multiplier = sizeMinusPadding / totalSize;\n      offset = offset * multiplier + groupIndex! * padding;\n      size = size * multiplier;\n\n      return { size, offset };\n    },\n    [barCount, groupIndex, padding]\n  );\n\n  const getExit = useCallback(\n    ({ x, y, width, height }: BarCoordinates) => {\n      let newX = isVertical ? x : Math.min(...xScale.range());\n      let newY = isVertical ? Math.max(...yScale.range()) : y;\n      const newHeight = isVertical ? 0 : height;\n      const newWidth = isVertical ? width : 0;\n\n      if (type === 'stackedDiverging') {\n        if (isVertical) {\n          newY = newY / 2;\n        } else {\n          newX = newX / 2;\n        }\n      }\n\n      return {\n        x: newX,\n        y: newY,\n        height: newHeight,\n        width: newWidth\n      };\n    },\n    [isVertical, type, xScale, yScale]\n  );\n\n  const getKeyCoords = useCallback(\n    (\n      v,\n      v0,\n      v1,\n      scale,\n      sizeOverride: number,\n      isCategorical: boolean,\n      padding: number\n    ) => {\n      let offset;\n      let size;\n\n      if (isCategorical) {\n        if (scale.bandwidth) {\n          offset = scale(v);\n          size = scale.bandwidth();\n\n          if (sizeOverride) {\n            if (offset) {\n              offset = offset + size / 2 - sizeOverride / 2;\n            } else {\n              // Stacked bar charts don't have offsets...\n              offset = size / 2 - sizeOverride / 2;\n            }\n\n            size = sizeOverride;\n          }\n        } else {\n          if (sizeOverride) {\n            throw new Error('Not a valid option for this scale type');\n          }\n\n          offset = scale(v0);\n          size = scale((v1 as any) - (v0 as any));\n\n          if (padding) {\n            const calc = calculateLinearScalePadding(scale, offset, size);\n            offset = calc.offset;\n            size = calc.size;\n          }\n        }\n      } else {\n        if (sizeOverride) {\n          throw new Error('Not a valid option for this scale type');\n        }\n\n        const c0 = scale(v0);\n        const c1 = scale(v1);\n        const delta = c1 - c0;\n        offset = c0;\n        size = Math.max(delta - 1, 0);\n      }\n\n      return {\n        offset: isNaN(offset) ? 0 : offset,\n        size: isNaN(size) ? 0 : size\n      };\n    },\n    [calculateLinearScalePadding]\n  );\n\n  const getValueCoords = useCallback(\n    (v0, v1, scale) => {\n      const c0 = scale(v0);\n      const c1 = scale(v1);\n      const size = Math.abs(c0 - c1);\n      const minSize = Math.max(minHeight || 0, size);\n      const offset = Math.min(c0, c1);\n\n      return {\n        offset: isNaN(offset) ? 0 : offset,\n        size: isNaN(minSize) ? 0 : minSize\n      };\n    },\n    [minHeight]\n  );\n\n  const getCoords = useCallback(\n    (data: ChartInternalShallowDataShape) => {\n      let newYScale = yScale;\n      let newXScale = xScale;\n\n      if (xScale1) {\n        if (isVertical) {\n          newXScale = xScale1;\n        } else {\n          newYScale = xScale1;\n        }\n      }\n\n      if (isVertical) {\n        const xCoords = getKeyCoords(\n          data.x,\n          data.x0,\n          data.x1,\n          newXScale,\n          width,\n          isCategorical,\n          padding\n        );\n        const yCoords = getValueCoords(data.y0, data.y1, newYScale);\n\n        return {\n          x: xCoords.offset,\n          width: xCoords.size,\n          y: yCoords.offset,\n          height: yCoords.size\n        } as BarCoordinates;\n      } else {\n        const yCoords = getKeyCoords(\n          data.y,\n          data.y0,\n          data.y1,\n          newYScale,\n          width,\n          isCategorical,\n          padding\n        );\n        const xCoords = getValueCoords(data.x0, data.x1, newXScale);\n\n        return {\n          x: xCoords.offset,\n          width: xCoords.size,\n          y: yCoords.offset,\n          height: yCoords.size\n        } as BarCoordinates;\n      }\n    },\n    [\n      getKeyCoords,\n      getValueCoords,\n      isCategorical,\n      isVertical,\n      padding,\n      width,\n      xScale,\n      xScale1,\n      yScale\n    ]\n  );\n\n  const onMouseEnterInternal = useCallback(\n    (event) => {\n      // Only tooltip bars rely on this...\n      if (tooltip) {\n        setInternalActive(true);\n      }\n\n      onMouseEnter({\n        value: data,\n        nativeEvent: event\n      });\n    },\n    [data, onMouseEnter, tooltip]\n  );\n\n  const onMouseLeaveInternal = useCallback(\n    (event) => {\n      // Only tooltip bars rely on this...\n      if (tooltip) {\n        setInternalActive(false);\n      }\n\n      onMouseLeave({\n        value: data,\n        nativeEvent: event\n      });\n    },\n    [data, onMouseLeave, tooltip]\n  );\n\n  const onMouseClick = useCallback(\n    (event) => {\n      onClick({\n        value: data,\n        nativeEvent: event\n      });\n    },\n    [data, onClick]\n  );\n\n  const getFill = useCallback(\n    (color: string) => {\n      if (mask) {\n        return `url(#mask-pattern-${id})`;\n      } else {\n        if (gradient) {\n          return `url(#gradient-${id})`;\n        }\n\n        return color;\n      }\n    },\n    [gradient, id, mask]\n  );\n\n  const tooltipData = useMemo(() => {\n    const xAttr = isCategorical ? 'x' : 'x0';\n    let x = data[xAttr]!;\n\n    // Stacked diverging negative numbers\n    // in horizontal layouts need to pull x0\n    if ((data.x0 as number) < 0) {\n      x = data.x0;\n    }\n\n    const matches = isVertical\n      ? data.key && data.key !== x\n      : data.key && data.key !== data.y;\n\n    if (matches) {\n      x = `${data.key}  ${x}`;\n    }\n\n    return {\n      y: data.y,\n      x\n    };\n  }, [data, isCategorical, isVertical]);\n\n  const getTransition = useCallback(\n    (index: number) => {\n      if (animated) {\n        let delay = 0;\n        if (layout === 'vertical') {\n          delay = (index / barCount) * 0.5;\n        } else {\n          delay = ((barCount - index) / barCount) * 0.5;\n        }\n\n        return {\n          ...DEFAULT_TRANSITION,\n          delay: delay\n        };\n      } else {\n        return {\n          type: false,\n          delay: 0\n        };\n      }\n    },\n    [animated, barCount, layout]\n  );\n\n  const renderBar = useCallback(\n    (currentColorShade: string, coords: BarCoordinates, index: number) => {\n      const maskPath = mask ? `url(#mask-${id})` : '';\n      const fill = getFill(currentColorShade);\n      const initialExit = getExit(coords);\n      const extras = constructFunctionProps({ className, style }, data);\n      const transition = getTransition(index);\n\n      // UGH: https://github.com/framer/motion/issues/384\n      const initial = {\n        ...initialExit,\n        attrX: initialExit.x,\n        attrY: initialExit.y,\n        fill\n      };\n\n      delete initial.x;\n      delete initial.y;\n\n      const animate = {\n        ...coords,\n        attrX: coords.x,\n        attrY: coords.y,\n        fill\n      };\n\n      delete animate.x;\n      delete animate.y;\n\n      const glowStyles = glow ? {\n        filter: `drop-shadow(${glow.props.x}px ${glow.props.y}px ${glow.props.blur}px ${glow.props.color})`\n      } : {};\n\n      return (\n        <g ref={rect}>\n          <motion.rect\n            className={classNames(extras.className)}\n            style={{ ...extras.style, ...glowStyles, cursor }}\n            mask={maskPath}\n            rx={rx}\n            ry={ry}\n            initial={initial}\n            animate={animate}\n            exit={initial}\n            transition={transition}\n            onMouseEnter={onMouseEnterInternal}\n            onMouseLeave={onMouseLeaveInternal}\n            onClick={onMouseClick}\n            onMouseMove={onMouseMove}\n          />\n        </g>\n      );\n    },\n    [\n      className,\n      cursor,\n      data,\n      getExit,\n      getFill,\n      getTransition,\n      id,\n      mask,\n      onMouseClick,\n      onMouseEnterInternal,\n      onMouseLeaveInternal,\n      onMouseMove,\n      rx,\n      ry,\n      style\n    ]\n  );\n\n  const renderGuideBar = useCallback(() => {\n    if (!guide) {\n      return null;\n    }\n\n    // If we are stacked, only render the first bar\n    if (type === 'stacked' && barIndex !== 0) {\n      return null;\n    }\n\n    // No reason to show them since they are always 100% tall\n    if (type === 'stackedNormalized' || type === 'marimekko') {\n      console.error('Guide bars are not supported for these chart types');\n      return null;\n    }\n\n    const valueScale = isVertical ? yScale : xScale;\n    const [start, end] = valueScale.domain();\n    const attr = isVertical ? 'y' : 'x';\n\n    // For stacked diverging we need to flip the points for positive / negative bars\n    const attrStart = type === 'stackedDiverging' ? '0' : '1';\n    const endPoint = type === 'stackedDiverging' ? start : end;\n    const startPoint =\n      type === 'stackedDiverging' && (data[attr]! as number) > 0\n        ? end\n        : endPoint;\n\n    const coords = getCoords({\n      ...data,\n      [attr]: endPoint,\n      [`${attr}${attrStart}`]: startPoint\n    });\n\n    return (\n      <CloneElement<GuideBarProps>\n        element={guide}\n        {...coords}\n        active={active}\n      />\n    );\n  }, [\n    active,\n    barIndex,\n    data,\n    getCoords,\n    guide,\n    isVertical,\n    type,\n    xScale,\n    yScale\n  ]);\n\n  const isActive = tooltip ? internalActive : active;\n  const stroke = color(data, barIndex);\n  const coords = getCoords(data);\n  const currentColorShade = active\n    ? chroma(stroke).brighten(activeBrightness).hex()\n    : stroke;\n  const rangeLineColor = (rangeLines && rangeLines.props.color) || stroke;\n  const rangeLineColorShade = active\n    ? chroma(rangeLineColor).brighten(activeBrightness)\n    : rangeLineColor;\n  const index = groupIndex !== undefined ? groupIndex : barIndex;\n  const scale = isVertical ? yScale : xScale;\n  const barLabel = isVertical ? tooltipData.y : tooltipData.x;\n  const placement = layout === 'vertical' ? 'top' : 'right';\n\n  return (\n    <Fragment>\n      {renderGuideBar()}\n      {renderBar(currentColorShade, coords, index)}\n      {rangeLines && (\n        <CloneElement<RangeLinesProps>\n          element={rangeLines}\n          {...coords}\n          index={index}\n          data={data}\n          scale={scale}\n          color={rangeLineColorShade}\n          barCount={barCount}\n          animated={animated}\n          layout={layout}\n          type={type}\n        />\n      )}\n      {mask && (\n        <Fragment>\n          <Mask id={`mask-${id}`} fill={`url(#gradient-${id})`} />\n          <CloneElement<MaskProps>\n            element={mask}\n            id={`mask-pattern-${id}`}\n            fill={stroke}\n          />\n        </Fragment>\n      )}\n      {gradient && (\n        <CloneElement<GradientProps>\n          element={gradient}\n          id={`gradient-${id}`}\n          direction={layout}\n          color={currentColorShade}\n        />\n      )}\n      {label && (\n        <CloneElement<BarLabelProps>\n          element={label}\n          {...coords}\n          text={formatValue(barLabel)}\n          index={index}\n          data={data}\n          scale={scale}\n          fill={label.props.fill || currentColorShade}\n          barCount={barCount}\n          animated={animated}\n          layout={layout}\n          type={type}\n        />\n      )}\n      {tooltip && (\n        <CloneElement<ChartTooltipProps>\n          element={tooltip}\n          visible={!!isActive}\n          reference={rect}\n          color={color}\n          value={tooltipData}\n          placement={(tooltip.props as any).placement || placement}\n          data={data}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nBar.defaultProps = {\n  activeBrightness: 0.5,\n  rx: 0,\n  ry: 0,\n  cursor: 'auto',\n  rangeLines: null,\n  label: null,\n  tooltip: null,\n  layout: 'vertical',\n  guide: null,\n  gradient: <Gradient />,\n  onClick: () => undefined,\n  onMouseEnter: () => undefined,\n  onMouseLeave: () => undefined,\n  onMouseMove: () => undefined\n};\n","import React, {\n  Fragment,\n  ReactElement,\n  useMemo,\n  useRef,\n  FC,\n  useState,\n  useCallback\n} from 'react';\nimport { Bar, BarProps, BarType } from './Bar';\nimport {\n  ChartInternalDataShape,\n  ChartInternalNestedDataShape,\n  ChartInternalShallowDataShape,\n  Direction\n} from '../../common/data';\nimport { getColor, ColorSchemeType } from '../../common/color';\nimport { CloneElement } from 'rdk';\nimport {\n  TooltipAreaProps,\n  TooltipArea,\n  ChartTooltip,\n  TooltipAreaEvent\n} from '../../common/Tooltip';\n\ntype BarElement = ReactElement<BarProps, typeof Bar>;\n\nexport interface BarSeriesProps {\n  /**\n   * Parsed data shape. Set internally by `BarChart`.\n   */\n  data: ChartInternalDataShape[];\n\n  /**\n   * Id of the bar chart. Set internally by `BarChart`.\n   */\n  id: string;\n\n  /**\n   * D3 scale for X Axis. Set internally by `BarChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `BarChart`.\n   */\n  yScale: any;\n\n  /**\n   * D3 scale for X Multi-Group Axis. Set internally by `BarChart`.\n   */\n  xScale1: any;\n\n  /**\n   * Bar element.\n   */\n  bar: BarElement | BarElement[];\n\n  /**\n   * Type of the chart.\n   */\n  type: BarType;\n\n  /**\n   * Color scheme for the chart.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated: boolean;\n\n  /**\n   * Amount of padding between each bar.\n   */\n  padding: number;\n\n  /**\n   * Amount of padding between each group.\n   */\n  groupPadding: number;\n\n  /**\n   * Whether the chart is categorical or not. Set internally by `BarChart`.\n   */\n  isCategorical: boolean;\n\n  /**\n   * Direction of the chart\n   */\n  layout: Direction;\n\n  /**\n   * The size of each bin/bucket in the bar chart.\n   */\n  binSize?: number;\n\n  /**\n   * Height of the chart. Set internally by `BarChart`.\n   */\n  height: number;\n\n  /**\n   * Width of the chart. Set internally by `BarChart`.\n   */\n  width: number;\n\n  /**\n   * Tooltip for the chart area.\n   */\n  tooltip: ReactElement<TooltipAreaProps, typeof TooltipArea> | null;\n}\n\nexport const BarSeries: FC<Partial<BarSeriesProps>> = ({\n  data,\n  tooltip,\n  xScale,\n  yScale,\n  height,\n  width,\n  colorScheme,\n  xScale1,\n  bar,\n  padding,\n  animated,\n  isCategorical,\n  layout,\n  type,\n  id\n}) => {\n  const ref = useRef<TooltipArea | null>(null);\n  const [activeValues, setActiveValues] = useState<any | null>(null);\n  const isVertical = useMemo(() => layout === 'vertical', [layout]);\n\n  const isMultiSeries = useMemo(() => {\n    return (\n      type === 'grouped' ||\n      type === 'stacked' ||\n      type === 'marimekko' ||\n      type === 'stackedNormalized' ||\n      type === 'stackedDiverging'\n    );\n  }, [type]);\n\n  const getTransform = useCallback(\n    (data: ChartInternalNestedDataShape) => {\n      let xPos = 0;\n      let yPos = 0;\n      if (type !== 'marimekko') {\n        if (layout === 'vertical') {\n          const val = xScale(data.key);\n          xPos = val;\n        } else {\n          const val = yScale(data.key);\n          yPos = val;\n        }\n      }\n\n      return `translate(${xPos}, ${yPos})`;\n    },\n    [layout, type, xScale, yScale]\n  );\n\n  const getBarColor = useCallback(\n    (point, index: number) => {\n      let key = 'key';\n      if (isMultiSeries) {\n        if (layout === 'vertical') {\n          key = 'x';\n        } else {\n          key = 'y';\n        }\n      }\n\n      // histograms...\n      if (point[key] === undefined) {\n        key = 'x0';\n      }\n\n      return getColor({\n        colorScheme,\n        point,\n        index,\n        data,\n        isMultiSeries,\n        attribute: key\n      });\n    },\n    [colorScheme, data, isMultiSeries, layout]\n  );\n\n  const onMouseMove = useCallback((event) => {\n    // Manuallly call mouse move so we don't have to kill bar pointer events\n    ref.current?.onMouseMove(event);\n  }, []);\n\n  const onValueEnter = useCallback((event: TooltipAreaEvent) => {\n    setActiveValues(event.value);\n  }, []);\n\n  const onValueLeave = useCallback(() => {\n    setActiveValues(null);\n  }, []);\n\n  const renderBar = useCallback(\n    (\n      data: ChartInternalShallowDataShape,\n      barIndex: number,\n      barCount: number,\n      groupIndex?: number\n    ) => {\n      const active = activeValues && activeValues.x === data.key;\n\n      let newYScale = yScale;\n      let newXScale = xScale;\n\n      if (xScale1) {\n        if (isVertical) {\n          newXScale = xScale1;\n        } else {\n          newYScale = xScale1;\n        }\n      }\n\n      // Histograms dont have keys\n      let key = barIndex.toString();\n      if (data.key) {\n        key = `${data.key!.toString()}-${groupIndex}-${data.x}`;\n      }\n\n      let barElements = Array.isArray(bar) ? bar[barIndex] : bar;\n      if (!bar) {\n        barElements = <Bar />;\n      }\n\n      return (\n        <Fragment key={key}>\n          <CloneElement<BarProps>\n            element={barElements}\n            id={`${id}-bar-${groupIndex}-${barIndex}`}\n            animated={animated}\n            active={active}\n            xScale={newXScale}\n            xScale1={xScale1}\n            yScale={newYScale}\n            padding={padding}\n            barCount={barCount}\n            groupIndex={groupIndex}\n            barIndex={barIndex}\n            data={data}\n            isCategorical={isCategorical}\n            color={getBarColor}\n            layout={layout}\n            type={type}\n            onMouseMove={onMouseMove}\n          />\n        </Fragment>\n      );\n    },\n    [\n      activeValues,\n      animated,\n      bar,\n      getBarColor,\n      id,\n      isCategorical,\n      isVertical,\n      layout,\n      onMouseMove,\n      padding,\n      type,\n      xScale,\n      xScale1,\n      yScale\n    ]\n  );\n\n  const renderBarGroup = useCallback(\n    (\n      data: ChartInternalShallowDataShape[],\n      barCount: number,\n      groupIndex?: number\n    ) => {\n      return (\n        <Fragment>\n          {data.map((barData, barIndex) =>\n            renderBar(barData, barIndex, barCount, groupIndex)\n          )}\n        </Fragment>\n      );\n    },\n    [renderBar]\n  );\n\n  return (\n    <CloneElement<TooltipAreaProps>\n      element={tooltip}\n      childRef={ref}\n      xScale={xScale}\n      yScale={yScale}\n      data={data}\n      height={height}\n      width={width}\n      inverse={false}\n      isHorizontal={layout === 'horizontal'}\n      color={getBarColor}\n      onValueEnter={onValueEnter}\n      onValueLeave={onValueLeave}\n    >\n      {isMultiSeries &&\n        (data as ChartInternalNestedDataShape[]).map((groupData, index) => (\n          <g transform={getTransform(groupData)} key={`bar-group-${index}`}>\n            {renderBarGroup(\n              groupData.data as ChartInternalShallowDataShape[],\n              data.length,\n              index\n            )}\n          </g>\n        ))}\n      {!isMultiSeries &&\n        renderBarGroup(data as ChartInternalShallowDataShape[], data.length)}\n    </CloneElement>\n  );\n};\n\nBarSeries.defaultProps = {\n  type: 'standard',\n  padding: 0.1,\n  groupPadding: 16,\n  animated: true,\n  tooltip: (\n    <TooltipArea\n      tooltip={\n        <ChartTooltip\n          followCursor={true}\n          modifiers={{\n            offset: '5px, 5px'\n          }}\n        />\n      }\n    />\n  ),\n  colorScheme: 'cybertron',\n  bar: <Bar />,\n  layout: 'vertical'\n};\n","import React, { FC, useMemo } from 'react';\nimport { ChartInternalShallowDataShape, Direction } from '../../common/data';\nimport { motion } from 'framer-motion';\nimport { DEFAULT_TRANSITION } from '../../common/Motion';\nimport { BarType } from './Bar';\n\nexport interface RangeLinesProps {\n  /**\n   * Height of the bar.\n   */\n  height: number;\n\n  /**\n   * Width of the bar.\n   */\n  width: number;\n\n  /**\n   * SVG x attribute for the bar.\n   */\n  x: number;\n\n  /**\n   * SVG y attribute for the bar.\n   */\n  y: number;\n\n  /**\n   * Group index or index of the bar. Set internally by `BarSeries`.\n   */\n  index: number;\n\n  /**\n   * Stroke width of the range line.\n   */\n  strokeWidth: number;\n\n  /**\n   * D3 scale for Axis. Set internally by `BarChart`.\n   */\n  scale: any;\n\n  /**\n   * Position of the range line.\n   */\n  position: 'top' | 'bottom';\n\n  /**\n   * Parsed data shape. Set internally by `BarChart`.\n   */\n  data: ChartInternalShallowDataShape;\n\n  /**\n   * Color for the range line.\n   */\n  color: string;\n\n  /**\n   * Total number of bars used for animation. Set internally by `BarSeries`.\n   */\n  barCount: number;\n\n  /**\n   * Direction of the chart. Set internally by `BarSeries`.\n   */\n  layout: Direction;\n\n  /**\n   * Whether to animate the enter/update/exit. Set internally by `BarSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * Type of bar chart. Set internally by `BarSeries`.\n   */\n  type: BarType;\n}\n\nexport const RangeLines: FC<Partial<RangeLinesProps>> = ({\n  layout,\n  color,\n  x,\n  y,\n  scale,\n  type,\n  height,\n  position,\n  strokeWidth,\n  width,\n  animated,\n  index,\n  barCount,\n  data\n}) => {\n  const isVertical = useMemo(() => layout === 'vertical', [layout]);\n  const rangeLineHeight = useMemo(\n    () => Math.min(strokeWidth, isVertical ? height : width),\n    [height, isVertical, strokeWidth, width]\n  );\n\n  const [newWidth, newHeight] = useMemo(\n    () => [\n      isVertical ? width : rangeLineHeight,\n      isVertical ? rangeLineHeight : height\n    ],\n    [height, isVertical, rangeLineHeight, width]\n  );\n\n  const enterProps = useMemo(() => {\n    let newY = y;\n    let newX = x;\n\n    // If its diverging and the value is negative, we\n    // need to reverse the type...\n    const isTop = position === 'top';\n    const direction = isVertical\n      ? (data.y as number) < 0 && isTop\n        ? 'bottom'\n        : position\n      : (data.x0 as number) < 0 && isTop\n        ? 'bottom'\n        : position;\n\n    if (isVertical) {\n      if (direction === 'top') {\n        newY = y;\n      } else {\n        newY = y + height - rangeLineHeight;\n      }\n    } else {\n      if (direction === 'top') {\n        newX = x + width - rangeLineHeight;\n      } else {\n        newX = x;\n      }\n    }\n\n    return {\n      x: newX,\n      y: newY,\n      opacity: 1\n    };\n  }, [\n    data.x0,\n    data.y,\n    height,\n    isVertical,\n    position,\n    rangeLineHeight,\n    width,\n    x,\n    y\n  ]);\n\n  const exitProps = useMemo(() => {\n    let newY = y;\n    let newX = x;\n\n    if (isVertical) {\n      const maxY = Math.max(...scale.range());\n      if (position === 'top') {\n        newY = maxY;\n      } else {\n        newY = maxY + height - rangeLineHeight;\n      }\n    } else {\n      const minX = Math.min(...scale.range());\n      if (position === 'top') {\n        newX = minX;\n      } else {\n        newX = minX + width - rangeLineHeight;\n      }\n    }\n\n    if (type === 'stackedDiverging') {\n      if (isVertical) {\n        newY = newY / 2;\n      } else {\n        newX = newX / 2;\n      }\n    }\n\n    return {\n      y: newY,\n      x: newX,\n      opacity: 0\n    };\n  }, [height, isVertical, position, rangeLineHeight, scale, type, width, x, y]);\n\n  const delay = useMemo(() => {\n    let delay = 0;\n    if (animated) {\n      if (layout === 'vertical') {\n        return (index / barCount) * 0.5;\n      } else {\n        return ((barCount - index) / barCount) * 0.5;\n      }\n    }\n\n    return delay;\n  }, [animated, barCount, index, layout]);\n\n  // UGH: https://github.com/framer/motion/issues/384\n  const initial = useMemo(() => {\n    const r = {\n      ...exitProps,\n      attrX: exitProps.x,\n      attrY: exitProps.y\n    };\n\n    delete r.x;\n    delete r.y;\n\n    return r;\n  }, [exitProps]);\n\n  const animate = useMemo(() => {\n    const r = {\n      ...enterProps,\n      attrX: enterProps.x,\n      attrY: enterProps.y\n    };\n\n    delete r.x;\n    delete r.y;\n\n    return r;\n  }, [enterProps]);\n\n  return (\n    <motion.rect\n      pointerEvents=\"none\"\n      fill={color}\n      width={newWidth}\n      height={newHeight}\n      initial={initial}\n      animate={animate}\n      exit={initial}\n      transition={{\n        ...DEFAULT_TRANSITION,\n        delay\n      }}\n    />\n  );\n};\n\nRangeLines.defaultProps = {\n  position: 'top',\n  strokeWidth: 1,\n  layout: 'vertical'\n};\n","import React, { FC } from 'react';\nimport { BarSeriesProps, BarSeries } from './BarSeries';\nimport { Bar } from './Bar';\nimport { RangeLines } from './RangeLines';\nimport { Gradient, GradientStop } from '../../common';\n\nexport const StackedBarSeries: FC<Partial<BarSeriesProps>> = (props) => (\n  <BarSeries type=\"stackedNormalized\" {...props} />\n);\n\nStackedBarSeries.defaultProps = {\n  ...BarSeries.defaultProps,\n  type: 'stacked',\n  bar: (\n    <Bar\n      gradient={\n        <Gradient\n          stops={[\n            <GradientStop offset=\"5%\" stopOpacity={0.1} key=\"start\" />,\n            <GradientStop offset=\"90%\" stopOpacity={0.7} key=\"stop\" />\n          ]}\n        />\n      }\n      rangeLines={<RangeLines position=\"top\" strokeWidth={3} />}\n    />\n  )\n};\n","import React, { Component, FC } from 'react';\nimport { BarSeriesProps, BarSeries } from './BarSeries';\nimport { Bar } from './Bar';\nimport { RangeLines } from './RangeLines';\nimport {\n  ChartTooltip,\n  TooltipTemplate,\n  TooltipArea\n} from '../../common/Tooltip';\nimport { formatValue } from '../../common/utils/formatting';\nimport { Gradient, GradientStop } from '../../common/Gradient';\n\nexport const StackedNormalizedBarSeries: FC<Partial<BarSeriesProps>> = (\n  props\n) => <BarSeries type=\"stackedNormalized\" {...props} />;\n\nStackedNormalizedBarSeries.defaultProps = {\n  ...BarSeries.defaultProps,\n  type: 'stackedNormalized',\n  tooltip: (\n    <TooltipArea\n      tooltip={\n        <ChartTooltip\n          followCursor={true}\n          modifiers={{\n            offset: '5px, 5px'\n          }}\n          content={(point, color) => {\n            point.data = point.data.map((d) => {\n              // Handle horz case\n              const start = isNaN(d.y0) ? d.x0 : d.y0;\n              const end = isNaN(d.y1) ? d.x1 : d.y1;\n\n              return {\n                ...d,\n                value: `${formatValue(Math.floor((end - start) * 100))}%`\n              };\n            });\n\n            return <TooltipTemplate value={point} color={color} />;\n          }}\n        />\n      }\n    />\n  ),\n  bar: (\n    <Bar\n      gradient={\n        <Gradient\n          stops={[\n            <GradientStop offset=\"5%\" stopOpacity={0.1} key=\"start\" />,\n            <GradientStop offset=\"90%\" stopOpacity={0.7} key=\"stop\" />\n          ]}\n        />\n      }\n      rangeLines={<RangeLines position=\"top\" strokeWidth={3} />}\n    />\n  )\n};\n","import React, { FC } from 'react';\nimport { BarSeriesProps, BarSeries } from './BarSeries';\nimport { Bar } from './Bar';\nimport { RangeLines } from './RangeLines';\nimport {\n  ChartTooltip,\n  TooltipTemplate,\n  TooltipArea\n} from '../../common/Tooltip';\nimport { formatValue } from '../../common/utils/formatting';\nimport { Gradient, GradientStop } from '../../common/Gradient';\n\nexport const MarimekkoBarSeries: FC<Partial<BarSeriesProps>> = (props) => (\n  <BarSeries type=\"marimekko\" {...props} />\n);\n\nMarimekkoBarSeries.defaultProps = {\n  ...BarSeries.defaultProps,\n  type: 'marimekko',\n  padding: 10,\n  tooltip: (\n    <TooltipArea\n      tooltip={\n        <ChartTooltip\n          followCursor={true}\n          modifiers={{\n            offset: '5px, 5px'\n          }}\n          content={(point, color) => {\n            const data = {\n              ...point,\n              data: point.data.map((d) => ({\n                ...d,\n                value: `${formatValue(d.value)}  ${formatValue(\n                  Math.floor((d.y1 - d.y0) * 100)\n                )}%`\n              }))\n            };\n\n            return <TooltipTemplate value={data} color={color} />;\n          }}\n        />\n      }\n    />\n  ),\n  bar: (\n    <Bar\n      padding={10}\n      gradient={\n        <Gradient\n          stops={[\n            <GradientStop offset=\"5%\" stopOpacity={0.1} key=\"start\" />,\n            <GradientStop offset=\"90%\" stopOpacity={0.7} key=\"stop\" />\n          ]}\n        />\n      }\n      rangeLines={<RangeLines position=\"top\" strokeWidth={3} />}\n    />\n  )\n};\n","import React, { FC, useMemo } from 'react';\nimport { ChartInternalShallowDataShape, Direction } from '../../common/data';\nimport { BarType } from './Bar';\nimport { motion } from 'framer-motion';\nimport { DEFAULT_TRANSITION } from '../../common/Motion';\n\nexport interface BarLabelProps {\n  /**\n   * Text of the label. Set internally by `Bar`.\n   */\n  text: string;\n\n  /**\n   * Height of the bar.\n   */\n  height: number;\n\n  /**\n   * Width of the bar.\n   */\n  width: number;\n\n  /**\n   * SVG x attribute for the bar.\n   */\n  x: number;\n\n  /**\n   * SVG y attribute for the bar.\n   */\n  y: number;\n\n  /**\n   * Group index or index of the bar. Set internally by `BarSeries`.\n   */\n  index: number;\n\n  /**\n   * D3 scale for Axis. Set internally by `BarChart`.\n   */\n  scale: any;\n\n  /**\n   * Position of the label.\n   */\n  position: 'top' | 'center' | 'bottom';\n\n  /**\n   * Parsed data shape. Set internally by `BarChart`.\n   */\n  data: ChartInternalShallowDataShape;\n\n  /**\n   * Color of the text.\n   */\n  fill: string;\n\n  /**\n   * Number of the bars in the bar group. Set internally by `BarSeries`.\n   */\n  barCount: number;\n\n  /**\n   * Layout of bar chart to render. Set internally by `BarSeries`.\n   */\n  layout: Direction;\n\n  /**\n   * Whether to animate the enter/update/exit. Set internally by `BarSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * Type of bar chart to render. Set internally by `BarSeries`.\n   */\n  type: BarType;\n\n  /**\n   * Font size of the text.\n   */\n  fontSize: number;\n\n  /**\n   * Font family of the text.\n   */\n  fontFamily: string;\n\n  /**\n   * Padding of the label.\n   */\n  padding: number;\n\n  /**\n   * Class name to apply to the text.\n   */\n  className?: any;\n}\n\nexport const BarLabel: FC<Partial<BarLabelProps>> = ({\n  fontSize,\n  fontFamily,\n  fill,\n  layout,\n  className,\n  text,\n  x,\n  y,\n  height,\n  position,\n  width,\n  data,\n  padding,\n  scale,\n  type,\n  animated,\n  index,\n  barCount\n}) => {\n  const isVertical = useMemo(() => layout === 'vertical', [layout]);\n  const textAnchor = isVertical ? 'middle' : 'start';\n\n  const enterProps = useMemo(() => {\n    let newY = y;\n    let newX = x;\n\n    // If its diverging and the value is negative, we\n    // need to reverse the type...\n    const isTop = position === 'top';\n    const direction = isVertical\n      ? (data.y as number) < 0 && isTop\n        ? 'bottom'\n        : position\n      : (data.x0 as number) < 0 && isTop\n        ? 'bottom'\n        : position;\n\n    if (isVertical) {\n      if (direction === 'top') {\n        newY = y - padding;\n      } else if (direction === 'center') {\n        newY = y + height / 2;\n      } else if (direction === 'bottom') {\n        newY = y + height - padding;\n      }\n      newX = newX + width / 2;\n    } else {\n      if (direction === 'top') {\n        newX = x + width + padding;\n      } else if (direction === 'center') {\n        newX = x + width / 2;\n      } else if (direction === 'bottom') {\n        newX = x + padding;\n      }\n      newY = newY + height / 2;\n    }\n\n    return {\n      translateX: newX,\n      translateY: newY,\n      opacity: 1\n    };\n  }, [data.x0, data.y, height, isVertical, padding, position, width, x, y]);\n\n  const exitProps = useMemo(() => {\n    let newY = y;\n    let newX = x;\n\n    if (isVertical) {\n      const maxY = Math.max(...scale.range());\n      if (position === 'top') {\n        newY = maxY;\n      } else {\n        newY = maxY + height + padding;\n      }\n\n      newX = newX + width / 2;\n    } else {\n      const minX = Math.min(...scale.range());\n      if (position === 'top') {\n        newX = minX;\n      } else {\n        newX = minX + width + padding;\n      }\n\n      newY = newY + height / 2;\n    }\n\n    if (type === 'stackedDiverging') {\n      if (isVertical) {\n        newY = newY / 2;\n      } else {\n        newX = newX / 2;\n      }\n    }\n\n    return {\n      translateY: newY,\n      translateX: newX,\n      opacity: 0\n    };\n  }, [height, isVertical, padding, position, scale, type, width, x, y]);\n\n  const delay = useMemo(() => {\n    let delay = 0;\n    if (animated) {\n      if (layout === 'vertical') {\n        return (index / barCount) * 0.5;\n      } else {\n        return ((barCount - index) / barCount) * 0.5;\n      }\n    }\n\n    return delay;\n  }, [animated, barCount, index, layout]);\n\n  return (\n    <motion.g\n      initial={exitProps}\n      animate={enterProps}\n      exit={exitProps}\n      transition={{\n        ...DEFAULT_TRANSITION,\n        delay\n      }}\n      fontSize={fontSize}\n      fontFamily={fontFamily}\n    >\n      <text fill={fill} className={className} textAnchor={textAnchor}>\n        {text}\n      </text>\n    </motion.g>\n  );\n};\n\nBarLabel.defaultProps = {\n  position: 'top',\n  layout: 'vertical',\n  fontSize: 13,\n  padding: 5,\n  fontFamily: 'sans-serif',\n  fill: '#000'\n};\n","import React, { Component, FC } from 'react';\nimport { BarSeriesProps, BarSeries } from './BarSeries';\nimport {\n  ChartTooltip,\n  TooltipTemplate,\n  TooltipArea\n} from '../../common/Tooltip';\nimport { formatValue } from '../../common/utils/formatting';\nimport { schemes } from '../../common/color';\n\nexport const HistogramBarSeries: FC<Partial<BarSeriesProps>> = ({\n  type,\n  ...rest\n}) => <BarSeries {...rest} />;\n\nHistogramBarSeries.defaultProps = {\n  ...BarSeries.defaultProps,\n  colorScheme: schemes.cybertron[0],\n  tooltip: (\n    <TooltipArea\n      tooltip={\n        <ChartTooltip\n          followCursor={true}\n          modifiers={{\n            offset: '5px, 5px'\n          }}\n          content={(point, color) => {\n            const data = {\n              ...point,\n              x: `${formatValue(point.x0)} - ${formatValue(point.x1)}`,\n              value: point.y\n            };\n\n            return <TooltipTemplate value={data} color={color} />;\n          }}\n        />\n      }\n    />\n  )\n};\n","import React, { FC } from 'react';\nimport { motion } from 'framer-motion';\n\nexport interface GuideBarProps extends SVGRect {\n  active: boolean;\n  fill?: string;\n  opacity?: number;\n}\n\nexport const GuideBar: FC<Partial<GuideBarProps>> = ({\n  active,\n  opacity = 0.15,\n  ...rest\n}) => {\n  const { x, y, ...other } = rest;\n\n  return (\n    <motion.rect\n      {...other}\n      pointerEvents=\"none\"\n      initial=\"hidden\"\n      animate={active ? 'visible' : 'hidden'}\n      variants={{\n        hidden: { opacity: 0, attrX: x, attrY: y },\n        visible: { opacity, attrX: x, attrY: y }\n      }}\n    />\n  );\n};\n\nGuideBar.defaultProps = {\n  fill: '#eee',\n  opacity: 0.15\n};\n","import React, {\n  Fragment,\n  Component,\n  ReactElement,\n  FC,\n  useMemo,\n  useCallback\n} from 'react';\nimport classNames from 'classnames';\nimport {\n  isAxisVisible,\n  LinearAxisProps,\n  LinearXAxisTickSeries,\n  LinearXAxis,\n  LinearYAxis,\n  LinearAxis\n} from '../common/Axis';\nimport { BarSeries, BarSeriesProps } from './BarSeries';\nimport {\n  ChartDataShape,\n  ChartNestedDataShape,\n  buildBarStackData,\n  buildMarimekkoData,\n  buildWaterfall,\n  ChartShallowDataShape,\n  buildNestedChartData,\n  buildShallowChartData,\n  StackTypes\n} from '../common/data';\nimport { GridlineSeries, GridlineSeriesProps } from '../common/Gridline';\nimport {\n  getXScale,\n  getYScale,\n  getGroupScale,\n  getInnerScale,\n  getMarimekkoScale,\n  getMarimekkoGroupScale\n} from '../common/scales';\nimport { ChartBrushProps, ChartBrush } from '../common/Brush';\nimport css from './BarChart.module.css';\nimport {\n  ChartContainer,\n  ChartContainerChildProps,\n  ChartProps\n} from '../common/containers/ChartContainer';\nimport { CloneElement } from 'rdk';\n\nexport interface BarChartProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartDataShape[];\n\n  /**\n   * The series component that renders the bar components.\n   */\n  series: ReactElement<BarSeriesProps, typeof BarSeries>;\n\n  /**\n   * The linear axis component for the Y Axis of the chart.\n   */\n  yAxis: ReactElement<LinearAxisProps, typeof LinearAxis>;\n\n  /**\n   * The linear axis component for the X Axis of the chart.\n   */\n  xAxis: ReactElement<LinearAxisProps, typeof LinearAxis>;\n\n  /**\n   * The chart's background gridlines component.\n   */\n  gridlines: ReactElement<GridlineSeriesProps, typeof GridlineSeries> | null;\n\n  /**\n   * The chart's brush component.\n   */\n  brush: ReactElement<ChartBrushProps, typeof ChartBrush> | null;\n\n  /**\n   * Any secondary axis components. Useful for multi-axis charts.\n   */\n  secondaryAxis?: ReactElement<LinearAxisProps, typeof LinearAxis>[];\n}\n\nexport const BarChart: FC<Partial<BarChartProps>> = ({\n  id,\n  width,\n  height,\n  margins,\n  className,\n  data,\n  xAxis,\n  yAxis,\n  series,\n  brush,\n  gridlines,\n  secondaryAxis,\n  containerClassName\n}) => {\n  const isVertical = useMemo(\n    () => series.props.layout === 'vertical',\n    [series]\n  );\n  const keyAxis = useMemo(\n    () => (isVertical ? xAxis : yAxis),\n    [yAxis, xAxis, isVertical]\n  );\n  const isDiverging = useMemo(\n    () => series.props.type === 'stackedDiverging',\n    [series.props.type]\n  );\n\n  const getMarimekkoGroupScales = useCallback(\n    (aggregatedData, axis, width: number) => {\n      const keyScale = getMarimekkoScale(width, axis.props.roundDomains);\n\n      const groupScale = getMarimekkoGroupScale({\n        width,\n        padding: series.props.padding,\n        data: aggregatedData,\n        valueScale: keyScale\n      });\n\n      return {\n        keyScale,\n        groupScale\n      };\n    },\n    [series.props.padding]\n  );\n\n  const getMultiGroupScales = useCallback(\n    (aggregatedData, height: number, width: number) => {\n      const { groupPadding, layout } = series.props;\n\n      const groupScale = getGroupScale({\n        dimension: isVertical ? width : height,\n        direction: layout,\n        padding: groupPadding,\n        data: aggregatedData\n      });\n\n      const keyScale = getInnerScale({\n        groupScale: groupScale,\n        padding: series.props.padding,\n        data: aggregatedData,\n        prop: isVertical ? 'x' : 'y'\n      });\n\n      return {\n        groupScale,\n        keyScale\n      };\n    },\n    [isVertical, series.props]\n  );\n\n  const getKeyScale = useCallback(\n    (aggregatedData, axis, isMultiSeries: boolean, width: number) => {\n      return getXScale({\n        width,\n        type: axis.props.type,\n        roundDomains: axis.props.roundDomains,\n        data: aggregatedData,\n        padding: series.props.padding,\n        domain: axis.props.domain,\n        isMultiSeries,\n        isDiverging\n      });\n    },\n    [isDiverging, series]\n  );\n\n  const getValueScale = useCallback(\n    (aggregatedData, axis, isMultiSeries: boolean, height: number) => {\n      return getYScale({\n        roundDomains: axis.props.roundDomains,\n        padding: series.props.padding,\n        type: axis.props.type,\n        height,\n        data: aggregatedData,\n        domain: axis.props.domain,\n        isMultiSeries,\n        isDiverging\n      });\n    },\n    [isDiverging, series]\n  );\n\n  const getScalesAndData = useCallback(\n    (chartHeight: number, chartWidth: number) => {\n      const { type, layout } = series.props;\n      const isMarimekko = type === 'marimekko';\n      const isGrouped = type === 'grouped';\n      const isStacked =\n        type === 'stacked' ||\n        type === 'stackedNormalized' ||\n        type === 'stackedDiverging';\n      const isMultiSeries = isGrouped || isStacked;\n\n      let aggregatedData;\n      if (isStacked) {\n        let distroType: StackTypes = 'default';\n        if (type === 'stackedNormalized') {\n          distroType = 'expand';\n        } else if (type === 'stackedDiverging') {\n          distroType = 'diverging';\n        }\n\n        aggregatedData = buildBarStackData(\n          data as ChartNestedDataShape[],\n          distroType,\n          layout\n        );\n      } else if (type === 'waterfall') {\n        aggregatedData = buildWaterfall(\n          data as ChartShallowDataShape[],\n          layout,\n          series.props.binSize\n        );\n      } else if (isMarimekko) {\n        aggregatedData = buildMarimekkoData(data as ChartNestedDataShape[]);\n      } else if (isGrouped) {\n        aggregatedData = buildNestedChartData(\n          data as ChartNestedDataShape[],\n          false,\n          layout\n        );\n      } else {\n        aggregatedData = buildShallowChartData(\n          data as ChartShallowDataShape[],\n          layout,\n          series.props.binSize\n        );\n      }\n\n      let yScale;\n      let xScale;\n      let xScale1;\n\n      if (isVertical) {\n        if (isGrouped) {\n          const { keyScale, groupScale } = getMultiGroupScales(\n            aggregatedData,\n            chartHeight,\n            chartWidth\n          );\n          xScale = groupScale;\n          xScale1 = keyScale;\n        } else if (isMarimekko) {\n          const { keyScale, groupScale } = getMarimekkoGroupScales(\n            aggregatedData,\n            xAxis,\n            chartWidth\n          );\n          xScale = groupScale;\n          xScale1 = keyScale;\n        } else {\n          xScale = getKeyScale(\n            aggregatedData,\n            xAxis,\n            isMultiSeries,\n            chartWidth\n          );\n        }\n\n        yScale = getValueScale(\n          aggregatedData,\n          yAxis,\n          isMultiSeries,\n          chartHeight\n        );\n      } else {\n        if (isGrouped) {\n          const { keyScale, groupScale } = getMultiGroupScales(\n            aggregatedData,\n            chartHeight,\n            chartWidth\n          );\n          yScale = groupScale;\n          xScale1 = keyScale;\n          xScale = getKeyScale(\n            aggregatedData,\n            xAxis,\n            isMultiSeries,\n            chartWidth\n          );\n        } else if (isMarimekko) {\n          throw new Error(\n            'Marimekko is currently not supported for horizontal layouts'\n          );\n        } else {\n          xScale = getKeyScale(\n            aggregatedData,\n            xAxis,\n            isMultiSeries,\n            chartWidth\n          );\n          yScale = getValueScale(\n            aggregatedData,\n            yAxis,\n            isMultiSeries,\n            chartHeight\n          );\n        }\n      }\n\n      return { xScale, xScale1, yScale, aggregatedData };\n    },\n    [\n      getKeyScale,\n      data,\n      getMarimekkoGroupScales,\n      getMultiGroupScales,\n      getValueScale,\n      isVertical,\n      series.props,\n      xAxis,\n      yAxis\n    ]\n  );\n\n  const renderChart = useCallback(\n    (containerProps: ChartContainerChildProps) => {\n      const { chartHeight, chartWidth, id, updateAxes, chartSized } =\n        containerProps;\n      const { xScale, xScale1, yScale, aggregatedData } = getScalesAndData(\n        chartHeight,\n        chartWidth\n      );\n\n      const isCategorical = keyAxis.props.type === 'category';\n      const disableBrush = aggregatedData.length <= 1;\n\n      return (\n        <Fragment>\n          {chartSized && gridlines && (\n            <CloneElement<GridlineSeriesProps>\n              element={gridlines}\n              height={chartHeight}\n              width={chartWidth}\n              yScale={yScale}\n              xScale={xScale}\n              yAxis={yAxis.props}\n              xAxis={xAxis.props}\n            />\n          )}\n          <CloneElement<LinearAxisProps>\n            element={xAxis}\n            height={chartHeight}\n            width={chartWidth}\n            scale={xScale}\n            onDimensionsChange={(event) =>\n              updateAxes(isVertical ? 'horizontal' : 'vertical', event)\n            }\n          />\n          <CloneElement<LinearAxisProps>\n            element={yAxis}\n            height={chartHeight}\n            width={chartWidth}\n            scale={yScale}\n            onDimensionsChange={(event) =>\n              updateAxes(isVertical ? 'vertical' : 'horizontal', event)\n            }\n          />\n          {secondaryAxis &&\n            secondaryAxis.map((axis, i) => (\n              <CloneElement<LinearAxisProps>\n                key={i}\n                element={axis}\n                height={chartHeight}\n                width={chartWidth}\n                onDimensionsChange={(event) => updateAxes('horizontal', event)}\n              />\n            ))}\n          {chartSized && (\n            <CloneElement<ChartBrushProps>\n              disabled={disableBrush}\n              element={brush}\n              height={chartHeight}\n              width={chartWidth}\n              scale={xScale}\n            >\n              <CloneElement<BarSeriesProps>\n                element={series}\n                id={`bar-series-${id}`}\n                data={aggregatedData}\n                height={chartHeight}\n                width={chartWidth}\n                isCategorical={isCategorical}\n                xScale={xScale}\n                xScale1={xScale1}\n                yScale={yScale}\n              />\n            </CloneElement>\n          )}\n        </Fragment>\n      );\n    },\n    [\n      brush,\n      getScalesAndData,\n      gridlines,\n      isVertical,\n      keyAxis,\n      secondaryAxis,\n      series,\n      xAxis,\n      yAxis\n    ]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      containerClassName={containerClassName}\n      xAxisVisible={isAxisVisible(xAxis.props)}\n      yAxisVisible={isAxisVisible(yAxis.props)}\n      className={classNames(css.barChart, className, css[series.props.type])}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n\nBarChart.defaultProps = {\n  data: [],\n  xAxis: (\n    <LinearXAxis\n      type=\"category\"\n      tickSeries={<LinearXAxisTickSeries tickSize={20} />}\n    />\n  ),\n  yAxis: <LinearYAxis type=\"value\" />,\n  series: <BarSeries />,\n  gridlines: <GridlineSeries />,\n  brush: null\n};\n","import React, { FC } from 'react';\nimport { BarChart, BarChartProps } from './BarChart';\nimport { ChartNestedDataShape } from '../common/data';\nimport { MarimekkoBarSeries } from './BarSeries';\nimport {\n  LinearXAxis,\n  LinearXAxisTickSeries,\n  LinearYAxis,\n  LinearYAxisTickSeries,\n  LinearYAxisTickLabel\n} from '../common/Axis/LinearAxis';\n\nexport interface MarimekkoChartProps extends BarChartProps {\n  data: ChartNestedDataShape[];\n}\n\nexport const MarimekkoChart: FC<Partial<MarimekkoChartProps>> = (props) => (\n  <BarChart {...props} />\n);\n\nMarimekkoChart.defaultProps = {\n  series: <MarimekkoBarSeries />,\n  xAxis: (\n    <LinearXAxis\n      type=\"category\"\n      tickSeries={<LinearXAxisTickSeries tickSize={15} />}\n    />\n  ),\n  yAxis: (\n    <LinearYAxis\n      type=\"value\"\n      tickSeries={\n        <LinearYAxisTickSeries\n          label={\n            <LinearYAxisTickLabel\n              rotation={false}\n              format={(data) => `${data * 100}%`}\n            />\n          }\n        />\n      }\n    />\n  )\n};\n","import React, { FC } from 'react';\nimport { BarChart, BarChartProps } from './BarChart';\nimport { ChartNestedDataShape } from '../common/data';\nimport { StackedBarSeries } from './BarSeries';\n\nexport interface StackedBarChartProps extends BarChartProps {\n  data: ChartNestedDataShape[];\n}\n\nexport const StackedBarChart: FC<Partial<StackedBarChartProps>> = (props) => (\n  <BarChart {...props} />\n);\n\nStackedBarChart.defaultProps = {\n  series: <StackedBarSeries />\n};\n","import React, { FC } from 'react';\nimport { ChartNestedDataShape } from '../common/data';\nimport { BarChartProps, BarChart } from './BarChart';\nimport { StackedNormalizedBarSeries } from './BarSeries';\nimport {\n  LinearYAxis,\n  LinearYAxisTickSeries,\n  LinearYAxisTickLabel\n} from '../common/Axis/LinearAxis';\n\nexport interface StackedNormalizedBarChartProps extends BarChartProps {\n  data: ChartNestedDataShape[];\n}\n\nexport const StackedNormalizedBarChart: FC<\n  Partial<StackedNormalizedBarChartProps>\n> = (props) => <BarChart {...props} />;\n\nStackedNormalizedBarChart.defaultProps = {\n  series: <StackedNormalizedBarSeries />,\n  yAxis: (\n    <LinearYAxis\n      type=\"value\"\n      tickSeries={\n        <LinearYAxisTickSeries\n          label={\n            <LinearYAxisTickLabel\n              rotation={false}\n              format={(data) => `${data * 100}%`}\n            />\n          }\n        />\n      }\n    />\n  )\n};\n","import React, { FC } from 'react';\nimport { ChartShallowDataShape } from '../common/data';\nimport { BarChartProps, BarChart } from './BarChart';\nimport { HistogramBarSeries } from './BarSeries';\n\nexport interface HistogramBarChartProps extends BarChartProps {\n  data: ChartShallowDataShape[];\n}\n\nexport const HistogramBarChart: FC<Partial<HistogramBarChartProps>> = (\n  props\n) => <BarChart {...props} />;\n\nHistogramBarChart.defaultProps = {\n  series: <HistogramBarSeries />\n};\n","import React, { FC } from 'react';\nimport { AreaSeries, Line, AreaSeriesProps } from '../AreaChart';\n\nexport type LineSeriesProps = AreaSeriesProps;\n\nexport const LineSeries: FC<Partial<LineSeriesProps>> = (props) => (\n  <AreaSeries {...props} />\n);\n\nLineSeries.defaultProps = {\n  ...AreaSeries.defaultProps,\n  area: null,\n  line: <Line strokeWidth={3} />\n};\n","import React, { FC } from 'react';\nimport { AreaChart, AreaChartProps } from '../AreaChart';\nimport { LineSeries } from './LineSeries';\n\nexport type LineChartProps = AreaChartProps;\n\nexport const LineChart: FC<Partial<LineChartProps>> = (props) => (\n  <AreaChart {...props} />\n);\n\nLineChart.defaultProps = {\n  ...AreaChart.defaultProps,\n  series: <LineSeries />\n};\n","import React, { Fragment, ReactElement, FC, useCallback } from 'react';\nimport {\n  geoNaturalEarth1,\n  geoPath,\n  GeoProjection,\n  GeoPath,\n  geoMercator\n} from 'd3-geo';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '../common/containers/ChartContainer';\nimport { CloneElement } from 'rdk';\nimport { MapMarkerProps, MapMarker } from './MapMarker';\nimport { motion } from 'framer-motion';\n\ntype MarkerElement = ReactElement<MapMarkerProps, typeof MapMarker>;\n\ninterface MapProps extends ChartProps {\n  markers?: MarkerElement[];\n  data: any;\n  fill?: string;\n  /**\n   * Determines how the map transforms spherical geometry to planar geometry\n   */\n  projection?: 'mercator' | 'natural-earth';\n}\n\nexport const Map: FC<MapProps> = ({\n  id,\n  width,\n  height,\n  margins,\n  className,\n  containerClassName,\n  markers,\n  data,\n  fill,\n  projection = 'mercator'\n}) => {\n  const getProjection = useCallback(\n    ({ chartWidth, chartHeight }: ChartContainerChildProps) => {\n      if (projection === 'natural-earth') {\n        return geoNaturalEarth1()\n          .fitSize([chartWidth, chartHeight], data)\n          .center([0, 0]);\n      }\n      return geoMercator()\n        .fitSize([chartWidth, chartHeight], data)\n        .center([0, 35]);\n    },\n    [data, projection]\n  );\n\n  const renderMarker = useCallback(\n    (marker: MarkerElement, index: number, projection: GeoProjection) => {\n      const position = projection(marker.props.coordinates);\n\n      if (!position) {\n        console.warn(\n          `Position for ${marker.props.coordinates.toString()} not found.`\n        );\n        return null;\n      }\n\n      return (\n        <CloneElement<MapMarkerProps>\n          element={marker}\n          cx={position[0]}\n          cy={position[1]}\n          index={index}\n        />\n      );\n    },\n    []\n  );\n\n  const renderCountry = useCallback(\n    (point, index: number, path: GeoPath) => {\n      // Exclude ATA\n      if (point.id === '010') {\n        return null;\n      }\n\n      return <path key={`path-${index}`} d={path(point)!} fill={fill} />;\n    },\n    [fill]\n  );\n\n  const renderChart = useCallback(\n    (containerProps: ChartContainerChildProps) => {\n      if (!data) {\n        return null;\n      }\n\n      const geoProjection = getProjection(containerProps);\n      const path = geoPath().projection(geoProjection);\n\n      return (\n        <motion.g\n          initial={{\n            opacity: 0\n          }}\n          animate={{\n            opacity: 1\n          }}\n        >\n          {data.features.map((point, index) =>\n            renderCountry(point, index, path)\n          )}\n          {markers &&\n            markers.map((marker, index) => (\n              <Fragment key={`marker-${index}`}>\n                {renderMarker(marker, index, geoProjection)}\n              </Fragment>\n            ))}\n        </motion.g>\n      );\n    },\n    [data, getProjection, markers, renderCountry, renderMarker]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      containerClassName={containerClassName}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      className={className}\n    >\n      {(props) => renderChart(props)}\n    </ChartContainer>\n  );\n};\n\nMap.defaultProps = {\n  fill: 'rgba(255, 255, 255, 0.3)'\n};\n","import React, { Fragment, useRef, useState, FC } from 'react';\nimport { Tooltip } from 'reablocks';\nimport { motion } from 'framer-motion';\nimport css from './MapMarker.module.css';\n\nexport interface MapMarkerProps {\n  coordinates: [number, number];\n  index: number;\n  cy?: number;\n  cx?: number;\n  size?: number;\n  tooltip?: any;\n  onClick?: () => void;\n}\n\n// Set padding modifier for the tooltips\nconst modifiers = {\n  offset: {\n    offset: '0, 3px'\n  }\n};\n\nexport const MapMarker: FC<Partial<MapMarkerProps>> = ({\n  size = 3,\n  index,\n  tooltip,\n  cx,\n  cy,\n  onClick = () => undefined\n}) => {\n  const ref = useRef<SVGCircleElement | null>(null);\n  const [active, setActive] = useState<boolean>(false);\n\n  return (\n    <Fragment>\n      <motion.circle\n        initial={{\n          opacity: 0,\n          scale: 0.02\n        }}\n        animate={{\n          opacity: 1,\n          scale: 1\n        }}\n        transition={{\n          delay: index! * 0.3\n        }}\n        ref={ref}\n        className={css.marker}\n        cx={cx}\n        cy={cy}\n        r={size}\n        onMouseEnter={() => setActive(true)}\n        onMouseLeave={() => setActive(false)}\n        onClick={onClick}\n      />\n      {tooltip && (\n        <Tooltip\n          visible={active}\n          reference={ref}\n          modifiers={modifiers}\n          content={tooltip}\n        />\n      )}\n    </Fragment>\n  );\n};\n","import { useEffect, useMemo, useRef } from 'react';\nimport { DEFAULT_TRANSITION } from '../../common/Motion';\nimport { useMotionValue, useSpring } from 'framer-motion';\nimport { interpolate } from 'd3-interpolate';\n\nexport const useInterpolate = ({ data, animated, arc }) => {\n  const prevEnter = useRef<any | null>(null);\n\n  const exit = useMemo(() => {\n    const startAngle = data.startAngle;\n    const endAngle = animated ? startAngle : data.endAngle;\n\n    return {\n      ...data,\n      startAngle,\n      endAngle\n    };\n  }, [data, animated]);\n\n  const transition = useMemo(\n    () =>\n      animated\n        ? { ...DEFAULT_TRANSITION }\n        : {\n          delay: 0\n        },\n    [animated]\n  );\n\n  // Cache the previous for transition use later\n  const previousEnter = prevEnter.current\n    ? { ...prevEnter.current }\n    : undefined;\n  prevEnter.current = { ...data };\n\n  const d = useMotionValue('');\n  const prevPath = useMotionValue(exit);\n  const spring = useSpring(prevPath, {\n    ...DEFAULT_TRANSITION,\n    from: 0,\n    to: 1\n  });\n\n  useEffect(() => {\n    const from = previousEnter || prevPath.get();\n    const interpolator = interpolate(from, data);\n    const unsub = spring.onChange((v) => d.set(arc(interpolator(v))));\n    prevPath.set(data);\n    return unsub;\n  }, [arc, d, data, prevPath, previousEnter, spring]);\n\n  return {\n    d,\n    transition\n  };\n};\n","import { PointerEvent, useCallback, useRef } from 'react';\n\nexport interface HoverIntentOptions {\n  interval?: number;\n  sensitivity?: number;\n  timeout?: number;\n  disabled?: boolean;\n  onPointerOver: (event: PointerEvent<SVGElement>) => void;\n  onPointerOut: (event: PointerEvent<SVGElement>) => void;\n}\n\nexport interface HoverIntentResult {\n  pointerOut: (event: PointerEvent<SVGElement>) => void;\n  pointerOver: (event: PointerEvent<SVGElement>) => void;\n}\n\n/**\n * Hover intent identifies if the user actually is\n * intending to over by measuring the position of the mouse\n * once a pointer enters and determining if in a duration if\n * the mouse moved inside a certain threshold and fires the events.\n */\nexport const useHoverIntent = ({\n  sensitivity = 7,\n  interval = 50,\n  timeout = 10,\n  disabled,\n  onPointerOver,\n  onPointerOut\n}: HoverIntentOptions | undefined): HoverIntentResult => {\n  const mouseOver = useRef<boolean>(false);\n  const timer = useRef<any | null>(null);\n  const state = useRef<number>(0);\n  const coords = useRef({\n    x: null,\n    y: null,\n    px: null,\n    py: null\n  });\n\n  const onMouseMove = useCallback((event: MouseEvent) => {\n    coords.current.x = event.clientX;\n    coords.current.y = event.clientY;\n  }, []);\n\n  const comparePosition = useCallback(\n    (event: PointerEvent<SVGElement>) => {\n      timer.current = clearTimeout(timer.current);\n      const { px, x, py, y } = coords.current;\n\n      if (Math.abs(px - x) + Math.abs(py - y) < sensitivity) {\n        state.current = 1;\n        onPointerOver(event);\n      } else {\n        coords.current.px = x;\n        coords.current.py = y;\n        timer.current = setTimeout(() => comparePosition(event), interval);\n      }\n    },\n    [interval, onPointerOver, sensitivity]\n  );\n\n  const cleanup = useCallback(() => {\n    clearTimeout(timer.current);\n    document.removeEventListener('mousemove', onMouseMove, false);\n  }, [onMouseMove]);\n\n  const pointerOver = useCallback(\n    (event: PointerEvent<SVGElement>) => {\n      if (!disabled) {\n        mouseOver.current = true;\n        cleanup();\n\n        if (state.current !== 1) {\n          coords.current.px = event.nativeEvent.x;\n          coords.current.py = event.nativeEvent.y;\n          document.addEventListener('mousemove', onMouseMove, false);\n          timer.current = setTimeout(() => comparePosition(event), timeout);\n        }\n      }\n    },\n    [cleanup, comparePosition, disabled, onMouseMove, timeout]\n  );\n\n  const delay = useCallback(\n    (event: PointerEvent<SVGElement>) => {\n      timer.current = clearTimeout(timer.current);\n      state.current = 0;\n      onPointerOut(event);\n    },\n    [onPointerOut]\n  );\n\n  const pointerOut = useCallback(\n    (event: PointerEvent<SVGElement>) => {\n      mouseOver.current = false;\n      cleanup();\n\n      if (state.current === 1) {\n        timer.current = setTimeout(() => delay(event), timeout);\n      }\n    },\n    [cleanup, delay, timeout]\n  );\n\n  return {\n    pointerOver,\n    pointerOut\n  };\n};\n","import React, { ReactElement, useState, FC, useRef, useMemo } from 'react';\nimport chroma from 'chroma-js';\nimport { motion } from 'framer-motion';\nimport { CloneElement } from 'rdk';\nimport { ArcData } from '../PieChart';\nimport { ChartTooltip, ChartTooltipProps } from '../../common/Tooltip';\nimport { useInterpolate } from './useInterpolate';\nimport { useHoverIntent } from '../../common/utils/useHoverIntent';\n\nexport interface PieArcMouseEvent {\n  value: ArcData['data'];\n  nativeEvent: React.MouseEvent<SVGPathElement>;\n}\n\nexport interface PieArcProps {\n  /**\n   * The arc generator function returning an arc path\n   * @param data\n   */\n  arc?: (data: ArcData) => string | null;\n\n  /**\n   * Data is the datum passed to the arc generator function\n   */\n  data?: ArcData;\n\n  /**\n   * Color\n   */\n  color?: string;\n\n  /**\n   * Animate\n   */\n  animated?: boolean;\n\n  /**\n   * Tooltip component\n   */\n  tooltip?: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * The cursor type used when hovering\n   */\n  cursor?: string;\n\n  /**\n   * Disable the arc\n   */\n  disabled?: boolean;\n\n  /**\n   * OnClick event handler\n   * @param e Click event\n   */\n  onClick?: (e: PieArcMouseEvent) => void;\n\n  /**\n   * MouseEnter event handler\n   * @param e MouseEnter event\n   */\n  onMouseEnter?: (e: PieArcMouseEvent) => void;\n\n  /**\n   * MouseLeave event handler\n   * @param e MouseLeave event\n   */\n  onMouseLeave?: (e: PieArcMouseEvent) => void;\n}\n\nexport const PieArc: FC<PieArcProps> = ({\n  color,\n  data,\n  arc,\n  cursor,\n  animated,\n  disabled,\n  onClick,\n  onMouseEnter,\n  onMouseLeave,\n  tooltip\n}) => {\n  const arcRef = useRef<SVGPathElement | null>(null);\n  const { transition, d } = useInterpolate({ animated, arc, data });\n  const [active, setActive] = useState<boolean>(false);\n  const fill = useMemo(\n    () => (active ? chroma(color).brighten(0.5) : color),\n    [color, active]\n  );\n\n  const { pointerOut, pointerOver } = useHoverIntent({\n    onPointerOver: (event) => {\n      if (!disabled) {\n        setActive(true);\n        onMouseEnter({\n          value: data.data,\n          nativeEvent: event as any\n        });\n      }\n    },\n    onPointerOut: (event) => {\n      if (!disabled) {\n        setActive(false);\n        onMouseLeave({\n          value: data.data,\n          nativeEvent: event as any\n        });\n      }\n    }\n  });\n\n  return (\n    <g ref={arcRef}>\n      <motion.path\n        role=\"graphics-symbol\"\n        transition={transition}\n        d={d}\n        style={{ cursor }}\n        fill={fill}\n        onPointerOver={pointerOver}\n        onPointerOut={pointerOut}\n        onClick={(event) => {\n          if (!disabled) {\n            onClick({\n              value: data.data,\n              nativeEvent: event\n            });\n          }\n        }}\n      />\n      {!tooltip?.props?.disabled && (\n        <CloneElement<ChartTooltipProps>\n          element={tooltip}\n          visible={!!active}\n          reference={arcRef}\n          value={{ y: data.data.data, x: data.data.key }}\n        />\n      )}\n    </g>\n  );\n};\n\nPieArc.defaultProps = {\n  cursor: 'initial',\n  animated: true,\n  disabled: false,\n  onClick: () => undefined,\n  onMouseEnter: () => undefined,\n  onMouseLeave: () => undefined,\n  tooltip: <ChartTooltip />\n};\n","type Coordinate = [number, number];\n\n/**\n * Finds intermediate point between two points so that this three points\n * can be nicely connected by two lines. One of this lines must be horizontal\n */\nexport function findBreakPoint(\n  [startX, startY]: Coordinate,\n  [endX, endY]: Coordinate\n): Coordinate {\n  let breakPoint: Coordinate = [0, 0];\n\n  // whether we should create breakpoint near pie or near label\n  const breakPointCondition = (endY - startY) * Math.sign(startY) >= 0;\n\n  if (breakPointCondition) {\n    // extend the line starting from startY till the endY\n    let scale = Math.abs(endY / startY) || 1;\n    const minScale = 1;\n    const maxScale = Math.abs(endX / startX) || 1;\n\n    scale = Math.max(Math.min(maxScale, scale), minScale);\n\n    breakPoint = [startX * scale, endY];\n  } else {\n    // some arbitrary scale to ensure that break point will be placed\n    // at some horizontal distance from the end point\n    let scale = 0.85;\n    const minScale = Math.abs(startX / endX) || 1;\n    const maxScale = 1;\n\n    scale = Math.max(Math.min(maxScale, scale), minScale);\n\n    breakPoint = [endX * scale, startY];\n  }\n\n  return breakPoint;\n}\n","import React, { FC } from 'react';\nimport { motion } from 'framer-motion';\nimport { arc } from 'd3-shape';\nimport { ArcData } from '../PieChart';\nimport { ChartInternalDataTypes } from '../../common/data/types';\nimport { formatValue } from '../../common/utils/formatting';\nimport { findBreakPoint } from './findBreakPoint';\n\nexport interface PieArcLabelProps {\n  /**\n   * Data set by the parent component\n   */\n  data: ArcData;\n\n  /**\n   * A function returning the centroid of the corresponding `PieArc`\n   * @param d PieArcDatum\n   */\n  centroid: (d: ArcData) => [number, number];\n\n  /**\n   * A Formatting function for the label value\n   * @param v The label value\n   */\n  format?: (\n    // have added any because not sure whether this change won't be breaking\n    v: any & ArcData['data'] & { textAnchor: 'start' | 'end' }\n  ) => React.ReactNode;\n\n  /**\n   * FontFill color\n   */\n  fontFill: string;\n\n  /**\n   * FontSize\n   */\n  fontSize: number;\n\n  /**\n   * FontFamily\n   */\n  fontFamily: string;\n\n  /**\n   * Line stroke of the label connector\n   */\n  lineStroke: string;\n\n  /**\n   * Outer radius of the corresponding `PieArc`\n   */\n  outerRadius: number;\n\n  /**\n   * y Padding of the label\n   */\n  padding: string;\n\n  /**\n   * The label position set by the parent component\n   */\n  position: [number, number];\n\n  /**\n   * Width of the label\n   */\n  width?: number;\n\n  /**\n   * Height of the label\n   */\n  height?: number;\n}\n\nconst getTextAnchor = ({ startAngle, endAngle }: ArcData) =>\n  // we could also use the sign of position[0]\n  startAngle + (endAngle - startAngle) / 2 < Math.PI ? 'start' : 'end';\n\nexport const PieArcLabel: FC<Partial<PieArcLabelProps>> = ({\n  centroid,\n  data,\n  lineStroke,\n  padding,\n  fontSize,\n  fontFill,\n  format,\n  fontFamily,\n  position,\n  outerRadius,\n  width,\n  height\n}) => {\n  const textAnchor = getTextAnchor(data);\n  const text: React.ReactNode = format\n    ? format({ ...data.data, textAnchor })\n    : formatValue(data.data.key as ChartInternalDataTypes);\n  const [posX, posY] = position;\n  // we want to have at least some pixels of straight line (margin)\n  // from pie section till we start to change line direction\n  const minRadius = outerRadius + 4;\n\n  const startPoint = centroid(data);\n  const innerPoint = arc<ArcData>()\n    .innerRadius(minRadius)\n    .outerRadius(minRadius)\n    .centroid(data);\n  const breakPoint = findBreakPoint(innerPoint, position);\n\n  return (\n    <motion.g\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      transition={{\n        duration: 0.1\n      }}\n    >\n      {typeof text === 'string' ? (\n        <>\n          <title>{text}</title>\n          <text\n            dy={padding}\n            fill={fontFill}\n            fontSize={fontSize}\n            fontFamily={fontFamily}\n            textAnchor={textAnchor}\n            style={{\n              shapeRendering: 'crispEdges',\n              transform: `translate3d(${posX}px,${posY}px, 0)`\n            }}\n          >\n            {text}\n          </text>\n        </>\n      ) : (\n        <foreignObject\n          width={width}\n          height={height}\n          style={{\n            transform: `translate3d(${\n              textAnchor === 'start' ? posX : posX - width\n            }px,${posY - height / 2}px, 0)`,\n            color: fontFill,\n            fontFamily,\n            fontSize\n          }}\n        >\n          {text}\n        </foreignObject>\n      )}\n      <polyline\n        fill=\"none\"\n        stroke={lineStroke}\n        points={`${startPoint},${innerPoint},${breakPoint},${position}`}\n      />\n    </motion.g>\n  );\n};\n\nPieArcLabel.defaultProps = {\n  format: undefined,\n  lineStroke: 'rgba(127,127,127,0.5)',\n  fontFill: '#8F979F',\n  fontSize: 11,\n  fontFamily: 'sans-serif',\n  padding: '.35em',\n  height: 11\n};\n","import { max } from 'd3-array';\nimport { arc } from 'd3-shape';\nimport { ArcData } from '../PieChart';\n\nconst factor = 1.2;\nconst midAngle = (d: ArcData) => d.startAngle + (d.endAngle - d.startAngle) / 2;\nconst labelVisible = (arc: ArcData) =>\n  arc.endAngle - arc.startAngle > Math.PI / 30;\n\nfunction shouldDisplayLabel(displayAllLabels: boolean, arcData: ArcData) {\n  return displayAllLabels || labelVisible(arcData);\n}\n\nexport function calculateOuterRadius(\n  outerRadius: number,\n  data: ArcData[],\n  point: ArcData,\n  explode: boolean,\n) {\n  if (!explode || data === undefined) {\n    return outerRadius;\n  }\n\n  const maxVal = max(data, (d: ArcData) => d.value);\n\n  return (outerRadius * point.value) / maxVal;\n}\n\nexport function calculateCentroid(\n  data: ArcData[],\n  innerRadius: number,\n  outerRadius: number,\n  explode: boolean\n) {\n  return (point: ArcData) => {\n    const newOuter = calculateOuterRadius(outerRadius, data, point, explode);\n\n    return arc<any, ArcData>()\n      .innerRadius(innerRadius)\n      .outerRadius(newOuter)\n      .centroid(point);\n  };\n}\n\nexport function calculateRadius(\n  height,\n  width,\n  label,\n  arcWidth,\n  doughnut\n) {\n  const minDimension = Math.min(width, height);\n\n  let outerRadius = minDimension / 2;\n  let labelWidth = 0;\n\n  if (label) {\n    labelWidth = label.props.width;\n\n    if (labelWidth) {\n      const outerArcRadius = width / 2 - labelWidth;\n\n      outerRadius = Math.min(outerArcRadius / factor, height / 2);\n    } else {\n      outerRadius = minDimension / 3;\n      labelWidth = width / 2 - outerRadius * factor;\n    }\n  }\n\n  const innerRadius = doughnut ? outerRadius * (1 - arcWidth) : 0;\n\n  return {\n    outerRadius,\n    innerRadius,\n    labelWidth\n  };\n}\n\nexport function calculateInnerArc(\n  data: ArcData[],\n  innerRadius: number,\n  outerRadius: number,\n  cornerRadius: number,\n  padAngle: number,\n  padRadius: number,\n  explode: boolean\n) {\n  return (point: ArcData) => {\n    const newOuter = calculateOuterRadius(outerRadius, data, point, explode);\n\n    return arc<any, ArcData>()\n      .innerRadius(innerRadius)\n      .outerRadius(newOuter)\n      .cornerRadius(cornerRadius)\n      .padRadius(padRadius)\n      .padAngle(padAngle)(point);\n  };\n}\n\nexport function calculateLabelPositions(\n  data: ArcData[],\n  outerRadius: number,\n  minDistance: number,\n  cornerRadius: number,\n  padAngle: number,\n  padRadius: number,\n  displayAllLabels: boolean\n): Array<[number, number] | null> {\n  const outerArcRadius = outerRadius * factor;\n  const outerArc = arc<any, ArcData>()\n    .innerRadius(outerArcRadius)\n    .outerRadius(outerArcRadius)\n    .cornerRadius(cornerRadius)\n    .padAngle(padAngle)\n    .padRadius(padRadius);\n\n  const positions: Array<[number, number] | null> = data.map((d) => {\n    if (!shouldDisplayLabel(displayAllLabels, d)) {\n      return null;\n    }\n\n    const pos = outerArc.centroid(d);\n\n    // reposition the labels to the left/right from outerArc centroid\n    // so that all labels won't collide with pie\n    // when we will vertically reposition them\n    pos[0] = outerArcRadius * (midAngle(d) < Math.PI ? 1 : -1);\n\n    return pos;\n  });\n\n  for (let i = 0; i < data.length - 1; i++) {\n    if (!positions[i]) {\n      continue;\n    }\n\n    const [aPosX, aPosY] = positions[i];\n\n    for (let j = i + 1; j < data.length; j++) {\n      if (!positions[j]) {\n        continue;\n      }\n\n      const [bPosX, bPosY] = positions[j];\n\n      // if they're on the same side (both with - or + sign)\n      if (bPosX * aPosX > 0) {\n        // if they're overlapping\n        const overlap = minDistance - Math.abs(bPosY - aPosY);\n\n        if (overlap > 0) {\n          // push the second up or down\n          positions[j][1] += Math.sign(bPosX) * overlap;\n        }\n      }\n    }\n  }\n\n  return positions;\n}\n","import React, { FC, Fragment, ReactElement } from 'react';\nimport { CloneElement } from 'rdk';\nimport { ArcData } from '../PieChart';\nimport { PieArc, PieArcProps } from './PieArc';\nimport { PieArcLabel, PieArcLabelProps } from './PieArcLabel';\nimport { getColor, ColorSchemeType } from '../../common/color';\nimport { calculateCentroid, calculateInnerArc, calculateLabelPositions, calculateRadius } from './radiusUtils';\n\nexport interface PieArcSeriesProps {\n  /**\n   * Animated set by the `PieArc` components.\n   */\n  animated: boolean;\n\n  /**\n   * Outer radius set by the parent component.\n   */\n  outerRadius: number;\n\n  /**\n   * Inner radius set by the parent component.\n   */\n  innerRadius: number;\n\n  /**\n   * Pad Angle between adjacent arcs, see https://github.com/d3/d3-shape#arc_padAngle\n   */\n  padAngle: number;\n\n  /**\n   * Pad Radius between adjacent arcs, see https://github.com/d3/d3-shape#arc_padRadius\n   */\n  padRadius: number;\n\n  /**\n   * Corner Radius of the arcs, see https://github.com/d3/d3-shape#arc_cornerRadius\n   */\n  cornerRadius: number;\n\n  /**\n   * Data set by the parent component.\n   */\n  data: ArcData[];\n\n  /**\n   * Width of the arc\n   */\n  arcWidth: number;\n\n  /**\n   * Doughnut, render as a donut shape\n   */\n  doughnut: boolean;\n\n  /**\n   * Explode: OuterRadius will be adjusted by the data property\n   */\n  explode: boolean;\n\n  /**\n   * Display all labels shows labels even if there is little space\n   */\n  displayAllLabels: boolean;\n\n  /**\n   * Label component\n   */\n  label?: ReactElement<PieArcLabelProps, typeof PieArcLabel> | null;\n\n  /**\n   * Arc Component\n   */\n  arc: ReactElement<PieArcProps, typeof PieArc>;\n\n  /**\n   * Color scheme\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Height set by the parent component\n   */\n  height: number;\n\n  /**\n   * Width set by the parent component\n   */\n  width: number;\n}\n\nexport const PieArcSeries: FC<Partial<PieArcSeriesProps>> = ({\n  doughnut,\n  arcWidth,\n  label,\n  colorScheme,\n  width,\n  displayAllLabels,\n  height,\n  explode,\n  animated,\n  cornerRadius,\n  padAngle,\n  padRadius,\n  arc,\n  data\n}) => {\n  const { outerRadius, innerRadius, labelWidth } = calculateRadius(height, width, label, arcWidth, doughnut);\n\n  const innerArc = calculateInnerArc(\n    data,\n    innerRadius,\n    outerRadius,\n    cornerRadius,\n    padAngle,\n    padRadius,\n    explode\n  );\n\n  const positions = label\n    ? calculateLabelPositions(\n      data,\n      outerRadius,\n      // 4 is for vertical margins between labels\n      label.props.height + 4,\n      cornerRadius,\n      padAngle,\n      padRadius,\n      displayAllLabels\n    )\n    : [];\n\n  const centroid = calculateCentroid(data, innerRadius, outerRadius, explode);\n\n  return (\n    <Fragment>\n      {data.map((arcData, index) => (\n        <Fragment key={arcData.data.key.toString()}>\n          {positions[index] && (\n            <CloneElement<PieArcLabelProps>\n              element={label}\n              data={arcData}\n              centroid={centroid}\n              outerRadius={outerRadius}\n              width={labelWidth}\n              position={positions[index]}\n            />\n          )}\n          <CloneElement<PieArcProps>\n            element={arc}\n            data={arcData}\n            animated={animated}\n            arc={innerArc}\n            color={getColor({\n              data,\n              colorScheme,\n              point: arcData.data,\n              index\n            })}\n          />\n        </Fragment>\n      ))}\n    </Fragment>\n  );\n};\n\nPieArcSeries.defaultProps = {\n  animated: true,\n  colorScheme: 'cybertron',\n  innerRadius: 0,\n  cornerRadius: 0,\n  padAngle: 0,\n  padRadius: 0,\n  explode: false,\n  displayAllLabels: false,\n  arcWidth: 0.25,\n  label: <PieArcLabel />,\n  arc: <PieArc />\n};\n","import React, { FC, ReactElement, useMemo } from 'react';\nimport classNames from 'classnames';\nimport { PieArcDatum } from 'd3-shape';\nimport { pie } from 'd3-shape';\nimport { CloneElement } from 'rdk';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '../common/containers';\nimport { ChartShallowDataShape } from '../common/data';\nimport { PieArcSeries, PieArcSeriesProps } from './PieArcSeries';\n\nexport type ArcData = PieArcDatum<ChartShallowDataShape>;\n\nexport interface PieChartProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data?: ChartShallowDataShape[];\n\n  /**\n   * Whether the chart is disabled.\n   */\n  disabled?: boolean;\n\n  /**\n   * Whether to display labels even if their value has a small display radius.\n   */\n  displayAllLabels?: boolean;\n\n  /**\n   * The series component that renders the arc components.\n   */\n  series?: ReactElement<PieArcSeriesProps, typeof PieArcSeries>;\n}\n\nexport const PieChart: FC<PieChartProps> = ({\n  id,\n  width,\n  height,\n  className,\n  containerClassName,\n  displayAllLabels,\n  data = [],\n  margins,\n  series\n}) => {\n  const getData = useMemo(() => {\n    const pieLayout = pie<void, ChartShallowDataShape>().value(\n      (d: ChartShallowDataShape) => Number(d.data)\n    );\n\n    // Explode sort doesn't work right...\n    if (!series.props.explode) {\n      pieLayout.sort(null);\n    }\n\n    return pieLayout(data);\n  }, [data, series]);\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      containerClassName={containerClassName}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      center={true}\n      className={classNames(className)}\n    >\n      {({ chartWidth, chartHeight }: ChartContainerChildProps) => (\n        <CloneElement<PieArcSeriesProps>\n          element={series}\n          data={getData}\n          height={chartHeight}\n          width={chartWidth}\n          displayAllLabels={displayAllLabels}\n        />\n      )}\n    </ChartContainer>\n  );\n};\n\nPieChart.defaultProps = {\n  margins: 10,\n  series: <PieArcSeries />\n};\n","import { SankeyNode, SankeyLink } from 'd3-sankey';\n\nexport interface NodeExtra {\n  /**\n   * ID of the node. If not provided, the node's index will be used.\n   */\n  id?: string;\n\n  /**\n   * Title of the node.\n   */\n  title: string;\n\n  /**\n   * Color of the node.\n   */\n  color?: string;\n}\n\nexport interface LinkExtra {\n  /**\n   * Color of the link.\n   */\n  color?: string;\n}\n\nexport type SankeyNodeExtra = SankeyNode<NodeExtra, LinkExtra>;\n\nexport type SankeyLinkExtra = SankeyLink<NodeExtra, LinkExtra>;\n\nexport const DEFAULT_COLOR = 'rgba(255, 255, 255, 0.2)';\n\nexport const LABEL_PADDING_PERCENT = 0.1;\n","import React, {\n  FC,\n  Fragment,\n  ReactElement,\n  useCallback,\n  useMemo,\n  useState\n} from 'react';\nimport {\n  sankey,\n  sankeyLeft,\n  sankeyRight,\n  sankeyCenter,\n  sankeyJustify\n} from 'd3-sankey';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '../common/containers/ChartContainer';\nimport { CloneElement, useId } from 'rdk';\n\nimport { getColor, ColorSchemeType } from '../common/color';\nimport { SankeyNodeProps, SankeyNode } from './SankeyNode';\nimport { SankeyLinkProps, SankeyLink } from './SankeyLink';\nimport { SankeyNodeExtra, SankeyLinkExtra, LABEL_PADDING_PERCENT } from './utils';\nimport { SankeyLabelPosition } from './SankeyLabel';\n\nconst JUSTIFICATION = {\n  justify: sankeyJustify,\n  center: sankeyCenter,\n  left: sankeyLeft,\n  right: sankeyRight\n};\n\nexport type Justification = 'justify' | 'center' | 'left' | 'right';\n\nexport type NodeElement = ReactElement<SankeyNodeProps, typeof SankeyNode>;\n\nexport type LinkElement = ReactElement<SankeyLinkProps, typeof SankeyLink>;\n\nexport interface SankeyProps extends ChartProps {\n  /**\n   * Whether to animate the enter/update/exit. Set internally by `SankeyNode` and `SankeyLink`.\n   */\n  animated?: boolean;\n\n  /**\n   * Color scheme for the nodes. Set internally by `SankeyNode`.\n   */\n  colorScheme?: ColorSchemeType;\n\n  /**\n   * The node alignment method.\n   */\n  justification?: Justification;\n\n  /**\n   * Width of the node.\n   */\n  nodeWidth?: number;\n\n  /**\n   * Vertical padding between nodes in the same column.\n   */\n  nodePadding?: number;\n\n  /**\n   * Label position.\n   */\n  labelPosition?: SankeyLabelPosition;\n\n  /**\n   * Sort function for the nodes.\n   *\n   * If sort is specified, sets the node sort method and returns this Sankey generator.\n   * If sort is not specified, returns the current node sort method, which defaults\n   * to undefined, indicating that vertical order of nodes within each column will\n   * be determined automatically by the layout. If sort is null, the order is fixed\n   * by the input. Otherwise, the specified sort function determines the order;\n   * the function is passed two nodes, and must return a value less than 0 if the\n   * first node should be above the second, and a value greater than 0 if the second\n   * node should be above the first, or 0 if the order is not specified.\n   *\n   * Reference: https://github.com/d3/d3-sankey#sankey_nodeSort\n   */\n  nodeSort?: (a: any, b: any) => number;\n\n  /**\n   * Nodes that are rendered.\n   */\n  nodes: NodeElement[];\n\n  /**\n   * Links that are rendered.\n   */\n  links: LinkElement[];\n}\n\nexport const Sankey: FC<SankeyProps> = ({\n  width,\n  height,\n  margins,\n  className,\n  animated,\n  links,\n  justification,\n  nodeWidth,\n  nodePadding,\n  labelPosition,\n  nodeSort,\n  colorScheme,\n  nodes,\n  containerClassName,\n  ...rest\n}) => {\n  const id = useId(rest.id);\n  const [activeNodes, setActiveNodes] = useState<SankeyNodeExtra[]>([]);\n  const [activeLinks, setActiveLinks] = useState<SankeyLinkExtra[]>([]);\n\n  const getNodeColor = useCallback(\n    (node: NodeElement, index: any) => {\n      if (colorScheme) {\n        return getColor({\n          data: nodes,\n          colorScheme,\n          point: nodes[index],\n          index\n        });\n      } else {\n        return node.props.color;\n      }\n    },\n    [colorScheme, nodes]\n  );\n\n  const onNodeActive = useCallback((node: SankeyNodeExtra) => {\n    const activeNodes: SankeyNodeExtra[] = [node];\n    const activeLinks: SankeyLinkExtra[] = [];\n\n    if (node.sourceLinks) {\n      activeLinks.push(...node.sourceLinks);\n      node.sourceLinks.forEach((sourceLink) => {\n        const sourceLinkTarget = sourceLink.target as SankeyNodeExtra;\n        if (sourceLinkTarget.index !== node.index) {\n          activeNodes.push(sourceLinkTarget);\n        }\n      });\n    }\n\n    if (node.targetLinks) {\n      activeLinks.push(...node.targetLinks);\n      node.targetLinks.forEach((targetLink) => {\n        const targetLinkSource = targetLink.source as SankeyNodeExtra;\n        if (targetLinkSource.index !== node.index) {\n          activeNodes.push(targetLinkSource);\n        }\n      });\n    }\n\n    setActiveNodes(activeNodes);\n    setActiveLinks(activeLinks);\n  }, []);\n\n  const onLinkActive = useCallback((link: SankeyLinkExtra) => {\n    const activeNodes: SankeyNodeExtra[] = [\n      link.source as SankeyNodeExtra,\n      link.target as SankeyNodeExtra\n    ];\n    const activeLinks: SankeyLinkExtra[] = [link];\n\n    setActiveNodes(activeNodes);\n    setActiveLinks(activeLinks);\n  }, []);\n\n  const onInactive = useCallback(() => {\n    setActiveNodes([]);\n    setActiveLinks([]);\n  }, []);\n\n  const nodeMap = useMemo(() => {\n    // Not sure what this is for\n    const nodeMap = new Map<string, NodeElement>();\n    nodes.forEach((node: any) => node && nodeMap.set(node.props.title, node));\n\n    return nodeMap;\n  }, [nodes]);\n\n  const renderNode = useCallback(\n    (\n      computedNode: SankeyNodeExtra,\n      index: number,\n      chartWidth: number,\n      node?: NodeElement\n    ) => {\n      const active = activeNodes.some(\n        (node) => node.index === computedNode.index\n      );\n      const disabled = activeNodes.length > 0 && !active;\n      const labelPadding = labelPosition === 'outside' ? LABEL_PADDING_PERCENT : 0;\n\n      return (\n        <CloneElement<SankeyNodeProps>\n          element={node}\n          key={`node-${index}`}\n          active={active}\n          animated={animated}\n          disabled={disabled}\n          chartWidth={chartWidth}\n          onMouseEnter={() => onNodeActive(computedNode)}\n          onMouseLeave={() => onInactive()}\n          labelPosition={labelPosition}\n          labelPadding={labelPadding}\n          {...computedNode}\n        />\n      );\n    },\n    [activeNodes, animated, onInactive, onNodeActive, labelPosition]\n  );\n\n  const renderLink = useCallback(\n    (computedLink: SankeyLinkExtra, index: number) => {\n      const active = activeLinks.some(\n        (link) => link.index === computedLink.index\n      );\n      const disabled = activeLinks.length > 0 && !active;\n\n      return (\n        <CloneElement<SankeyLinkProps>\n          element={links[index]}\n          active={active}\n          animated={animated}\n          key={`link-${index}`}\n          chartId={`sankey-${id}`}\n          disabled={disabled}\n          {...computedLink}\n          onMouseEnter={() => onLinkActive(computedLink)}\n          onMouseLeave={() => onInactive()}\n        />\n      );\n    },\n    [activeLinks, id, animated, links, onInactive, onLinkActive]\n  );\n\n  const getNodesAndLinks = useCallback(\n    (chartWidth: number, chartHeight: number) => {\n\n      const labelPadding = labelPosition === 'outside' ? LABEL_PADDING_PERCENT : 0;\n      const padding = labelPadding * chartWidth;\n\n      const sankeyChart = sankey()\n        .extent([\n          [1+padding, 1],\n          [chartWidth-padding, chartHeight]\n        ])\n        .nodeWidth(nodeWidth)\n        .nodePadding(nodePadding)\n        .nodeSort(nodeSort)\n        .nodeAlign(JUSTIFICATION[justification])\n        .nodeId((node: any) => node.id || node.index);\n\n      const nodesCopy: any = nodes.map((node, index) => ({\n        id: node.props.id,\n        title: node.props.title,\n        color: getNodeColor(node, index)\n      }));\n\n      const linksCopy = links.map((link) => ({\n        source: link.props.source,\n        target: link.props.target,\n        value: link.props.value\n      }));\n\n      const { nodes: sankeyNodes, links: sankeyLinks } = sankeyChart({\n        nodes: nodesCopy,\n        links: linksCopy\n      });\n\n      /*\n      // NOTE: Not sure what this is doing\n      sankeyNodes.sort((a, b) => {\n        const aX0 = a && a.x0 ? a.x0 : 0;\n        const aY0 = a && a.y0 ? a.y0 : 0;\n        const bX0 = b && b.x0 ? b.x0 : 0;\n        const bY0 = b && b.y0 ? b.y0 : 0;\n        return aX0 - bX0 || aY0 - bY0;\n      });\n      */\n\n      return { sankeyNodes, sankeyLinks };\n    },\n    [getNodeColor, nodeSort, justification, links, nodePadding, nodeWidth, nodes, labelPosition]\n  );\n\n  const renderChart = useCallback(\n    ({ id, chartWidth, chartHeight, chartSized }: ChartContainerChildProps) => {\n      if (!chartSized) {\n        return null;\n      }\n\n      const { sankeyNodes, sankeyLinks } = getNodesAndLinks(\n        chartWidth,\n        chartHeight\n      );\n\n      return (\n        <Fragment key=\"group\">\n          {sankeyLinks.map((link, index) =>\n            renderLink(link as SankeyLinkExtra, index)\n          )}\n          {sankeyNodes.map((node: SankeyNodeExtra, index) =>\n            renderNode(node, index, chartWidth, nodeMap.get(node.title))\n          )}\n        </Fragment>\n      );\n    },\n    [getNodesAndLinks, nodeMap, renderLink, renderNode]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      containerClassName={containerClassName}\n      height={height}\n      margins={margins}\n      className={className}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n\nSankey.defaultProps = {\n  animated: true,\n  justification: 'justify',\n  nodeWidth: 15,\n  nodePadding: 10,\n  nodePosition: 'inside',\n};\n","import React, { FC } from 'react';\nimport classNames from 'classnames';\nimport { SankeyNodeExtra } from '../utils';\nimport css from './SankeyLabel.module.css';\nimport ellipsize from 'ellipsize';\n\nexport type SankeyLabelPosition = 'inside' | 'outside';\n\nexport interface SankeyLabelFormatProps {\n  x: number;\n  y: number;\n  textAnchor: string;\n  node: SankeyNodeExtra;\n}\n\nexport interface SankeyLabelProps {\n  /**\n   * Whether the element is active or not. Set internally by `Sankey`.\n   */\n  active: boolean;\n\n  /**\n   * Whether the label is disabled. Set internally by `Sankey`.\n   */\n  disabled: boolean;\n\n  /**\n   * Width of the chart. Set internally by `Sankey`.\n   */\n  chartWidth?: number;\n\n  /**\n   * CSS class to apply.\n   */\n  className?: string;\n\n  /**\n   * Fill color.\n   */\n  fill: string;\n\n  /**\n   * Label position. Set internally by `Sankey`.\n   */\n  position?: SankeyLabelPosition;\n\n   /**\n   * Percentage of total width occupied by labels on \n   * either side of the graph inside the container.\n   * Used for auto-ellipsizing labels\n   * Set internally by `Sankey`.\n   */\n   labelPadding?: number;\n\n  /**\n   * Node data. Set internally by `Sankey`.\n   */\n  node?: SankeyNodeExtra;\n\n  /**\n   * Opacity callback. Used internally by `Sankey`.\n   */\n  opacity: (active: boolean, disabled: boolean) => number;\n\n  /**\n   * Padding between the label and the node.\n   */\n  padding?: string | number;\n\n  /**\n   * Whether to show the label or not.\n   */\n  visible: boolean;\n\n  /**\n   * Width of the node set by the 'Sankey'.\n   */\n  nodeWidth: number;\n\n  /**\n   * Custom formatting for the label.\n   */\n  format?: (value: SankeyLabelFormatProps) => any;\n\n  /**\n   * Specify the number of characters at which the text would be ellipsized.\n   * Defaults to 'auto' based on available width and max cut-off at `LABEL_TRUNCATE_LENGTH=10`\n   */\n  ellipsis?: number | 'none' | 'auto'\n}\n\nconst LABEL_PADDING = 5;\nconst LABEL_TRUNCATE_LENGTH = 10;\n\nexport const SankeyLabel: FC<Partial<SankeyLabelProps>> = ({\n  active,\n  chartWidth,\n  className,\n  nodeWidth,\n  disabled,\n  fill,\n  format,\n  node,\n  position,\n  opacity,\n  padding,\n  visible,\n  ellipsis,\n  labelPadding\n}) => {\n  const x0 = node?.x0 || 0;\n  const x1 = node?.x1 || 0;\n  const y0 = node?.y0 || 0;\n  const y1 = node?.y1 || 0;\n  const paddedWidth = nodeWidth + LABEL_PADDING;\n\n  const width = chartWidth || 0;\n  const showRightSide = x0 < width / 2;\n  let x = showRightSide ? x1 + paddedWidth : x0 - paddedWidth;\n  const y = (y1 + y0) / 2;\n\n  let textAnchor = showRightSide ? 'start' : 'end';\n  if (position === 'outside') {\n    textAnchor = showRightSide ? 'end' : 'start';\n    x = showRightSide ? x1 - paddedWidth : x0 + paddedWidth;\n  }\n\n  if (!visible || !node) {\n    return null;\n  }\n\n  let truncatedTitle = '';\n  if (ellipsis === 'auto') {\n    // This math somehow works for now!\n    const avaialableWidth = showRightSide ? x: width-x;\n    truncatedTitle = ellipsize(node.title, Math.min(LABEL_TRUNCATE_LENGTH, avaialableWidth/(labelPadding*100)));\n  } else if (ellipsis === 'none') {\n    truncatedTitle = node.title;\n  } else {\n    truncatedTitle = ellipsize(node.title, ellipsis);\n  }\n\n  return (\n    <text\n      className={classNames(css.label, className)}\n      x={x}\n      y={y}\n      dy=\"0.35em\"\n      textAnchor={textAnchor}\n      fill={fill}\n      opacity={opacity(active, disabled)}\n      style={{ padding }}\n    >\n      {typeof format === 'function'\n        ? format({ x, y, textAnchor, node })\n        : truncatedTitle}\n    </text>\n  );\n};\n\nSankeyLabel.defaultProps = {\n  active: false,\n  fill: '#fff',\n  position: 'inside',\n  opacity: (active, disabled) => (active ? 1 : disabled ? 0.2 : 0.9),\n  visible: true,\n  ellipsis: 'auto'\n};\n","import React, {\n  Fragment,\n  ReactElement,\n  useCallback,\n  useState,\n  useMemo,\n  useRef,\n  FC\n} from 'react';\nimport classNames from 'classnames';\nimport { motion } from 'framer-motion';\nimport { sankeyLinkHorizontal } from 'd3-sankey';\nimport { CloneElement } from 'rdk';\nimport { formatValue } from '../../common/utils/formatting';\nimport { Tooltip, TooltipProps } from 'reablocks';\nimport {\n  NodeExtra,\n  SankeyNodeExtra,\n  SankeyLinkExtra,\n  DEFAULT_COLOR\n} from '../utils';\nimport css from './SankeyLink.module.css';\nimport { useHoverIntent } from '../../common/utils/useHoverIntent';\n\nexport interface SankeyLinkProps extends SankeyLinkExtra {\n  /**\n   * Color of the link.\n   */\n  color?: string;\n\n  /**\n   * Whether the element is active or not. Set internally by `Sankey`.\n   */\n  active: boolean;\n\n  /**\n   * Whether to animate the enter/update/exit.\n   */\n  animated: boolean;\n\n  /**\n   * Id of Sankey chart. Set internally by `Sankey`.\n   */\n  chartId: string;\n\n  /**\n   * CSS class to apply.\n   */\n  className?: string;\n\n  /**\n   * Whether the node is disabled. Set internally by `Sankey`.\n   */\n  disabled: boolean;\n\n  /**\n   * Whether to use gradient or not.\n   */\n  gradient?: boolean;\n\n  /**\n   * Opacity callback for the link.\n   */\n  opacity: (active: boolean, disabled: boolean) => number;\n\n  /**\n   * CSS styles to apply.\n   */\n  style?: object;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip?: ReactElement<TooltipProps, typeof Tooltip> | null;\n\n  /**\n   * Width of the link. Set internally by `Sankey`.\n   */\n  width: number;\n\n  /**\n   * Event for when the link is clicked.\n   */\n  onClick?: (event: React.MouseEvent<SVGPathElement>) => void;\n\n  /**\n   * Event for when the link has mouse enter.\n   */\n  onMouseEnter?: (event: React.MouseEvent<SVGPathElement>) => void;\n\n  /**\n   * Event for when the link has mouse leave.\n   */\n  onMouseLeave?: (event: React.MouseEvent<SVGPathElement>) => void;\n}\n\nexport const SankeyLink: FC<Partial<SankeyLinkProps>> = ({\n  gradient,\n  index,\n  source,\n  target,\n  tooltip,\n  chartId,\n  value,\n  active,\n  className,\n  disabled,\n  opacity,\n  style,\n  width,\n  color,\n  y0,\n  y1,\n  onClick,\n  onMouseEnter,\n  onMouseLeave\n}) => {\n  const linkSource = source as SankeyNodeExtra;\n  const linkTarget = target as SankeyNodeExtra;\n\n  const [hovered, setHovered] = useState<boolean>(false);\n  const linkRef = useRef<SVGPathElement | null>(null);\n\n  const getLink = useCallback(() => {\n    return { index, y0, y1, value, width, source, target };\n  }, [index, source, target, value, width, y0, y1]);\n\n  const stroke = useMemo(() => {\n    if (gradient) {\n      return `url(#${chartId}-gradient-${index})`;\n    } else if (color) {\n      return color;\n    }\n\n    return DEFAULT_COLOR;\n  }, [chartId, gradient, index, color]);\n\n  const enterProps = useMemo(() => {\n    const path = sankeyLinkHorizontal();\n    const d = path(getLink()) as string;\n    const strokeWidth = Math.max(1, width);\n    return { d, strokeWidth };\n  }, [getLink, width]);\n\n  const exitProps = useMemo(() => {\n    const path = sankeyLinkHorizontal();\n    const d = path({ ...getLink(), width: 0 }) as string;\n    return { d, strokeWidth: 0 };\n  }, [getLink]);\n\n  const renderTooltipContent = useCallback(() => {\n    return (\n      <div className={css.tooltip}>\n        <div className={css.tooltipLabel}>\n          {`${(source as NodeExtra).title}  ${(target as NodeExtra).title}`}\n        </div>\n        <div className={css.tooltipValue}>{formatValue(value)}</div>\n      </div>\n    );\n  }, [source, target, value]);\n\n  const { pointerOut, pointerOver } = useHoverIntent({\n    onPointerOver: (event) => {\n      setHovered(true);\n      onMouseEnter?.(event as any);\n    },\n    onPointerOut: (event) => {\n      setHovered(false);\n      onMouseLeave?.(event as any);\n    }\n  });\n\n  return (\n    <Fragment>\n      {gradient && (\n        <linearGradient\n          id={`${chartId}-gradient-${index}`}\n          gradientUnits=\"userSpaceOnUse\"\n          x1={linkSource.x1}\n          x2={linkTarget.x0}\n        >\n          <stop offset=\"0%\" stopColor={linkSource.color} />\n          <stop offset=\"100%\" stopColor={linkTarget.color} />\n        </linearGradient>\n      )}\n      <g ref={linkRef}>\n        <motion.path\n          key={`sankey-link-${enterProps.d}-${index}`}\n          className={classNames(css.link, className)}\n          style={style}\n          initial={exitProps}\n          animate={enterProps}\n          exit={exitProps}\n          transition={{\n            duration: 0.5\n          }}\n          stroke={stroke}\n          strokeOpacity={opacity(active, disabled)}\n          onClick={onClick}\n          onPointerOver={pointerOver}\n          onPointerOut={pointerOut}\n        />\n      </g>\n      {!tooltip?.props?.disabled && (\n        <CloneElement<TooltipProps>\n          content={renderTooltipContent}\n          element={tooltip}\n          visible={hovered}\n          reference={linkRef}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nSankeyLink.defaultProps = {\n  active: false,\n  animated: true,\n  disabled: false,\n  gradient: true,\n  opacity: (active, disabled) => (active ? 0.5 : disabled ? 0.1 : 0.35),\n  tooltip: (\n    <Tooltip\n      followCursor={true}\n      modifiers={{\n        offset: {\n          offset: '0, 5px'\n        }\n      }}\n    />\n  ),\n  width: 0\n};\n","import React, {\n  Fragment,\n  ReactElement,\n  useCallback,\n  FC,\n  useState,\n  useRef\n} from 'react';\nimport classNames from 'classnames';\nimport { motion } from 'framer-motion';\nimport { ChartInternalDataTypes } from '../../common/data';\nimport { CloneElement } from 'rdk';\nimport { formatValue } from '../../common/utils/formatting';\nimport { Tooltip, TooltipProps } from 'reablocks';\nimport { SankeyLabel, SankeyLabelPosition, SankeyLabelProps } from '../SankeyLabel';\nimport { SankeyNodeExtra, DEFAULT_COLOR } from '../utils';\nimport css from './SankeyNode.module.css';\nimport { useHoverIntent } from '../../common/utils/useHoverIntent';\n\nexport interface SankeyNodeProps extends SankeyNodeExtra {\n  /**\n   * ID of the node. If not provided, the node's index will be used.\n   */\n  id?: string;\n\n  /**\n   * Title of the node.\n   */\n  title: string;\n\n  /**\n   * Color of the node.\n   */\n  color?: string;\n\n  /**\n   * Whether the element is active or not. Set internally by `Sankey`.\n   */\n  active: boolean;\n\n  /**\n   * Whether to animate the enter/update/exit.\n   */\n  animated: boolean;\n\n  /**\n   * Width of the chart. Set internally by `Sankey`.\n   */\n  chartWidth?: number;\n\n  /**\n   * CSS class to apply.\n   */\n  className?: string;\n\n  /**\n   * Whether the node is disabled. Set internally by `Sankey`.\n   */\n  disabled: boolean;\n\n  /**\n   * Label element.\n   */\n  label: ReactElement<SankeyLabelProps, typeof SankeyLabel>;\n\n  /**\n   * Label position. Set internally by `Sankey`.\n   */\n  labelPosition?: SankeyLabelPosition;\n\n  /**\n   * Percentage of total width occupied by labels on \n   * either side of the graph inside the container.\n   * Set internally by `Sankey`.\n   */\n  labelPadding?: number;\n\n  /**\n   * Opacity callback for the node.\n   */\n  opacity: (active: boolean, disabled: boolean) => number;\n\n  /**\n   * CSS styles to apply.\n   */\n  style?: React.StyleHTMLAttributes<SVGRectElement>;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip?: ReactElement<TooltipProps, typeof Tooltip> | null;\n\n  /**\n   * Width of the node. Set internally by `Sankey`.\n   */\n  width?: number;\n\n  /**\n   * Event for when the node is clicked.\n   */\n  onClick?: (event: React.MouseEvent<SVGRectElement>) => void;\n\n  /**\n   * Event for when the node has mouse enter.\n   */\n  onMouseEnter?: (event: React.MouseEvent<SVGRectElement>) => void;\n\n  /**\n   * Event for when the node has mouse leave.\n   */\n  onMouseLeave?: (event: React.MouseEvent<SVGRectElement>) => void;\n}\n\nexport const SankeyNode: FC<Partial<SankeyNodeProps>> = ({\n  active,\n  chartWidth,\n  label,\n  labelPosition,\n  labelPadding,\n  tooltip,\n  title,\n  value,\n  className,\n  color,\n  disabled,\n  index,\n  opacity,\n  style,\n  width,\n  x0,\n  x1,\n  y0,\n  y1,\n  id,\n  sourceLinks,\n  targetLinks,\n  onClick,\n  onMouseEnter,\n  onMouseLeave\n}) => {\n  const node = {\n    id,\n    title,\n    color,\n    sourceLinks,\n    targetLinks,\n    value,\n    index,\n    x0,\n    x1,\n    y0,\n    y1\n  };\n  const nodeWidth = width || (x1 && x0 && x1 - x0 > 0 ? x1 - x0 : 0);\n  const nodeHeight = y1 && y0 && y1 - y0 > 0 ? y1 - y0 : 0;\n\n  const [hovered, setHovered] = useState<boolean>(false);\n  const rectRef = useRef<SVGRectElement | null>(null);\n\n  const renderTooltipContent = useCallback(() => {\n    return (\n      <div className={css.tooltip}>\n        <div className={css.tooltipLabel}>{title}</div>\n        <div className={css.tooltipValue}>\n          {formatValue(value as ChartInternalDataTypes)}\n        </div>\n      </div>\n    );\n  }, [title, value]);\n\n  const { pointerOut, pointerOver } = useHoverIntent({\n    onPointerOver: (event) => {\n      setHovered(true);\n      onMouseEnter?.(event as any);\n    },\n    onPointerOut: (event) => {\n      setHovered(false);\n      onMouseLeave?.(event as any);\n    }\n  });\n\n  return (\n    <Fragment>\n      <motion.g ref={rectRef}>\n        <motion.rect\n          key={`sankey-node-${x0}-${x1}-${y0}-${y1}-${index}`}\n          className={classNames(css.node, className)}\n          fillOpacity={opacity(active, disabled)}\n          style={style}\n          width={nodeWidth}\n          height={nodeHeight}\n          fill={color}\n          initial={{\n            opacity: 0,\n            attrX: x0,\n            attrY: y0\n          }}\n          animate={{\n            opacity: 1,\n            attrX: x0,\n            attrY: y0\n          }}\n          exit={{\n            opacity: 0,\n            attrX: x0,\n            attrY: y0\n          }}\n          transition={{\n            duration: 0.1\n          }}\n          onClick={onClick}\n          onPointerOver={pointerOver}\n          onPointerOut={pointerOut}\n        />\n      </motion.g>\n      {label !== null && (\n        <CloneElement<SankeyLabelProps>\n          active={active}\n          element={label}\n          disabled={disabled}\n          chartWidth={chartWidth}\n          nodeWidth={nodeWidth}\n          node={node}\n          position={labelPosition}\n          labelPadding={labelPadding}\n        />\n      )}\n      {!tooltip?.props?.disabled && (\n        <CloneElement<TooltipProps>\n          content={renderTooltipContent}\n          element={tooltip}\n          visible={hovered}\n          reference={rectRef}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nSankeyNode.defaultProps = {\n  active: false,\n  animated: true,\n  color: DEFAULT_COLOR,\n  disabled: false,\n  label: <SankeyLabel />,\n  opacity: (active, disabled) => (active ? 1 : disabled ? 0.2 : 0.9),\n  tooltip: (\n    <Tooltip\n      followCursor={true}\n      modifiers={{\n        offset: {\n          offset: '0, 5px'\n        }\n      }}\n    />\n  )\n};\n","import React, { FC } from 'react';\nimport { LineChart, LineChartProps } from '../LineChart';\nimport { ChartShallowDataShape } from '../common/data';\nimport { AreaSeries, Line } from '../AreaChart';\nimport { PointSeries } from '../AreaChart';\nimport {\n  LinearXAxis,\n  LinearYAxis,\n  LinearYAxisTickSeries,\n  LinearXAxisTickSeries\n} from '../common/Axis/LinearAxis';\n\nexport interface SparklineChartProps extends LineChartProps {\n  data: ChartShallowDataShape[];\n}\n\nexport const SparklineChart: FC<Partial<SparklineChartProps>> = (props) => <LineChart {...props} />;\n\nSparklineChart.defaultProps = {\n  gridlines: null,\n  series: (\n    <AreaSeries\n      symbols={<PointSeries show=\"hover\" />}\n      interpolation=\"smooth\"\n      markLine={null}\n      area={null}\n      line={<Line strokeWidth={2} />}\n    />\n  ),\n  yAxis: (\n    <LinearYAxis\n      scaled={true}\n      type=\"value\"\n      axisLine={null}\n      tickSeries={<LinearYAxisTickSeries line={null} label={null} />}\n    />\n  ),\n  xAxis: (\n    <LinearXAxis\n      type=\"time\"\n      scaled={true}\n      axisLine={null}\n      tickSeries={<LinearXAxisTickSeries line={null} label={null} />}\n    />\n  )\n};\n","import React, { Component, FC } from 'react';\nimport {\n  AreaChart,\n  AreaChartProps,\n  AreaSeries,\n  Area,\n  Line\n} from '../AreaChart';\nimport { ChartShallowDataShape } from '../common/data';\nimport { PointSeries } from '../AreaChart';\nimport {\n  LinearYAxisTickSeries,\n  LinearYAxis,\n  LinearXAxis,\n  LinearXAxisTickSeries\n} from '../common/Axis/LinearAxis';\nimport { GradientStop, Gradient } from '../common/Gradient';\nimport { Stripes } from '../common/Mask';\n\nexport interface AreaSparklineChartProps extends AreaChartProps {\n  data: ChartShallowDataShape[];\n}\n\nexport const AreaSparklineChart: FC<Partial<AreaSparklineChartProps>> = (props) => <AreaChart {...props} />;\n\nAreaSparklineChart.defaultProps = {\n  gridlines: null,\n  series: (\n    <AreaSeries\n      symbols={<PointSeries show=\"hover\" />}\n      interpolation=\"smooth\"\n      markLine={null}\n      area={\n        <Area\n          mask={<Stripes />}\n          gradient={\n            <Gradient\n              stops={[\n                <GradientStop offset=\"10%\" stopOpacity={0} key=\"start\" />,\n                <GradientStop offset=\"80%\" stopOpacity={1} key=\"stop\" />\n              ]}\n            />\n          }\n        />\n      }\n      line={<Line strokeWidth={3} />}\n    />\n  ),\n  yAxis: (\n    <LinearYAxis\n      type=\"value\"\n      scaled={true}\n      axisLine={null}\n      tickSeries={<LinearYAxisTickSeries line={null} label={null} />}\n    />\n  ),\n  xAxis: (\n    <LinearXAxis\n      type=\"time\"\n      scaled={true}\n      axisLine={null}\n      tickSeries={<LinearXAxisTickSeries line={null} label={null} />}\n    />\n  )\n};\n","import React, { FC } from 'react';\nimport { BarChart, BarChartProps } from '../BarChart';\nimport { ChartShallowDataShape } from '../common/data';\nimport {\n  LinearXAxis,\n  LinearYAxis,\n  LinearYAxisTickSeries,\n  LinearXAxisTickSeries\n} from '../common/Axis';\nimport { BarSeries } from '../BarChart';\nimport { schemes } from '../common/color';\n\nexport interface BarSparklineChartProps extends BarChartProps {\n  data: ChartShallowDataShape[];\n}\n\nexport const BarSparklineChart: FC<Partial<BarSparklineChartProps>> = (props) => <BarChart {...props} />;\n\nBarSparklineChart.defaultProps = {\n  gridlines: null,\n  series: <BarSeries colorScheme={schemes.cybertron[0]} />,\n  yAxis: (\n    <LinearYAxis\n      type=\"value\"\n      axisLine={null}\n      tickSeries={<LinearYAxisTickSeries line={null} label={null} />}\n    />\n  ),\n  xAxis: (\n    <LinearXAxis\n      type=\"category\"\n      axisLine={null}\n      tickSeries={<LinearXAxisTickSeries line={null} label={null} />}\n    />\n  )\n};\n","import React, { FC } from 'react';\nimport {\n  StackedBarChart,\n  StackedBarSeries,\n  Bar,\n  BarChartProps\n} from '../BarChart';\nimport {\n  Gradient,\n  GradientStop,\n  LinearYAxis,\n  LinearXAxis,\n  LinearYAxisTickSeries,\n  LinearXAxisTickSeries,\n  TooltipArea,\n  ChartTooltip,\n  TooltipTemplate,\n  formatValue,\n  ChartNestedDataShape\n} from '../common';\n\nexport interface SonarChartProps extends BarChartProps {\n  data: ChartNestedDataShape[];\n}\n\nexport const SonarChart: FC<Partial<SonarChartProps>> = (props) => (\n  <StackedBarChart\n    {...props}\n    margins={0}\n    gridlines={null}\n    series={\n      <StackedBarSeries\n        type=\"stackedDiverging\"\n        colorScheme=\"rgb(17, 207, 247)\"\n        tooltip={\n          <TooltipArea\n            tooltip={\n              <ChartTooltip\n                followCursor={true}\n                modifiers={{\n                  offset: '5px, 5px'\n                }}\n                content={(data, color) => (\n                  <TooltipTemplate\n                    color={color}\n                    value={{\n                      x: formatValue(data.x),\n                      y: `${formatValue(Math.abs(data.data[0].y))}`\n                    }}\n                  />\n                )}\n              />\n            }\n          />\n        }\n        bar={[\n          <Bar\n            key=\"first\"\n            width={1}\n            rangeLines={null}\n            minHeight={1}\n            gradient={\n              <Gradient\n                stops={[\n                  <GradientStop offset=\"5%\" stopOpacity={0.7} key=\"start\" />,\n                  <GradientStop offset=\"90%\" stopOpacity={1} key=\"stop\" />\n                ]}\n              />\n            }\n          />,\n          <Bar\n            key=\"second\"\n            width={1}\n            rangeLines={null}\n            minHeight={1}\n            gradient={\n              <Gradient\n                stops={[\n                  <GradientStop offset=\"5%\" stopOpacity={1} key=\"stop\" />,\n                  <GradientStop offset=\"90%\" stopOpacity={0.7} key=\"start\" />\n                ]}\n              />\n            }\n          />\n        ]}\n      />\n    }\n    yAxis={\n      <LinearYAxis\n        type=\"value\"\n        axisLine={null}\n        tickSeries={<LinearYAxisTickSeries line={null} label={null} />}\n      />\n    }\n    xAxis={\n      <LinearXAxis\n        type=\"category\"\n        axisLine={null}\n        tickSeries={<LinearXAxisTickSeries line={null} label={null} />}\n      />\n    }\n  />\n);\n","import React, { ReactElement, useCallback, FC, useMemo, Fragment } from 'react';\nimport { ChartInternalShallowDataShape } from '../../common/data';\nimport { radialArea, curveCardinalClosed, curveLinearClosed } from 'd3-shape';\nimport { RadialGradient, RadialGradientProps } from '../../common/Gradient';\nimport { CloneElement } from 'rdk';\nimport { RadialInterpolationTypes } from '../../common/utils/interpolation';\nimport { MotionPath, DEFAULT_TRANSITION } from '../../common/Motion';\n\nexport interface RadialAreaProps {\n  /**\n   * Parsed data shape. Set internally by `RadialAreaChart`.\n   */\n  data: ChartInternalShallowDataShape[];\n\n  /**\n   * Whether to animate the enter/update/exit.\n   */\n  animated: boolean;\n\n  /**\n   * D3 scale for X Axis. Set internally by `RadialAreaChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `RadialAreaChart`.\n   */\n  yScale: any;\n\n  /**\n   * Interpolation for the area. Set internally by `RadialAreaSeries`.\n   */\n  interpolation: RadialInterpolationTypes;\n\n  /**\n   * Color for the area. Set internally by `RadialAreaSeries`.\n   */\n  color: any;\n\n  /**\n   * Id set internally by `RadialAreaSeries`.\n   */\n  id: string;\n\n  /**\n   * The inner radius for the chart center.\n   */\n  innerRadius: number;\n\n  /**\n   * The outer radius for the chart center.\n   */\n  outerRadius: number;\n\n  /**\n   * CSS classes to apply.\n   */\n  className?: string;\n\n  /**\n   * Index of the area in the series. Set internally by `RadialAreaSeries`.\n   */\n  index: number;\n\n  /**\n   * Gradient to apply to the area.\n   */\n  gradient: ReactElement<RadialGradientProps, typeof RadialGradient> | null;\n}\n\nexport const RadialArea: FC<Partial<RadialAreaProps>> = ({\n  id,\n  data,\n  className,\n  yScale,\n  color,\n  animated,\n  index,\n  outerRadius,\n  xScale,\n  innerRadius,\n  interpolation,\n  gradient\n}) => {\n  const transition = useMemo(\n    () =>\n      animated\n        ? {\n          ...DEFAULT_TRANSITION,\n          delay: index * 0.05\n        }\n        : {\n          type: false,\n          delay: 0\n        },\n    [animated, index]\n  );\n\n  const getFill = useCallback(\n    (c: string) => {\n      if (!gradient) {\n        return c;\n      }\n\n      return `url(#${id}-gradient)`;\n    },\n    [id, gradient]\n  );\n\n  const getPath = useCallback(\n    (d: ChartInternalShallowDataShape[]) => {\n      const curve =\n        interpolation === 'smooth' ? curveCardinalClosed : curveLinearClosed;\n\n      const radialFn = radialArea()\n        .angle((dd: any) => xScale(dd.x))\n        .innerRadius((_) => innerRadius!)\n        .outerRadius((d: any) => yScale(d.y))\n        .curve(curve);\n\n      return radialFn(d as any);\n    },\n    [xScale, yScale, interpolation, innerRadius]\n  );\n\n  const enter = useMemo(\n    () => ({\n      d: getPath(data!),\n      opacity: 1\n    }),\n    [data, getPath]\n  );\n\n  const exit = useMemo(() => {\n    const [yStart] = yScale.domain();\n    return {\n      d: getPath(data!.map((d) => ({ ...d, y: yStart }))),\n      opacity: 0\n    };\n  }, [data, getPath, yScale]);\n\n  const fill = color(data, 0);\n\n  return (\n    <Fragment>\n      <MotionPath\n        custom={{\n          enter,\n          exit\n        }}\n        transition={transition}\n        pointerEvents=\"none\"\n        className={className}\n        fill={getFill(color)}\n      />\n      {gradient && (\n        <CloneElement<RadialGradientProps>\n          element={gradient}\n          id={`${id}-gradient`}\n          radius={outerRadius}\n          color={fill}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nRadialArea.defaultProps = {\n  gradient: <RadialGradient />\n};\n","import React, { useCallback, useMemo, FC } from 'react';\nimport { ChartInternalShallowDataShape } from '../../common/data';\nimport { radialLine, curveCardinalClosed, curveLinearClosed } from 'd3-shape';\nimport { RadialInterpolationTypes } from '../../common/utils/interpolation';\nimport { MotionPath, DEFAULT_TRANSITION } from '../../common/Motion';\n\nexport interface RadialLineProps {\n  /**\n   * Parsed data shape. Set internally by `RadialAreaChart`.\n   */\n  data: ChartInternalShallowDataShape[];\n\n  /**\n   * Whether to animate the enter/update/exit. Set internally by `RadialAreaSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * D3 scale for X Axis. Set internally by `RadialAreaChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `RadialAreaChart`.\n   */\n  yScale: any;\n\n  /**\n   * Color for the area. Set internally by `RadialAreaSeries`.\n   */\n  color: any;\n\n  /**\n   * Interpolation for the area. Set internally by `RadialAreaSeries`.\n   */\n  interpolation: RadialInterpolationTypes;\n\n  /**\n   * Index of the area in the series. Set internally by `RadialAreaSeries`.\n   */\n  index: number;\n\n  /**\n   * Stroke width of the line.\n   */\n  strokeWidth: number;\n\n  /**\n   * CSS classes to apply.\n   */\n  className?: string;\n\n  /**\n   * Internal property to identify if there is a area or not.\n   */\n  hasArea: boolean;\n}\n\nexport const RadialLine: FC<Partial<RadialLineProps>> = ({\n  xScale,\n  yScale,\n  className,\n  index,\n  hasArea,\n  color,\n  data,\n  interpolation,\n  strokeWidth,\n  animated\n}) => {\n  const fill = color(data, index);\n\n  const getPath = useCallback(\n    (preData: ChartInternalShallowDataShape[]) => {\n      const curve =\n        interpolation === 'smooth' ? curveCardinalClosed : curveLinearClosed;\n\n      const radialFn = radialLine()\n        .angle((d: any) => xScale(d.x))\n        .radius((d: any) => yScale(d.y))\n        .curve(curve);\n\n      return radialFn(preData as any);\n    },\n    [xScale, yScale, interpolation]\n  );\n\n  const transition = useMemo(\n    () =>\n      animated\n        ? {\n          ...DEFAULT_TRANSITION,\n          delay: hasArea ? 0 : index * 0.05\n        }\n        : {\n          type: false,\n          delay: 0\n        },\n    [animated, index, hasArea]\n  );\n\n  const enter = useMemo(\n    () => ({\n      d: getPath(data!),\n      opacity: 1\n    }),\n    [data, getPath]\n  );\n\n  const exit = useMemo(() => {\n    const [yStart] = yScale.domain();\n    return {\n      d: getPath(data!.map((d) => ({ ...d, y: yStart }))),\n      opacity: 0\n    };\n  }, [data, yScale, getPath]);\n\n  return (\n    <MotionPath\n      custom={{\n        enter,\n        exit\n      }}\n      transition={transition}\n      className={className}\n      pointerEvents=\"none\"\n      stroke={fill}\n      fill=\"none\"\n      strokeWidth={strokeWidth}\n    />\n  );\n};\n\nRadialLine.defaultProps = {\n  strokeWidth: 2,\n  animated: true\n};\n","import React, { FC, useCallback, Fragment, ReactElement } from 'react';\nimport {\n  ChartShallowDataShape,\n  buildShallowChartData,\n  ChartInternalShallowDataShape\n} from '../common/data';\nimport { scaleTime } from 'd3-scale';\nimport { getYDomain, getXDomain } from '../common/utils/domains';\nimport {\n  RadialScatterSeries,\n  RadialScatterSeriesProps\n} from './RadialScatterSeries';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '../common/containers';\nimport { CloneElement } from 'rdk';\nimport { RadialAxisProps, RadialAxis } from '../common/Axis/RadialAxis';\nimport { getRadialYScale } from '../common/scales';\n\nexport interface RadialScatterPlotProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * The series component that renders the scatter components.\n   */\n  series: ReactElement<RadialScatterSeriesProps, typeof RadialScatterSeries>;\n\n  /**\n   * The radial axis component for the chart.\n   */\n  axis: ReactElement<RadialAxisProps, typeof RadialAxis> | null;\n\n  /**\n   * The inner radius for the chart center.\n   */\n  innerRadius: number;\n}\n\nexport const RadialScatterPlot: FC<Partial<RadialScatterPlotProps>> = ({\n  id,\n  width,\n  height,\n  margins,\n  className,\n  containerClassName,\n  innerRadius,\n  series,\n  axis,\n  data\n}) => {\n  const getScales = useCallback(\n    (\n      aggregatedData: ChartInternalShallowDataShape[],\n      outer: number,\n      inner: number\n    ) => {\n      const yDomain = getYDomain({ data: aggregatedData, scaled: false });\n      const xDomain = getXDomain({ data: aggregatedData });\n\n      const xScale = scaleTime()\n        .range([0, 2 * Math.PI])\n        .domain(xDomain);\n\n      const yScale = getRadialYScale(inner, outer, yDomain);\n\n      return {\n        yScale,\n        xScale\n      };\n    },\n    []\n  );\n\n  const renderChart = useCallback(\n    (containerProps: ChartContainerChildProps) => {\n      const { chartWidth, chartHeight, id } = containerProps;\n      const outerRadius = Math.min(chartWidth, chartHeight) / 2;\n      const aggregatedData = buildShallowChartData(data);\n      const { yScale, xScale } = getScales(\n        aggregatedData,\n        outerRadius,\n        innerRadius\n      );\n\n      return (\n        <Fragment>\n          {axis && (\n            <CloneElement<RadialAxisProps>\n              element={axis}\n              xScale={xScale}\n              height={chartHeight}\n              width={chartWidth}\n              innerRadius={innerRadius}\n            />\n          )}\n          <CloneElement<RadialScatterSeriesProps>\n            element={series}\n            id={id}\n            data={aggregatedData}\n            xScale={xScale}\n            yScale={yScale}\n          />\n        </Fragment>\n      );\n    },\n    [data, getScales, innerRadius, series, axis]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      containerClassName={containerClassName}\n      width={width}\n      height={height}\n      margins={margins}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      center={true}\n      className={className}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n","import React, {\n  ReactNode,\n  useRef,\n  Fragment,\n  ReactElement,\n  FC,\n  useState\n} from 'react';\nimport { ChartInternalShallowDataShape } from '../../common/data';\nimport { radialLine } from 'd3-shape';\nimport classNames from 'classnames';\nimport { ChartTooltip, ChartTooltipProps } from '../../common/Tooltip';\nimport { CloneElement } from 'rdk';\nimport { motion } from 'framer-motion';\nimport { DEFAULT_TRANSITION } from '../../common/Motion';\nimport { schemes } from '../../common/color';\nimport css from './RadialScatterPoint.module.css';\n\nexport interface RadialScatterPointProps {\n  /**\n   * Parsed data shape. Set internally by `RadialScatterPlot`.\n   */\n  data: ChartInternalShallowDataShape;\n\n  /**\n   * Index of the element in the series. Set internally by `RadialScatterSeries`.\n   */\n  index: number;\n\n  /**\n   * Whether the element is active or not. Set internally by `RadialScatterSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * D3 scale for X Axis. Set internally by `RadialScatterPlot`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `RadialScatterPlot`.\n   */\n  yScale: any;\n\n  /**\n   * Fill for the element.\n   */\n  fill: string;\n\n  /**\n   * Id set internally by `RadialScatterPlot`.\n   */\n  id: string;\n\n  /**\n   * Color of the circle.\n   */\n  color: any;\n\n  /**\n   * CSS classes to apply.\n   */\n  className?: any;\n\n  /**\n   * Whether the element is active or not. Set internally by `RadialScatterSeries`.\n   */\n  active?: boolean;\n\n  /**\n   * Whether the elment is visiblbe or not.\n   */\n  visible?: (value, index) => boolean;\n\n  /**\n   * Symbol element to render.\n   */\n  symbol: (value) => ReactNode;\n\n  /**\n   * Size of the circle element.\n   */\n  size?: ((d) => number) | number;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Event for when a symbol is clicked.\n   */\n  onClick: (event) => void;\n\n  /**\n   * Event for when the symbol has mouse enter.\n   */\n  onMouseEnter: (event) => void;\n\n  /**\n   * Event for when the symbol has mouse leave.\n   */\n  onMouseLeave: (event) => void;\n}\n\nexport const RadialScatterPoint: FC<Partial<RadialScatterPointProps>> = ({\n  size,\n  data,\n  color,\n  index,\n  symbol,\n  active,\n  tooltip,\n  yScale,\n  xScale,\n  animated,\n  className,\n  ...rest\n}) => {\n  const ref = useRef<any>(null);\n  const [hovered, setHovered] = useState<boolean>(false);\n\n  function onMouseEnter(event: React.MouseEvent) {\n    setHovered(true);\n    rest.onMouseEnter({\n      value: data,\n      nativeEvent: event\n    });\n  }\n\n  function onMouseLeave(event: React.MouseEvent) {\n    setHovered(false);\n    rest.onMouseLeave({\n      value: data,\n      nativeEvent: event\n    });\n  }\n\n  function onClick(event: React.MouseEvent) {\n    rest.onClick({\n      value: data,\n      nativeEvent: event\n    });\n  }\n\n  function getTranslate(data: ChartInternalShallowDataShape) {\n    const fn = radialLine()\n      .radius((d: any) => yScale(d.y))\n      .angle((d: any) => xScale(d.x));\n\n    // Parse the generated path to get point coordinates\n    // Ref: https://bit.ly/2CnZcPl\n    const path = fn([data] as any);\n\n    if (path) {\n      const [translateX, translateY] = path.slice(1).slice(0, -1).split(',');\n\n      return {\n        translateX: parseFloat(translateX),\n        translateY: parseFloat(translateY)\n      };\n    }\n  }\n\n  function getTransition() {\n    if (animated) {\n      return {\n        ...DEFAULT_TRANSITION,\n        delay: index * 0.005\n      };\n    } else {\n      return {\n        type: false,\n        delay: 0\n      };\n    }\n  }\n\n  const fill = typeof color === 'function' ? color(data, index) : color;\n  const transform = getTranslate(data);\n  const sizeVal = typeof size === 'function' ? size(data) : size;\n  const transition = getTransition();\n\n  const [yStart] = yScale.domain();\n  const exitTransform = getTranslate({ ...data, y: yStart });\n\n  return (\n    <Fragment>\n      <motion.g\n        initial={{ ...exitTransform, opacity: 0 }}\n        animate={{ ...transform, opacity: 1 }}\n        exit={{ ...exitTransform, opacity: 0 }}\n        transition={transition}\n        ref={ref}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        onClick={onClick}\n        className={classNames(className, {\n          [css.inactive]: !active\n        })}\n      >\n        {symbol && symbol(data)}\n        {!symbol && <circle r={sizeVal} fill={fill} />}\n      </motion.g>\n      {tooltip && (\n        <CloneElement<ChartTooltipProps>\n          element={tooltip}\n          visible={hovered}\n          reference={ref}\n          value={data}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nRadialScatterPoint.defaultProps = {\n  size: 3,\n  color: schemes.cybertron[0],\n  tooltip: <ChartTooltip />,\n  active: true,\n  onClick: () => undefined,\n  onMouseEnter: () => undefined,\n  onMouseLeave: () => undefined\n};\n","import React, { useState, FC, Fragment, ReactElement, useEffect, useCallback } from 'react';\nimport { ChartInternalShallowDataShape } from '../../common/data';\nimport {\n  RadialScatterPoint,\n  RadialScatterPointProps\n} from './RadialScatterPoint';\nimport { CloneElement } from 'rdk';\nimport { identifier } from 'safe-identifier';\n\nexport interface RadialScatterSeriesProps {\n  /**\n   * Point that is rendered.\n   */\n  point: ReactElement<RadialScatterPointProps, typeof RadialScatterPoint>;\n\n  /**\n   * D3 scale for X Axis. Set internally by `RadialScatterPlot`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `RadialScatterPlot`.\n   */\n  yScale: any;\n\n  /**\n   * Parsed data shape. Set internally by `RadialScatterPlot`.\n   */\n  data: ChartInternalShallowDataShape[];\n\n  /**\n   * Id set internally by `RadialScatterPlot`.\n   */\n  id: string;\n\n  /**\n   * Whether to animate the enter/update/exit.\n   */\n  animated: boolean;\n\n  /**\n   * Active element ids to highlight.\n   */\n  activeIds?: string[];\n}\n\nexport const RadialScatterSeries: FC<Partial<RadialScatterSeriesProps>> = ({\n  data,\n  point,\n  xScale,\n  yScale,\n  animated,\n  activeIds\n}) => {\n  const [internalActiveIds, setInternalActiveIds] = useState<string[] | null>(activeIds);\n\n  useEffect(() => {\n    setInternalActiveIds(activeIds || []);\n  }, [activeIds]);\n\n  const onMouseEnter = useCallback(({ value }) => {\n    // Only perform this on unmanaged activations\n    if (!activeIds) {\n      setInternalActiveIds([value.id]);\n    }\n  }, [activeIds]);\n\n  const onMouseLeave = useCallback(() => {\n    // Only perform this on unmanaged activations\n    if (!activeIds) {\n      setInternalActiveIds([]);\n    }\n  }, [activeIds]);\n\n  const renderPoint = useCallback((d: ChartInternalShallowDataShape, index: number) => {\n    let dataId;\n    if (d.id) {\n      dataId = d.id;\n    } else {\n      console.warn(\n        'No \\'id\\' property provided for scatter point; provide one via \\'id\\'.'\n      );\n    }\n\n    const key = identifier(`${dataId || index}`);\n    const active =\n      !(internalActiveIds && internalActiveIds.length) || internalActiveIds.includes(dataId);\n\n    const visible = point.props.visible;\n    if (visible && !visible(d, index)) {\n      return <Fragment key={key} />;\n    }\n\n    return (\n      <CloneElement<RadialScatterPointProps>\n        element={point}\n        key={key}\n        data={d}\n        index={index}\n        active={active}\n        xScale={xScale}\n        yScale={yScale}\n        animated={animated}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n      />\n    );\n  }, [point, internalActiveIds, xScale, yScale, animated, onMouseEnter, onMouseLeave]);\n\n  return <Fragment>{data.map(renderPoint)}</Fragment>;\n};\n\nRadialScatterSeries.defaultProps = {\n  point: <RadialScatterPoint />,\n  animated: true\n};\n","import React, { useCallback, ReactElement, FC } from 'react';\nimport {\n  RadialScatterSeries,\n  RadialScatterPoint,\n  RadialScatterPointProps\n} from '../../RadialScatterPlot';\nimport { ChartInternalShallowDataShape } from '../../common/data';\nimport { CloneElement } from 'rdk';\nimport isEqual from 'react-fast-compare';\n\nexport interface RadialPointSeriesProps {\n  /**\n   * Whether the points are animated or not.\n   */\n  animated: boolean;\n\n  /**\n   * Color scheme.\n   */\n  color: any;\n\n  /**\n   * Index of the area in the series. Set internally by `RadialAreaSeries`.\n   */\n  index: number;\n\n  /**\n   * Active values set by parent.\n   */\n  activeValues?: any;\n\n  /**\n   * Parsed data object.\n   */\n  data: ChartInternalShallowDataShape[];\n\n  /**\n   * D3 X-Scale.\n   */\n  yScale: any;\n\n  /**\n   * D3 Y-Scale.\n   */\n  xScale: any;\n\n  /**\n   * When to show the point.\n   */\n  show: boolean | 'hover' | 'first' | 'last';\n\n  /**\n   * Point react component.\n   */\n  point: ReactElement<RadialScatterPointProps, typeof RadialScatterPoint>;\n}\n\nexport const RadialPointSeries: FC<Partial<RadialPointSeriesProps>> = ({\n  data,\n  xScale,\n  yScale,\n  animated,\n  color,\n  activeValues,\n  show,\n  point\n}) => {\n  const isVisible = useCallback(\n    (point: ChartInternalShallowDataShape, index: number) => {\n      const isActive =\n        activeValues && point && isEqual(activeValues.x, point.x);\n\n      if (show === 'hover') {\n        return isActive;\n      } else if (show === 'first') {\n        if (activeValues) {\n          return isActive;\n        } else {\n          return index === 0;\n        }\n      } else if (show === 'last') {\n        if (activeValues) {\n          return isActive;\n        } else {\n          return index === data!.length - 1;\n        }\n      }\n\n      return show;\n    },\n    [data, activeValues, show]\n  );\n\n  return (\n    <RadialScatterSeries\n      animated={animated}\n      data={data}\n      xScale={xScale}\n      yScale={yScale}\n      point={\n        <CloneElement<RadialScatterPointProps>\n          element={point}\n          color={color}\n          tooltip={null}\n          visible={isVisible}\n        />\n      }\n    />\n  );\n};\n\nRadialPointSeries.defaultProps = {\n  show: 'hover',\n  type: 'standard',\n  point: <RadialScatterPoint />\n};\n","import React, {\n  FC,\n  Fragment,\n  ReactElement,\n  useCallback,\n  useState\n} from 'react';\nimport {\n  ChartInternalNestedDataShape,\n  ChartInternalShallowDataShape\n} from '../../common/data';\nimport { getColor, ColorSchemeType, schemes } from '../../common/color';\nimport { CloneElement } from 'rdk';\nimport { RadialAreaProps, RadialArea } from './RadialArea';\nimport { RadialLine, RadialLineProps } from './RadialLine';\nimport { RadialInterpolationTypes } from '../../common/utils/interpolation';\nimport { RadialPointSeries, RadialPointSeriesProps } from './RadialPointSeries';\nimport { TooltipAreaProps, TooltipArea } from '../../common/Tooltip';\n\nexport type RadialPointSeriesType = 'standard' | 'grouped';\n\nexport interface RadialAreaSeriesProps {\n  /**\n   * Parsed data shape. Set internally by `RadialAreaChart`.\n   */\n  data: ChartInternalShallowDataShape[];\n\n  /**\n   * The type of the chart.\n   */\n  type?: RadialPointSeriesType;\n\n  /**\n   * Color scheme for the series.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * The outer radius for the chart center.\n   */\n  outerRadius: number;\n\n  /**\n   * The inner radius for the chart center.\n   */\n  innerRadius: number;\n\n  /**\n   * D3 scale for X Axis. Set internally by `RadialAreaChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `RadialAreaChart`.\n   */\n  yScale: any;\n\n  /**\n   * Id set internally by `RadialAreaChart`.\n   */\n  id: string;\n\n  /**\n   * interpolation set internally by `RadialAreaChart`.\n   */\n  interpolation: RadialInterpolationTypes;\n\n  /**\n   * Whether to animate the enter/update/exit.\n   */\n  animated: boolean;\n\n  /**\n   * Height of the chart. Set internally by `RadialAreaChart`.\n   */\n  height: number;\n\n  /**\n   * Width of the chart. Set internally by `RadialAreaChart`.\n   */\n  width: number;\n\n  /**\n   * Area that is rendered.\n   */\n  area: ReactElement<RadialAreaProps, typeof RadialArea> | null;\n\n  /**\n   * Line that is rendered.\n   */\n  line: ReactElement<RadialLineProps, typeof RadialLine> | null;\n\n  /**\n   * Symbols used to show points.\n   */\n  symbols: ReactElement<\n    RadialPointSeriesProps,\n    typeof RadialPointSeries\n  > | null;\n\n  /**\n   * Tooltip for the chart area.\n   */\n  tooltip: ReactElement<TooltipAreaProps, typeof TooltipArea>;\n}\n\nexport const RadialAreaSeries: FC<Partial<RadialAreaSeriesProps>> = ({\n  area,\n  line,\n  symbols,\n  tooltip,\n  xScale,\n  yScale,\n  data,\n  id,\n  animated,\n  width,\n  height,\n  innerRadius,\n  outerRadius,\n  type,\n  colorScheme,\n  interpolation\n}) => {\n  const [activeValues, setActiveValues] = useState<any | null>(null);\n  const isMulti = type === 'grouped';\n\n  const getColorForPoint = useCallback(\n    (point: ChartInternalShallowDataShape, index: number) => {\n      const key = Array.isArray(point) ? point?.[0]?.key : point?.key;\n\n      return getColor({\n        colorScheme,\n        data,\n        index,\n        point,\n        key\n      });\n    },\n    [colorScheme, data]\n  );\n\n  const renderArea = useCallback(\n    (point: ChartInternalShallowDataShape[], index = 0) => (\n      <>\n        {area && (\n          <CloneElement<RadialAreaProps>\n            element={area}\n            id={`${id}-radial-area-${index}`}\n            xScale={xScale}\n            yScale={yScale}\n            animated={animated}\n            color={getColorForPoint}\n            index={index}\n            data={point}\n            interpolation={interpolation}\n            outerRadius={outerRadius}\n            innerRadius={innerRadius}\n          />\n        )}\n        {line && (\n          <CloneElement<RadialLineProps>\n            element={line}\n            xScale={xScale}\n            yScale={yScale}\n            hasArea={area !== null}\n            index={index}\n            animated={animated}\n            interpolation={interpolation}\n            color={getColorForPoint}\n            data={point}\n          />\n        )}\n      </>\n    ),\n    [\n      animated,\n      area,\n      getColorForPoint,\n      id,\n      innerRadius,\n      interpolation,\n      line,\n      outerRadius,\n      xScale,\n      yScale\n    ]\n  );\n\n  const renderSymbols = useCallback(\n    (data: ChartInternalShallowDataShape[], index = 0) => {\n      // Animations are only valid for Area\n      const activeSymbols =\n        (symbols && symbols.props.activeValues) || activeValues;\n      const isAnimated = area !== undefined && animated && !activeSymbols;\n\n      return (\n        <CloneElement<RadialPointSeriesProps>\n          element={symbols}\n          activeValues={activeValues}\n          xScale={xScale}\n          index={index}\n          yScale={yScale}\n          data={data}\n          animated={isAnimated}\n          color={getColorForPoint}\n        />\n      );\n    },\n    [activeValues, animated, area, getColorForPoint, symbols, xScale, yScale]\n  );\n\n  const renderSingleSeries = useCallback(\n    (points: ChartInternalShallowDataShape[]) => (\n      <Fragment>\n        {renderArea(points)}\n        {symbols && renderSymbols(points)}\n      </Fragment>\n    ),\n    [renderArea, renderSymbols, symbols]\n  );\n\n  const renderMultiSeries = useCallback(\n    (points: ChartInternalNestedDataShape[]) => (\n      <Fragment>\n        {points\n          .map((point, index) => (\n            <Fragment key={`${point.key!.toString()}`}>\n              {renderArea(point.data, index)}\n            </Fragment>\n          ))\n          .reverse()}\n        {points\n          .map((point, index) => (\n            <Fragment key={`${point.key!.toString()}`}>\n              {renderSymbols(point.data, index)}\n            </Fragment>\n          ))\n          .reverse()}\n      </Fragment>\n    ),\n    [renderArea, renderSymbols]\n  );\n\n  return (\n    <CloneElement<TooltipAreaProps>\n      element={tooltip}\n      xScale={xScale}\n      yScale={yScale}\n      data={data}\n      height={height}\n      width={width}\n      isRadial={true}\n      innerRadius={innerRadius}\n      outerRadius={outerRadius}\n      color={getColorForPoint}\n      onValueEnter={(event) => setActiveValues(event.value)}\n      onValueLeave={() => setActiveValues(null)}\n    >\n      <g clipPath={`url(#${id}-path)`}>\n        {isMulti &&\n          renderMultiSeries(data as unknown as ChartInternalNestedDataShape[])}\n        {!isMulti &&\n          renderSingleSeries(data as ChartInternalShallowDataShape[])}\n      </g>\n    </CloneElement>\n  );\n};\n\nRadialAreaSeries.defaultProps = {\n  colorScheme: schemes.cybertron,\n  interpolation: 'smooth',\n  type: 'standard',\n  animated: true,\n  area: <RadialArea />,\n  line: <RadialLine />,\n  symbols: <RadialPointSeries />,\n  tooltip: <TooltipArea />\n};\n","import React, { Fragment, ReactElement, FC, useCallback } from 'react';\nimport {\n  ChartInternalShallowDataShape,\n  buildShallowChartData,\n  ChartDataShape,\n  buildNestedChartData,\n  ChartNestedDataShape,\n  ChartShallowDataShape\n} from '../common/data';\nimport { scaleTime, scaleBand } from 'd3-scale';\nimport { getYDomain, getXDomain } from '../common/utils/domains';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '../common/containers';\nimport { CloneElement } from 'rdk';\nimport { RadialAreaSeries, RadialAreaSeriesProps } from './RadialAreaSeries';\nimport { RadialAxis, RadialAxisProps } from '../common/Axis/RadialAxis';\nimport { getRadialYScale } from '../common/scales/radial';\nimport { uniqueBy } from '../common/utils';\n\nexport interface RadialAreaChartProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartDataShape[];\n\n  /**\n   * The series component that renders the area components.\n   */\n  series: ReactElement<RadialAreaSeriesProps, typeof RadialAreaSeries>;\n\n  /**\n   * The radial axis component for the chart.\n   */\n  innerRadius: number;\n\n  /**\n   * The inner radius for the chart center.\n   */\n  axis: ReactElement<RadialAxisProps, typeof RadialAxis> | null;\n}\n\nexport const RadialAreaChart: FC<Partial<RadialAreaChartProps>> = ({\n  id,\n  width,\n  height,\n  className,\n  data,\n  containerClassName,\n  innerRadius,\n  series,\n  axis,\n  margins\n}) => {\n  const getXScale = useCallback(\n    (points) => {\n      let xScale;\n      if (axis?.props.type === 'category') {\n        const isMultiSeries = series.props.type === 'grouped';\n\n        let xDomain;\n        if (isMultiSeries) {\n          xDomain = uniqueBy<ChartInternalShallowDataShape>(\n            points,\n            (dd) => dd.data,\n            (dd) => dd.x\n          );\n        } else {\n          xDomain = uniqueBy<ChartInternalShallowDataShape>(\n            points,\n            (dd) => dd.x\n          );\n        }\n\n        xScale = scaleBand()\n          .range([0, 2 * Math.PI])\n          .domain(xDomain as any[]);\n      } else {\n        const xDomain = getXDomain({ data: points });\n\n        xScale = scaleTime()\n          .range([0, 2 * Math.PI])\n          .domain(xDomain);\n      }\n\n      return xScale;\n    },\n    [axis?.props.type, series.props.type]\n  );\n\n  const getScales = useCallback(\n    (preData: ChartDataShape[], outerRadius: number, innerRadius: number) => {\n      const isMultiSeries = series.props.type === 'grouped';\n\n      let d;\n      if (isMultiSeries) {\n        d = buildNestedChartData(preData as ChartNestedDataShape[], true);\n      } else {\n        d = buildShallowChartData(preData as ChartShallowDataShape[]);\n      }\n\n      const xScale = getXScale(d);\n      const yDomain = getYDomain({ data: d, scaled: false });\n      const yScale = getRadialYScale(innerRadius, outerRadius, yDomain);\n\n      return {\n        yScale,\n        xScale,\n        result: d\n      };\n    },\n    [getXScale, series.props.type]\n  );\n\n  const renderChart = useCallback(\n    (containerProps: ChartContainerChildProps) => {\n      const { chartWidth, chartHeight, id } = containerProps;\n      const outerRadius = Math.min(chartWidth, chartHeight) / 2;\n      const { yScale, xScale, result } = getScales(\n        data!,\n        outerRadius,\n        innerRadius\n      );\n\n      return (\n        <Fragment>\n          {axis && (\n            <CloneElement<RadialAxisProps>\n              element={axis}\n              xScale={xScale}\n              height={chartHeight}\n              width={chartWidth}\n              innerRadius={innerRadius}\n            />\n          )}\n          <CloneElement<RadialAreaSeriesProps>\n            element={series}\n            id={id}\n            data={result}\n            xScale={xScale}\n            yScale={yScale}\n            height={chartHeight}\n            width={chartWidth}\n            outerRadius={outerRadius}\n            innerRadius={innerRadius}\n          />\n        </Fragment>\n      );\n    },\n    [getScales, data, innerRadius, axis, series]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      containerClassName={containerClassName}\n      margins={margins}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      center={true}\n      className={className}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n\nRadialAreaChart.defaultProps = {\n  innerRadius: 0.1,\n  series: <RadialAreaSeries />,\n  axis: <RadialAxis />,\n  margins: 75\n};\n","const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction append(strings) {\n  this._ += strings[0];\n  for (let i = 1, n = strings.length; i < n; ++i) {\n    this._ += arguments[i] + strings[i];\n  }\n}\n\nfunction appendRound(digits) {\n  let d = Math.floor(digits);\n  if (!(d >= 0)) throw new Error(`invalid digits: ${digits}`);\n  if (d > 15) return append;\n  const k = 10 ** d;\n  return function(strings) {\n    this._ += strings[0];\n    for (let i = 1, n = strings.length; i < n; ++i) {\n      this._ += Math.round(arguments[i] * k) / k + strings[i];\n    }\n  };\n}\n\nexport class Path {\n  constructor(digits) {\n    this._x0 = this._y0 = // start of current subpath\n    this._x1 = this._y1 = null; // end of current subpath\n    this._ = \"\";\n    this._append = digits == null ? append : appendRound(digits);\n  }\n  moveTo(x, y) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}`;\n  }\n  closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._append`Z`;\n    }\n  }\n  lineTo(x, y) {\n    this._append`L${this._x1 = +x},${this._y1 = +y}`;\n  }\n  quadraticCurveTo(x1, y1, x, y) {\n    this._append`Q${+x1},${+y1},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  bezierCurveTo(x1, y1, x2, y2, x, y) {\n    this._append`C${+x1},${+y1},${+x2},${+y2},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  arcTo(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._append`M${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._append`L${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      let x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._append`L${x1 + t01 * x01},${y1 + t01 * y01}`;\n      }\n\n      this._append`A${r},${r},0,0,${+(y01 * x20 > x01 * y20)},${this._x1 = x1 + t21 * x21},${this._y1 = y1 + t21 * y21}`;\n    }\n  }\n  arc(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._append`M${x0},${y0}`;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._append`L${x0},${y0}`;\n    }\n\n    // Is this arc empty? Were done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._append`A${r},${r},0,1,${cw},${x - dx},${y - dy}A${r},${r},0,1,${cw},${this._x1 = x0},${this._y1 = y0}`;\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._append`A${r},${r},0,${+(da >= pi)},${cw},${this._x1 = x + r * Math.cos(a1)},${this._y1 = y + r * Math.sin(a1)}`;\n    }\n  }\n  rect(x, y, w, h) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}h${w = +w}v${+h}h${-w}Z`;\n  }\n  toString() {\n    return this._;\n  }\n}\n\nexport function path() {\n  return new Path;\n}\n\n// Allow instanceof d3.path\npath.prototype = Path.prototype;\n\nexport function pathRound(digits = 3) {\n  return new Path(+digits);\n}\n","import React, { useEffect } from 'react';\nimport { motion, useMotionValue, useSpring } from 'framer-motion';\nimport { interpolate } from 'd3-interpolate';\nimport { DEFAULT_TRANSITION } from '../../common/Motion';\n\nexport const MotionBar = ({ custom, transition, arc, ...rest }) => {\n  const d = useMotionValue('');\n  const prevPath = useMotionValue(custom.exit);\n  const spring = useSpring(prevPath, {\n    ...DEFAULT_TRANSITION,\n    from: 0,\n    to: 1\n  });\n\n  useEffect(() => {\n    const from = custom.previousEnter\n      ? custom.previousEnter.y\n      : prevPath.get().y;\n    const interpolator = interpolate(from, custom.enter.y);\n    const unsub = spring.onChange((v) =>\n      d.set(arc({ ...custom.enter, y: interpolator(v) }))\n    );\n    prevPath.set(custom.enter);\n    return unsub;\n  });\n\n  const { d: enterD, ...enterRest } = custom.enter;\n  const { d: exitD, ...exitRest } = custom.exit;\n\n  return (\n    <motion.path\n      {...rest}\n      initial={exitRest}\n      exit={exitRest}\n      animate={enterRest}\n      transition={transition}\n      d={transition.type !== false ? d : enterD}\n    />\n  );\n};\n","import React, { FC } from 'react';\nimport { motion } from 'framer-motion';\n\nexport interface RadialGuideBarProps {\n  active: boolean;\n  path: string;\n  fill?: string;\n  opacity?: number;\n}\n\nexport const RadialGuideBar: FC<Partial<RadialGuideBarProps>> = ({\n  active,\n  path,\n  fill = '#eee',\n  opacity = 0.2\n}) => (\n  <motion.path\n    d={path}\n    fill={fill}\n    pointerEvents=\"none\"\n    initial=\"hidden\"\n    animate={active ? 'visible' : 'hidden'}\n    variants={{\n      hidden: { opacity: 0 },\n      visible: { opacity }\n    }}\n  />\n);\n\nRadialGuideBar.defaultProps = {\n  fill: '#eee',\n  opacity: 0.2\n};\n","import React, {\n  Component,\n  FC,\n  Fragment,\n  ReactElement,\n  useCallback,\n  useMemo,\n  useRef\n} from 'react';\nimport { ChartInternalShallowDataShape } from '../../common/data';\nimport { arc } from 'd3-shape';\nimport { Gradient } from '../../common/Gradient';\nimport bind from 'memoize-bind';\nimport chroma from 'chroma-js';\nimport { path } from 'd3-path';\nimport { DEFAULT_TRANSITION } from '../../common/Motion';\nimport { MotionBar } from './MotionBar';\nimport { RadialGuideBar, RadialGuideBarProps } from './RadialGuideBar';\nimport { CloneElement } from 'rdk';\n\nexport interface RadialBarProps {\n  /**\n   * Parsed data shape. Set internally by `RadialBarChart`.\n   */\n  data: ChartInternalShallowDataShape;\n\n  /**\n   * The inner radius for the chart center.\n   */\n  innerRadius: number;\n\n  /**\n   * Index of the element in the series. Set internally by `RadialBarSeries`.\n   */\n  index: number;\n\n  /**\n   * Whether the element is active or not. Set internally by `RadialBarSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * D3 scale for X Axis. Set internally by `RadialBarChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `RadialBarChart`.\n   */\n  yScale: any;\n\n  /**\n   * Color of the bar.\n   */\n  color: any;\n\n  /**\n   * Whether to use gradient or not.\n   */\n  gradient: boolean;\n\n  /**\n   * Id set internally by `RadialBarSeries`.\n   */\n  id: string;\n\n  /**\n   * Total number of bars used for animation. Set internally by `RadialBarSeries`.\n   */\n  barCount: number;\n\n  /**\n   * CSS classes to apply.\n   */\n  className?: any;\n\n  /**\n   * Whether the bar is curved or not.\n   */\n  curved: boolean;\n\n  /**\n   * Guide bar component.\n   */\n  guide: ReactElement<RadialGuideBarProps, typeof RadialGuideBar> | null;\n\n  /**\n   * Active caused by hover.\n   */\n  active: boolean;\n\n  /**\n   * Event for when a symbol is clicked.\n   */\n  onClick: (event) => void;\n\n  /**\n   * Event for when the symbol has mouse enter.\n   */\n  onMouseEnter: (event) => void;\n\n  /**\n   * Event for when the symbol has mouse leave.\n   */\n  onMouseLeave: (event) => void;\n}\n\nexport const RadialBar: FC<Partial<RadialBarProps>> = ({\n  animated,\n  innerRadius,\n  xScale,\n  yScale,\n  curved,\n  id,\n  gradient,\n  barCount,\n  className,\n  data,\n  active,\n  guide,\n  index,\n  color,\n  onClick,\n  onMouseEnter,\n  onMouseLeave\n}) => {\n  const previousEnter = useRef<any | null>(null);\n  const fill = color(data, index);\n  const currentColorShade = active ? chroma(fill).brighten(0.5) : fill;\n\n  const transition = useMemo(() => {\n    // const { animated, barCount, index } = this.props;\n\n    if (animated) {\n      return {\n        ...DEFAULT_TRANSITION,\n        delay: (index / barCount) * 0.5\n      };\n    } else {\n      return {\n        type: false,\n        delay: 0\n      };\n    }\n  }, [animated, barCount, index]);\n\n  const getFill = useCallback(\n    (color: string) => {\n      if (!gradient) {\n        return color;\n      }\n\n      return `url(#${id}-gradient)`;\n    },\n    [gradient, id]\n  );\n\n  const getArc = useCallback(\n    (data: ChartInternalShallowDataShape) => {\n      const outerRadius = yScale(data.y);\n\n      if (curved) {\n        const startAngle = xScale(data.x);\n        const endAngle = startAngle + xScale.bandwidth();\n\n        const arcFn = arc()\n          .innerRadius(innerRadius)\n          .outerRadius(outerRadius)\n          .startAngle(startAngle)\n          .endAngle(endAngle)\n          .padAngle(0.01)\n          .padRadius(innerRadius);\n\n        return arcFn(data as any);\n      } else {\n        const startAngle = xScale(data.x) - Math.PI * 0.5;\n        const endAngle = startAngle + xScale.bandwidth();\n\n        const innerAngleDistance = endAngle - startAngle;\n        const arcLength = innerRadius * innerAngleDistance;\n        const outerAngleDistance = arcLength / outerRadius;\n        const halfAngleDistanceDelta =\n          (innerAngleDistance - outerAngleDistance) / 2;\n\n        const pathFn = path();\n        pathFn.arc(0, 0, innerRadius, startAngle, endAngle);\n        pathFn.arc(\n          0,\n          0,\n          outerRadius,\n          endAngle - halfAngleDistanceDelta,\n          startAngle + halfAngleDistanceDelta,\n          true\n        );\n\n        return pathFn.toString();\n      }\n    },\n    [curved, innerRadius, xScale, yScale]\n  );\n\n  const renderBar = useCallback(\n    (color: string) => {\n      const fill = getFill(color);\n\n      // Track previous props\n      const prev = previousEnter.current\n        ? { ...previousEnter.current }\n        : undefined;\n      previousEnter.current = { ...data };\n\n      const [yStart, yEnd] = yScale.domain();\n      const exit = {\n        ...data,\n        y: yStart\n      };\n\n      const guidePath = getArc({\n        ...data,\n        y: yEnd\n      }) as string;\n\n      return (\n        <Fragment>\n          {guide && (\n            <CloneElement<RadialGuideBarProps>\n              element={guide}\n              active={active}\n              path={guidePath}\n            />\n          )}\n          <MotionBar\n            arc={getArc}\n            custom={{\n              enter: data,\n              exit,\n              previousEnter: prev\n            }}\n            transition={transition}\n            fill={fill}\n            className={className}\n            onMouseEnter={(event) =>\n              onMouseEnter({\n                value: data,\n                nativeEvent: event\n              })\n            }\n            onMouseLeave={(event) =>\n              onMouseLeave({\n                value: data,\n                nativeEvent: event\n              })\n            }\n            onClick={(event) =>\n              onClick({\n                value: data,\n                nativeEvent: event\n              })\n            }\n          />\n        </Fragment>\n      );\n    },\n    [\n      active,\n      className,\n      data,\n      getArc,\n      getFill,\n      guide,\n      onClick,\n      onMouseEnter,\n      onMouseLeave,\n      transition,\n      yScale\n    ]\n  );\n\n  return (\n    <Fragment>\n      {renderBar(currentColorShade)}\n      {gradient && <Gradient id={`${id}-gradient`} color={currentColorShade} />}\n    </Fragment>\n  );\n};\n\nRadialBar.defaultProps = {\n  gradient: true,\n  curved: false,\n  guide: <RadialGuideBar />,\n  onClick: () => undefined,\n  onMouseEnter: () => undefined,\n  onMouseLeave: () => undefined\n};\n","import React, {\n  FC,\n  Fragment,\n  ReactElement,\n  useState,\n  useCallback\n} from 'react';\nimport { ChartInternalShallowDataShape } from '../../common/data';\nimport { RadialBar, RadialBarProps } from './RadialBar';\nimport { CloneElement } from 'rdk';\nimport { ColorSchemeType, getColor, schemes } from '../../common/color';\nimport {\n  TooltipAreaProps,\n  TooltipArea,\n  ChartTooltip\n} from '../../common/Tooltip';\nimport isEqual from 'react-fast-compare';\n\nexport interface RadialBarSeriesProps {\n  /**\n   * Parsed data shape. Set internally by `RadialBarChart`.\n   */\n  data: ChartInternalShallowDataShape[];\n\n  /**\n   * Color scheme for the series.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * The inner radius for the chart center.\n   */\n  innerRadius: number;\n\n  /**\n   * The outer radius for the chart center.\n   */\n  outerRadius: number;\n\n  /**\n   * D3 scale for X Axis. Set internally by `RadialBarChart`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `RadialBarChart`.\n   */\n  yScale: any;\n\n  /**\n   * Id set internally by `RadialBarChart`.\n   */\n  id: string;\n\n  /**\n   * Bar that is rendered.\n   */\n  bar: ReactElement<RadialBarProps, typeof RadialBar>;\n\n  /**\n   * Whether to animate the enter/update/exit.\n   */\n  animated: boolean;\n\n  /**\n   * Height of the chart. Set internally by `RadialBarChart`.\n   */\n  height: number;\n\n  /**\n   * Width of the chart. Set internally by `RadialBarChart`.\n   */\n  width: number;\n\n  /**\n   * Tooltip for the chart area.\n   */\n  tooltip: ReactElement<TooltipAreaProps, typeof TooltipArea>;\n}\n\nexport const RadialBarSeries: FC<Partial<RadialBarSeriesProps>> = ({\n  data,\n  id,\n  innerRadius,\n  outerRadius,\n  xScale,\n  yScale,\n  height,\n  width,\n  tooltip,\n  colorScheme,\n  bar,\n  animated\n}) => {\n  const [activeValues, setActiveValues] = useState<any | null>(null);\n\n  const renderBar = useCallback(\n    (point: ChartInternalShallowDataShape, index: number) => {\n      const active = activeValues && data && isEqual(activeValues.x, point.x);\n\n      return (\n        <Fragment key={index}>\n          <CloneElement<RadialBarProps>\n            element={bar}\n            id={`radialbar-${id}-${index}`}\n            index={index}\n            data={point}\n            xScale={xScale}\n            active={active}\n            yScale={yScale}\n            innerRadius={innerRadius}\n            color={(point) => getColor({ data, point, index: 0, colorScheme })}\n            barCount={data.length}\n            animated={animated}\n          />\n        </Fragment>\n      );\n    },\n    [\n      activeValues,\n      animated,\n      bar,\n      colorScheme,\n      data,\n      id,\n      innerRadius,\n      xScale,\n      yScale\n    ]\n  );\n\n  return (\n    <CloneElement<TooltipAreaProps>\n      element={tooltip}\n      xScale={xScale}\n      yScale={yScale}\n      data={data}\n      height={height}\n      width={width}\n      isRadial={true}\n      innerRadius={innerRadius}\n      outerRadius={outerRadius}\n      onValueEnter={(event) => setActiveValues(event.value)}\n      onValueLeave={() => setActiveValues(null)}\n      color={(point, index) => getColor({ data, point, index, colorScheme })}\n    >\n      <g clipPath={`url(#${id}-path)`}>{data.map(renderBar)}</g>\n    </CloneElement>\n  );\n};\n\nRadialBarSeries.defaultProps = {\n  colorScheme: schemes.cybertron[0],\n  tooltip: <TooltipArea tooltip={<ChartTooltip followCursor={true} />} />,\n  bar: <RadialBar />,\n  animated: true\n};\n","import React, { useCallback, FC, Fragment, ReactElement } from 'react';\nimport {\n  ChartShallowDataShape,\n  ChartInternalShallowDataShape,\n  buildShallowChartData\n} from '../common/data';\nimport { scaleBand } from 'd3-scale';\nimport { getYDomain } from '../common/utils/domains';\nimport { RadialBarSeries, RadialBarSeriesProps } from './RadialBarSeries';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '../common/containers';\nimport { CloneElement } from 'rdk';\nimport { RadialAxis, RadialAxisProps } from '../common/Axis/RadialAxis';\nimport { getRadialYScale } from '../common/scales';\nimport { uniqueBy } from '../common/utils/array';\n\nexport interface RadialBarChartProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * The series component that renders the bar components.\n   */\n  series: ReactElement<RadialBarSeriesProps, typeof RadialBarSeries>;\n\n  /**\n   * The radial axis component for the chart.\n   */\n  axis: ReactElement<RadialAxisProps, typeof RadialAxis> | null;\n\n  /**\n   * The inner radius for the chart center.\n   */\n  innerRadius: number;\n}\n\nexport const RadialBarChart: FC<Partial<RadialBarChartProps>> = ({\n  id,\n  width,\n  height,\n  margins,\n  className,\n  containerClassName,\n  data,\n  innerRadius,\n  series,\n  axis\n}) => {\n  const getScales = useCallback(\n    (\n      preData: ChartShallowDataShape[],\n      innerRadius: number,\n      outerRadius: number\n    ) => {\n      const newData = buildShallowChartData(\n        preData\n      ) as ChartInternalShallowDataShape[];\n      const xDomain = uniqueBy(newData, (d) => d.x);\n      const yDomain = getYDomain({ data: newData, scaled: false });\n\n      const xScale = scaleBand()\n        .range([0, 2 * Math.PI])\n        .domain(xDomain as any[]);\n\n      const yScale = getRadialYScale(innerRadius, outerRadius, yDomain);\n\n      return {\n        xScale,\n        yScale,\n        newData\n      };\n    },\n    []\n  );\n\n  const renderChart = useCallback(\n    ({ chartWidth, chartHeight, id }: ChartContainerChildProps) => {\n      const outerRadius = Math.min(chartWidth, chartHeight) / 2;\n      const { yScale, xScale, newData } = getScales(\n        data,\n        innerRadius,\n        outerRadius\n      );\n\n      return (\n        <Fragment>\n          {axis && (\n            <CloneElement<RadialAxisProps>\n              element={axis}\n              xScale={xScale}\n              height={chartHeight}\n              width={chartWidth}\n              innerRadius={innerRadius}\n            />\n          )}\n          <CloneElement<RadialBarSeriesProps>\n            element={series}\n            id={id}\n            data={newData}\n            height={chartHeight}\n            width={chartWidth}\n            xScale={xScale}\n            yScale={yScale}\n            innerRadius={innerRadius}\n            outerRadius={outerRadius}\n          />\n        </Fragment>\n      );\n    },\n    [axis, data, getScales, innerRadius, series]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      center={true}\n      className={className}\n      containerClassName={containerClassName}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n\nRadialBarChart.defaultProps = {\n  innerRadius: 0.1,\n  margins: 75,\n  axis: <RadialAxis />,\n  series: <RadialBarSeries />\n};\n","import React, { FC, ReactElement, useMemo } from 'react';\nimport { arc } from 'd3-shape';\nimport { PieArc, ArcData } from '../../PieChart';\nimport { ChartShallowDataShape } from '../../common/data';\nimport { ChartTooltip, ChartTooltipProps } from '../../common/Tooltip';\n\nexport interface RadialGaugeArcProps {\n  /**\n   * Data set by the `RadialGaugeSeries` components.\n   */\n  data?: ChartShallowDataShape;\n\n  /**\n   * Start angle set by the `RadialGaugeSeries` components.\n   */\n  startAngle: number;\n\n  /**\n   * End angle set by the `RadialGaugeSeries` components.\n   */\n  endAngle: number;\n\n  /**\n   * Inner radius set by the `RadialGaugeSeries` components.\n   */\n  innerRadius: number;\n\n  /**\n   * Outer radius set by the `RadialGaugeSeries` components.\n   */\n  outerRadius: number;\n\n  /**\n   * Color set by the `RadialGaugeSeries` components.\n   */\n  color: any;\n\n  /**\n   * Corner Radius of the arcs, see https://github.com/d3/d3-shape#arc_cornerRadius\n   */\n  cornerRadius?: number;\n\n  /**\n   * Pad Angle between adjacent arcs, see https://github.com/d3/d3-shape#arc_padAngle\n   */\n  padAngle?: number;\n\n  /**\n   * Pad Radius between adjacent arcs, see https://github.com/d3/d3-shape#arc_padRadius\n   */\n  padRadius?: number;\n\n  /**\n   * Animation set by the `RadialGaugeSeries` component.\n   */\n  animated: boolean;\n\n  /**\n   * Disable the interactions.\n   */\n  disabled: boolean;\n\n  /**\n   * Fill the arc.\n   */\n  fill?: string;\n\n  /**\n   * Tooltip component.\n   */\n  tooltip: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Event for when the arc is clicked.\n   */\n  onClick: (event) => void;\n\n  /**\n   * Event for when the arc has mouse enter.\n   */\n  onMouseEnter: (event) => void;\n\n  /**\n   * Event for when the arc has mouse leave.\n   */\n  onMouseLeave: (event) => void;\n}\n\nexport const RadialGaugeArc: FC<Partial<RadialGaugeArcProps>> = ({\n  data,\n  startAngle,\n  endAngle,\n  innerRadius,\n  outerRadius,\n  cornerRadius,\n  padAngle,\n  color,\n  animated,\n  disabled,\n  fill,\n  onClick,\n  onMouseEnter,\n  onMouseLeave,\n  tooltip\n}: Partial<RadialGaugeArcProps>) => {\n  /**\n   * This function will generate the arcs\n   * https://github.com/d3/d3-shape#arcs\n   */\n  const arcGenerator = useMemo(() => {\n    return arc<ArcData>()\n      .innerRadius(innerRadius)\n      .outerRadius(outerRadius)\n      .cornerRadius(cornerRadius);\n  }, [innerRadius, outerRadius, cornerRadius]);\n\n  const arcData: ArcData = {\n    // @ts-ignore Data must be passed\n    data: data || {},\n    startAngle,\n    endAngle,\n    padAngle\n  };\n\n  return (\n    <g>\n      {fill && <circle fill={fill} r={outerRadius} />}\n      <PieArc\n        arc={arcGenerator}\n        data={arcData}\n        animated={animated}\n        color={color}\n        disabled={disabled}\n        tooltip={tooltip}\n        onClick={onClick}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n      />\n    </g>\n  );\n};\n\nRadialGaugeArc.defaultProps = {\n  cornerRadius: 0,\n  padAngle: 0,\n  padRadius: 0,\n  color: '#353d44',\n  animated: true,\n  disabled: false,\n  onClick: () => undefined,\n  onMouseEnter: () => undefined,\n  onMouseLeave: () => undefined,\n  tooltip: <ChartTooltip />\n};\n","import React, { FC } from 'react';\nimport {\n  ChartShallowDataShape,\n  ChartInternalDataTypes\n} from '../../../common/data';\nimport { formatValue } from '../../../common/utils';\nimport classNames from 'classnames';\nimport css from './RadialGaugeLabel.module.css';\n\nexport interface RadialGaugeLabelProps {\n  /**\n   * Data set by the `RadialGaugeSeries` component.\n   */\n  data: ChartShallowDataShape;\n\n  /**\n   * Offset set by the `RadialGaugeSeries` component.\n   */\n  offset: number;\n\n  /**\n   * Classname to apply to the label.\n   */\n  className?: any;\n\n  /**\n   * Label click event.\n   */\n  onClick: (event: { data; nativeEvent }) => void;\n}\n\nexport const RadialGaugeLabel: FC<Partial<RadialGaugeLabelProps>> = ({\n  data,\n  className,\n  offset,\n  onClick = () => undefined\n}) => {\n  const label = formatValue(data.key as ChartInternalDataTypes);\n\n  return (\n    <text\n      x=\"0\"\n      y={offset}\n      textAnchor=\"middle\"\n      // This is only valid when placed below the chart\n      alignmentBaseline={'text-after-edge'}\n      onClick={(nativeEvent) => onClick({ data, nativeEvent })}\n      className={classNames(className, css.valueLabel)}\n    >\n      {label}\n    </text>\n  );\n};\n","import React, { FC } from 'react';\nimport { ChartShallowDataShape } from '../../../common/data';\nimport classNames from 'classnames';\nimport css from './RadialGaugeValueLabel.module.css';\nimport { useCount } from '../../../common/Count';\n\nexport interface RadialGaugeValueLabelProps {\n  /**\n   * Data set by the `RadialGaugeSeries` component.\n   */\n  data: ChartShallowDataShape;\n\n  /**\n   * Classname to apply to the value label.\n   */\n  className?: any;\n}\n\nexport const RadialGaugeValueLabel: FC<Partial<RadialGaugeValueLabelProps>> = ({\n  data,\n  className\n}) => {\n  const ref = useCount({\n    to: data.data as number\n  });\n\n  return (\n    <text\n      dy=\"-0.5em\"\n      x=\"0\"\n      y=\"15\"\n      textAnchor=\"middle\"\n      className={classNames(className, css.valueLabel)}\n      ref={ref}\n    />\n  );\n};\n","import React, { FC } from 'react';\nimport { RadialGaugeArc, RadialGaugeArcProps } from './RadialGaugeArc';\n\nexport const RadialGaugeOuterArc: FC<Partial<RadialGaugeArcProps>> = (\n  props\n) => <RadialGaugeArc {...props} />;\n\nRadialGaugeOuterArc.defaultProps = {\n  animated: false,\n  disabled: true\n};\n","import React, {\n  cloneElement,\n  FC,\n  Fragment,\n  ReactElement,\n  useCallback,\n  useMemo\n} from 'react';\nimport { range, min } from 'd3-array';\nimport { scaleBand } from 'd3-scale';\nimport { ChartShallowDataShape } from '../../common/data';\nimport { ColorSchemeType, getColor } from '../../common/color';\nimport { RadialGaugeArc, RadialGaugeArcProps } from './RadialGaugeArc';\nimport { RadialGaugeLabel, RadialGaugeLabelProps } from './RadialGaugeLabel';\nimport {\n  RadialGaugeValueLabel,\n  RadialGaugeValueLabelProps\n} from './RadialGaugeValueLabel';\nimport { RadialGaugeOuterArc } from './RadialGaugeOuterArc';\n\nexport interface RadialGaugeSeriesProps {\n  /**\n   * Data to render set by `RadialGauge` component.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * D3 scale function set by `RadialGauge` component.\n   */\n  scale: any;\n\n  /**\n   * Start angle set by `RadialGauge` component.\n   */\n  startAngle: number;\n\n  /**\n   * Start angle set by `RadialGauge` component.\n   */\n  endAngle: number;\n\n  /**\n   * The \"thickness\" of the arcs\n   */\n  arcWidth?: number;\n\n  /**\n   * Width set by `RadialGauge` component.\n   */\n  width: number;\n\n  /**\n   * Height set by `RadialGauge` component.\n   */\n  height: number;\n\n  /**\n   * Padding between each gauge.\n   */\n  padding: number;\n\n  /**\n   * Color scheme to apply.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Arc component.\n   */\n  innerArc: ReactElement<RadialGaugeArcProps, typeof RadialGaugeArc>;\n\n  /**\n   * Outer arc component. This is the 'fill' element.\n   */\n  outerArc: ReactElement<RadialGaugeArcProps, typeof RadialGaugeArc> | null;\n\n  /**\n   * Label component.\n   */\n  label: ReactElement<RadialGaugeLabelProps, typeof RadialGaugeLabel> | null;\n\n  /**\n   * Value label component.\n   */\n  valueLabel: ReactElement<\n    RadialGaugeValueLabelProps,\n    typeof RadialGaugeValueLabel\n  > | null;\n\n  /**\n   * Min width for a gauge. Only applicable in multi-series gauges.\n   */\n  minGaugeWidth: number;\n}\n\nexport const RadialGaugeSeries: FC<Partial<RadialGaugeSeriesProps>> = ({\n  data,\n  scale,\n  startAngle,\n  endAngle,\n  arcWidth,\n  outerArc,\n  innerArc,\n  label,\n  valueLabel,\n  colorScheme,\n  padding,\n  minGaugeWidth,\n  ...props\n}) => {\n  const { columns, width, height, xScale, yScale } = useMemo(() => {\n    let rows = 1;\n    let columns = data.length;\n\n    if (props.width / data.length < minGaugeWidth) {\n      while (props.width / columns < minGaugeWidth) {\n        rows += 1;\n        columns = Math.ceil(data.length / rows);\n      }\n    }\n\n    const xScale: any = scaleBand();\n    xScale.domain(range(columns));\n    xScale.rangeRound([0, props.width], 0.1);\n\n    const yScale: any = scaleBand();\n    yScale.domain(range(rows));\n    yScale.rangeRound([0, props.height], 0.1);\n\n    return {\n      columns,\n      xScale,\n      yScale,\n      width: xScale.bandwidth(),\n      height: yScale.bandwidth()\n    };\n  }, [data.length, minGaugeWidth, props.height, props.width]);\n\n  const renderGauge = useCallback(\n    (point: ChartShallowDataShape, index: number) => {\n      const dataEndAngle = scale(point.data as number);\n\n      const outerRadius =\n        (min([width - padding * 2, height - padding * 2]) as number) / 2;\n\n      const innerRadius = outerRadius - arcWidth;\n\n      const labelOffset = height / 2;\n\n      const x = xScale(index % columns);\n      const y = yScale(Math.floor(index / columns));\n\n      const xOffset = x + width / 2;\n      const yOffset = y + height / 2;\n\n      return (\n        <g\n          transform={`translate(${xOffset}, ${yOffset})`}\n          key={point.key.toLocaleString()}\n        >\n          {outerArc &&\n            cloneElement(outerArc, {\n              outerRadius,\n              innerRadius,\n              startAngle,\n              endAngle\n            })}\n          {innerArc &&\n            cloneElement(innerArc, {\n              outerRadius,\n              innerRadius,\n              startAngle,\n              endAngle: dataEndAngle,\n              data: point,\n              color: getColor({\n                data,\n                colorScheme,\n                point,\n                index\n              })\n            })}\n          {valueLabel && cloneElement(valueLabel, { data: point })}\n          {label && cloneElement(label, { data: point, offset: labelOffset })}\n        </g>\n      );\n    },\n    [\n      arcWidth,\n      colorScheme,\n      columns,\n      data,\n      endAngle,\n      height,\n      innerArc,\n      label,\n      outerArc,\n      padding,\n      scale,\n      startAngle,\n      valueLabel,\n      width,\n      xScale,\n      yScale\n    ]\n  );\n\n  return <Fragment>{data.map(renderGauge)}</Fragment>;\n};\n\nRadialGaugeSeries.defaultProps = {\n  arcWidth: 5,\n  outerArc: <RadialGaugeOuterArc />,\n  innerArc: <RadialGaugeArc />,\n  label: <RadialGaugeLabel />,\n  valueLabel: <RadialGaugeValueLabel />,\n  colorScheme: ['#00ECB1'],\n  padding: 20,\n  minGaugeWidth: 50\n};\n","import React, { FC } from 'react';\nimport classNames from 'classnames';\nimport css from './StackedRadialGaugeValueLabel.module.css';\n\nexport interface StackedRadialGaugeValueLabelProps {\n  /**\n   * A label shown at the center\n   */\n  label: string;\n\n  /**\n   * A class name to apply\n   */\n  className?: string;\n\n  /**\n   * A y offset to apply to the label\n   */\n  yOffset?: number;\n}\n\nexport const StackedRadialGaugeValueLabel: FC<\n  Partial<StackedRadialGaugeValueLabelProps>\n> = ({ label, className, yOffset }) => (\n  <>\n    {label && (\n      <text\n        x=\"0\"\n        y={yOffset}\n        textAnchor=\"middle\"\n        alignmentBaseline=\"middle\"\n        className={classNames(className, css.stackedValueLabel)}\n      >\n        {label}\n      </text>\n    )}\n  </>\n);\n\nStackedRadialGaugeValueLabel.defaultProps = {\n  yOffset: 0\n};\n","import React, { cloneElement, FC, ReactElement, useCallback } from 'react';\nimport { range } from 'd3-array';\nimport { scaleBand } from 'd3-scale';\nimport { ChartShallowDataShape } from '../../common/data';\nimport { ColorSchemeType, getColor } from '../../common/color';\nimport { RadialGaugeArc, RadialGaugeArcProps } from './RadialGaugeArc';\nimport {\n  StackedRadialGaugeValueLabel,\n  StackedRadialGaugeValueLabelProps\n} from './StackedRadialGaugeValueLabel';\nimport {\n  StackedRadialGaugeDescriptionLabel,\n  StackedRadialGaugeDescriptionLabelProps\n} from './StackedRadialGaugeDescriptionLabel';\n\nexport interface StackedRadialGaugeSeriesProps {\n  /**\n   * Data to render set by `RadialGauge` component.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * D3 scale function set by `RadialGauge` component.\n   */\n  scale: any;\n\n  /**\n   * Start angle set by `RadialGauge` component.\n   */\n  startAngle: number;\n\n  /**\n   * Start angle set by `RadialGauge` component.\n   */\n  endAngle: number;\n\n  /**\n   * Width set by `RadialGauge` component.\n   */\n  width: number;\n\n  /**\n   * Height set by `RadialGauge` component.\n   */\n  height: number;\n\n  /**\n   * Color scheme to apply.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Arc component.\n   */\n  innerArc: ReactElement<RadialGaugeArcProps, typeof RadialGaugeArc>;\n\n  /**\n   * Outer arc component. This is the 'fill' element.\n   */\n  outerArc: ReactElement<RadialGaugeArcProps, typeof RadialGaugeArc> | null;\n\n  /**\n   * Label component.\n   */\n  label: ReactElement<\n    StackedRadialGaugeValueLabelProps,\n    typeof StackedRadialGaugeValueLabel\n  > | null;\n\n  /**\n   * Description label component.\n   */\n    descriptionLabel: ReactElement<\n    StackedRadialGaugeDescriptionLabelProps,\n    typeof StackedRadialGaugeDescriptionLabel\n  > | null;\n\n  /**\n   * A factor from 0 to 1 determining how much of the Gauge should be filled with arcs\n   */\n  fillFactor: number;\n\n  /**\n   * Padding between the stacked arcs, following d3 bandwidth innerPadding\n   */\n  arcPadding: number;\n}\n\nexport const StackedRadialGaugeSeries: FC<\n  Partial<StackedRadialGaugeSeriesProps>\n> = ({\n  data,\n  width,\n  height,\n  scale,\n  startAngle,\n  endAngle,\n  outerArc,\n  innerArc,\n  label,\n  descriptionLabel,\n  colorScheme,\n  fillFactor,\n  arcPadding\n}) => {\n  const radius = Math.min(width, height) / 2;\n  const innerRadius = radius * (1 - Math.min(fillFactor, 1));\n\n  const rAxis = scaleBand()\n    .domain(range(data.length))\n    .range([innerRadius, radius])\n    .paddingInner(arcPadding);\n\n  const renderStackedGauges = useCallback(\n    (point: ChartShallowDataShape, index: number) => {\n      const dataEndAngle = scale(point.data as number);\n      const outerRadius = rAxis(index as any);\n      const innerRadius = outerRadius - rAxis.bandwidth();\n\n      return (\n        <g key={point.key.toLocaleString()}>\n          {outerArc &&\n            cloneElement(outerArc, {\n              outerRadius,\n              innerRadius,\n              startAngle,\n              endAngle\n            })}\n          {innerArc &&\n            cloneElement(innerArc, {\n              outerRadius,\n              innerRadius,\n              startAngle,\n              endAngle: dataEndAngle,\n              data: point,\n              color: getColor({\n                data,\n                colorScheme,\n                point,\n                index\n              })\n            })}\n        </g>\n      );\n    },\n    [rAxis, colorScheme, data, endAngle, innerArc, outerArc, scale, startAngle]\n  );\n\n  return (\n    <>\n      <g transform={`translate(${width / 2}, ${height / 2})`}>\n        {data.map(renderStackedGauges)}\n        {descriptionLabel}\n        {label}\n      </g>\n    </>\n  );\n};\n\nStackedRadialGaugeSeries.defaultProps = {\n  outerArc: <RadialGaugeArc disabled={true} animated={false} />,\n  innerArc: <RadialGaugeArc animated={true} />,\n  label: <StackedRadialGaugeValueLabel />,\n  colorScheme: ['#00ECB1'],\n  fillFactor: 0.2,\n  arcPadding: 0.15\n};\n","import React, { FC } from 'react';\nimport classNames from 'classnames';\nimport css from './StackedRadialGaugeDescriptionLabel.module.css';\n\nexport interface StackedRadialGaugeDescriptionLabelProps {\n  /**\n   * A label shown at the center\n   */\n  label: string;\n\n  /**\n   * A class name to apply\n   */\n  className?: string;\n\n  /**\n   * A y offset to apply to the label\n   */\n  yOffset?: number;\n}\n\nexport const StackedRadialGaugeDescriptionLabel: FC<\n  Partial<StackedRadialGaugeDescriptionLabelProps>\n> = ({ label, className, yOffset }) => (\n  <>\n    {label && (\n      <text\n        x=\"0\"\n        y={yOffset - 20}\n        textAnchor=\"middle\"\n        alignmentBaseline=\"middle\"\n        className={classNames(className, css.stackedDescriptionLabel)}\n      >\n        {label}\n      </text>\n    )}\n  </>\n);\n\nStackedRadialGaugeDescriptionLabel.defaultProps = {\n  yOffset: 0\n};\n","import React, { cloneElement, FC, ReactElement } from 'react';\nimport { scaleLinear } from 'd3-scale';\nimport { ChartContainer, ChartProps } from '../common/containers';\nimport { ChartShallowDataShape } from '../common/data';\nimport { RadialGaugeSeries, RadialGaugeSeriesProps } from './RadialGaugeSeries';\n\nexport interface RadialGaugeProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * Min value to scale on.\n   */\n  minValue?: number;\n\n  /**\n   * Max value to scale on.\n   */\n  maxValue?: number;\n\n  /**\n   * Start angle for the first value.\n   */\n  startAngle?: number;\n\n  /**\n   * End angle for the last value.\n   */\n  endAngle?: number;\n\n  /**\n   * Gauge series component to render.\n   */\n  series?: ReactElement<RadialGaugeSeriesProps, typeof RadialGaugeSeries>;\n}\n\nexport const RadialGauge: FC<RadialGaugeProps> = ({\n  id,\n  width,\n  height,\n  margins,\n  className,\n  data,\n  minValue,\n  maxValue,\n  startAngle,\n  endAngle,\n  series,\n  containerClassName\n}) => {\n  const scale = scaleLinear()\n    .domain([minValue, maxValue])\n    .range([startAngle, endAngle]);\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      className={className}\n      containerClassName={containerClassName}\n    >\n      {(props) =>\n        cloneElement(series, {\n          scale,\n          data,\n          startAngle,\n          endAngle,\n          width: props.width,\n          height: props.height\n        })\n      }\n    </ChartContainer>\n  );\n};\n\nRadialGauge.defaultProps = {\n  minValue: 0,\n  maxValue: 100,\n  startAngle: 0,\n  endAngle: Math.PI * 2,\n  series: <RadialGaugeSeries />\n};\n","import React, {\n  FC,\n  Fragment,\n  MouseEvent,\n  ReactElement,\n  useMemo,\n  useState,\n  useRef\n} from 'react';\nimport { ChartTooltip, ChartTooltipProps } from '../../common/Tooltip';\nimport { CloneElement } from 'rdk';\nimport {\n  constructFunctionProps,\n  PropFunctionTypes\n} from '../../common/utils/functions';\nimport chroma from 'chroma-js';\nimport classNames from 'classnames';\nimport { motion } from 'framer-motion';\nimport { DEFAULT_TRANSITION } from '../../common/Motion';\nimport { ChartInternalShallowDataShape } from '../../common/data';\nimport css from './HeatmapCell.module.css';\nimport { useHoverIntent } from '../../common/utils/useHoverIntent';\n\nexport type HeatmapCellProps = {\n  /**\n   * X Position set by `HeatmapSeries`.\n   */\n  x: number;\n\n  /**\n   * Y Position set by `HeatmapSeries`.\n   */\n  y: number;\n\n  /**\n   * rx SVG Attribute.\n   */\n  rx: number;\n\n  /**\n   * ry SVG Attribute.\n   */\n  ry: number;\n\n  /**\n   * Height of cell set by `HeatmapSeries`.\n   */\n  height: number;\n\n  /**\n   * Width of cell set by `HeatmapSeries`.\n   */\n  width: number;\n\n  /**\n   * Total count of cells set by `HeatmapSeries`.\n   */\n  cellCount: number;\n\n  /**\n   * Tooltip component.\n   */\n  tooltip: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Fill color set by `HeatmapSeries`.\n   */\n  fill: string;\n\n  /**\n   * Data object set by `Heatmap`.\n   */\n  data: ChartInternalShallowDataShape;\n\n  /**\n   * Whether cell is animated or not set by `HeatmapSeries`.\n   */\n  animated: boolean;\n\n  /**\n   * Cell index set by `HeatmapSeries`.\n   */\n  cellIndex: number;\n\n  /**\n   * Cursor style attribute.\n   */\n  cursor: string;\n\n  /**\n   * Event for when the bar is clicked.\n   */\n  onClick: (event) => void;\n\n  /**\n   * Event for when the bar has mouse enter.\n   */\n  onMouseEnter: (event) => void;\n\n  /**\n   * Event for when the bar has mouse leave.\n   */\n  onMouseLeave: (event) => void;\n} & PropFunctionTypes;\n\ninterface HeatmapCellState {\n  active?: boolean;\n}\n\n// Set padding modifier for the tooltips\nconst modifiers = {\n  offset: {\n    offset: '0, 3px'\n  }\n};\n\nexport const HeatmapCell: FC<Partial<HeatmapCellProps>> = ({\n  rx,\n  ry,\n  cursor,\n  tooltip,\n  onClick,\n  onMouseEnter,\n  onMouseLeave,\n  data,\n  animated,\n  cellIndex,\n  cellCount,\n  fill,\n  x,\n  y,\n  style,\n  className,\n  ...rest\n}) => {\n  const [active, setActive] = useState(false);\n  const rect = useRef<SVGRectElement | null>(null);\n\n  const { pointerOut, pointerOver } = useHoverIntent({\n    onPointerOver: (event) => {\n      setActive(true);\n      onMouseEnter({\n        value: data,\n        nativeEvent: event\n      });\n    },\n    onPointerOut: (event) => {\n      setActive(false);\n      onMouseLeave({\n        value: data,\n        nativeEvent: event\n      });\n    }\n  });\n\n  const onMouseClick = (event: MouseEvent) => {\n    onClick({\n      value: data,\n      nativeEvent: event\n    });\n  };\n\n  const tooltipData = useMemo(\n    () => ({\n      y: data.value,\n      x: `${data.key}  ${data.x}`,\n      data\n    }),\n    [data]\n  );\n\n  const transition = useMemo(() => {\n    if (animated) {\n      return {\n        ...DEFAULT_TRANSITION,\n        delay: (cellIndex / cellCount) * 0.005\n      };\n    } else {\n      return {\n        type: false,\n        delay: 0\n      };\n    }\n  }, [animated, cellIndex, cellCount]);\n\n  const extras = constructFunctionProps({ style, className }, data);\n  const isTransparent = fill === 'transparent';\n  const stroke = active && !isTransparent ? chroma(fill).brighten(1) : fill;\n\n  return (\n    <Fragment>\n      <g ref={rect}>\n        <motion.rect\n          {...rest}\n          fill={fill}\n          stroke={stroke}\n          x={x}\n          y={y}\n          rx={rx}\n          ry={ry}\n          style={{ ...extras.style, cursor }}\n          className={classNames(css.cell, extras.className)}\n          initial={{\n            opacity: 0\n          }}\n          animate={{\n            opacity: 1\n          }}\n          exit={{\n            opacity: 0\n          }}\n          transition={transition}\n          onPointerOver={pointerOver}\n          onPointerOut={pointerOut}\n          onClick={onMouseClick}\n        />\n      </g>\n      {tooltip && !(tooltip.props as any).disabled && !isTransparent && (\n        <CloneElement<ChartTooltipProps>\n          element={tooltip}\n          visible={active}\n          modifiers={(tooltip.props as any).modifiers || modifiers}\n          reference={rect}\n          value={tooltipData}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nHeatmapCell.defaultProps = {\n  rx: 2,\n  ry: 2,\n  cursor: 'auto',\n  tooltip: <ChartTooltip />,\n  onClick: () => undefined,\n  onMouseEnter: () => undefined,\n  onMouseLeave: () => undefined\n};\n","import React, { FC, ReactElement, Fragment } from 'react';\nimport { HeatmapCell, HeatmapCellProps } from './HeatmapCell';\nimport { scaleQuantile } from 'd3-scale';\nimport { uniqueBy } from '../../common/utils/array';\nimport { extent } from 'd3-array';\nimport { CloneElement } from 'rdk';\nimport { ColorSchemeType, getColor } from '../../common/color';\nimport { ChartInternalNestedDataShape } from '../../common/data';\n\nexport interface HeatmapSeriesProps {\n  /**\n   * Padding between cells.\n   */\n  padding: number;\n\n  /**\n   * Id set by `Heatmap`.\n   */\n  id: string;\n\n  /**\n   * Parsed data set by `Heatmap`.\n   */\n  data: ChartInternalNestedDataShape[];\n\n  /**\n   * D3 scale for X Axis. Set internally by `Heatmap`.\n   */\n  xScale: any;\n\n  /**\n   * D3 scale for Y Axis. Set internally by `Heatmap`.\n   */\n  yScale: any;\n\n  /**\n   * Color scheme for the chart.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Color for the empty cell of the chart.\n   */\n  emptyColor: string;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated: boolean;\n\n  /**\n   * Cell component that will be rendered.\n   */\n  cell: ReactElement<HeatmapCellProps, typeof HeatmapCell>;\n}\n\nconst getValueScale = (data, colorScheme, emptyColor) => {\n  const valueDomain = extent(\n    uniqueBy(\n      data,\n      (d) => d.data,\n      (d) => d.value\n    )\n  );\n\n  return (point) => {\n    // For 0 values, lets show a placeholder fill\n    if (point === undefined || point === null) {\n      return emptyColor;\n    }\n\n    return getColor({\n      scale: scaleQuantile,\n      domain: valueDomain,\n      key: point,\n      colorScheme\n    });\n  };\n};\n\nexport const HeatmapSeries: FC<Partial<HeatmapSeriesProps>> = ({\n  animated,\n  emptyColor,\n  colorScheme,\n  cell: cellElement,\n  xScale,\n  yScale,\n  data,\n  id\n}) => {\n  const valueScale = getValueScale(data, colorScheme, emptyColor);\n  const height = yScale.bandwidth();\n  const width = xScale.bandwidth();\n  const cellCount = [...yScale.domain(), ...xScale.domain()].length;\n\n  const renderCell = ({\n    row,\n    cell,\n    rowIndex,\n    cellIndex,\n    width,\n    height,\n    cellCount\n  }) => {\n    const x = xScale(row.key);\n    const y = yScale(cell.x);\n    const fill = valueScale(cell.value);\n\n    return (\n      <CloneElement<HeatmapCellProps>\n        key={`${id}-${rowIndex}-${cellIndex}`}\n        element={cellElement}\n        animated={animated}\n        cellIndex={rowIndex + cellIndex}\n        cellCount={cellCount}\n        x={x}\n        y={y}\n        fill={fill}\n        width={width}\n        height={height}\n        data={cell}\n      />\n    );\n  };\n\n  return (\n    <Fragment>\n      {data.map((row, rowIndex) =>\n        row.data.map((cell, cellIndex) =>\n          renderCell({\n            height,\n            width,\n            valueScale,\n            cellCount,\n            row,\n            cell,\n            rowIndex,\n            cellIndex\n          })\n        )\n      )}\n    </Fragment>\n  );\n};\n\nHeatmapSeries.defaultProps = {\n  padding: 0.1,\n  animated: true,\n  emptyColor: 'rgba(200,200,200,0.08)',\n  colorScheme: ['rgba(28, 107, 86, 0.5)', '#2da283'],\n  cell: <HeatmapCell />\n};\n","import React, { useCallback, Fragment, ReactElement, FC } from 'react';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '../common/containers/ChartContainer';\nimport { ChartNestedDataShape, buildNestedChartData } from '../common/data';\nimport { CloneElement } from 'rdk';\nimport {\n  isAxisVisible,\n  LinearAxisProps,\n  LinearXAxis,\n  LinearYAxis,\n  LinearYAxisTickSeries,\n  LinearXAxisTickSeries,\n  LinearYAxisTickLabel,\n  LinearXAxisTickLabel,\n  LinearAxis\n} from '../common/Axis';\nimport { HeatmapSeries, HeatmapSeriesProps } from './HeatmapSeries';\nimport { scaleBand } from 'd3-scale';\nimport { uniqueBy } from '../common/utils/array';\n\nexport interface HeatmapProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartNestedDataShape[];\n\n  /**\n   * The series component that renders the cell components.\n   */\n  series: ReactElement<HeatmapSeriesProps, typeof HeatmapSeries>;\n\n  /**\n   * The linear axis component for the Y Axis of the chart.\n   */\n  yAxis: ReactElement<LinearAxisProps, typeof LinearAxis>;\n\n  /**\n   * The linear axis component for the X Axis of the chart.\n   */\n  xAxis: ReactElement<LinearAxisProps, typeof LinearAxis>;\n\n  /**\n   * Any secondary axis components. Useful for multi-axis charts.\n   */\n  secondaryAxis?: ReactElement<LinearAxisProps, typeof LinearAxis>[];\n}\n\nexport const Heatmap: FC<Partial<HeatmapProps>> = ({\n  data,\n  margins,\n  series,\n  yAxis,\n  xAxis,\n  secondaryAxis,\n  id,\n  width,\n  height,\n  className,\n  containerClassName\n}) => {\n  const getScalesData = useCallback(\n    (chartHeight: number, chartWidth: number) => {\n      const nestedData = buildNestedChartData(data);\n\n      const xDomain: any =\n        xAxis.props.domain || uniqueBy(nestedData, (d) => d.key);\n\n      const xScale = scaleBand()\n        .range([0, chartWidth])\n        .domain(xDomain)\n        .paddingInner(series.props.padding || 0.1);\n\n      const yDomain: any =\n        yAxis.props.domain ||\n        uniqueBy(\n          nestedData,\n          (d) => d.data,\n          (d) => d.x\n        );\n\n      const yScale = scaleBand()\n        .domain(yDomain)\n        .range([chartHeight, 0])\n        .paddingInner(series.props.padding || 0.1);\n\n      return {\n        yScale,\n        xScale,\n        data: nestedData\n      };\n    },\n    [data, xAxis, yAxis, series]\n  );\n\n  const renderChart = useCallback(\n    (containerProps: ChartContainerChildProps) => {\n      const { chartWidth, chartHeight, updateAxes, id } = containerProps;\n      const {\n        xScale,\n        yScale,\n        data: scalesData\n      } = getScalesData(chartHeight, chartWidth);\n\n      return (\n        <Fragment>\n          <CloneElement<LinearAxisProps>\n            element={xAxis}\n            height={chartHeight}\n            width={chartWidth}\n            scale={xScale}\n            onDimensionsChange={(event) => updateAxes('horizontal', event)}\n          />\n          <CloneElement<LinearAxisProps>\n            element={yAxis}\n            height={chartHeight}\n            width={chartWidth}\n            scale={yScale}\n            onDimensionsChange={(event) => updateAxes('vertical', event)}\n          />\n          {secondaryAxis &&\n            secondaryAxis.map((axis, i) => (\n              <CloneElement<LinearAxisProps>\n                key={i}\n                element={axis}\n                height={chartHeight}\n                width={chartWidth}\n                onDimensionsChange={(event) => updateAxes('horizontal', event)}\n              />\n            ))}\n          <CloneElement<HeatmapSeriesProps>\n            element={series}\n            id={`heat-series-${id}`}\n            data={scalesData}\n            xScale={xScale}\n            yScale={yScale}\n          />\n        </Fragment>\n      );\n    },\n    [getScalesData, secondaryAxis, series, xAxis, yAxis]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      containerClassName={containerClassName}\n      xAxisVisible={isAxisVisible(xAxis.props)}\n      yAxisVisible={isAxisVisible(yAxis.props)}\n      className={className}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n\nHeatmap.defaultProps = {\n  data: [],\n  margins: 10,\n  series: <HeatmapSeries padding={0.3} />,\n  yAxis: (\n    <LinearYAxis\n      type=\"category\"\n      axisLine={null}\n      tickSeries={\n        <LinearYAxisTickSeries\n          line={null}\n          label={<LinearYAxisTickLabel padding={5} />}\n        />\n      }\n    />\n  ),\n  xAxis: (\n    <LinearXAxis\n      type=\"category\"\n      axisLine={null}\n      tickSeries={\n        <LinearXAxisTickSeries\n          line={null}\n          label={<LinearXAxisTickLabel padding={5} />}\n        />\n      }\n    />\n  )\n};\n","import { range, min } from 'd3-array';\nimport { ChartShallowDataShape } from '../common/data';\n\nexport type CalendarView = 'year' | 'month';\n\nconst getFirstOfMonth = (date: Date) =>\n  new Date(date.getFullYear(), date.getMonth(), 1);\n\nexport const addWeeksToDate = (date: Date, weeks: number) => {\n  const d = new Date(date.getTime());\n  d.setDate(d.getDate() + weeks * 7);\n  return d;\n};\n\nconst getStartOfDay = (date: Date) => {\n  const d = new Date(date.getTime());\n  d.setHours(0, 0, 0, 0);\n  return d;\n};\n\nconst getNewDayFromDay = (date: Date, num: number) => {\n  const d = new Date(date.getTime());\n  d.setDate(d.getDate() + num);\n  return d;\n};\n\nexport const weekDays: string[] = (() => {\n  const base = new Date(Date.UTC(2017, 0, 2));\n  return range(7).map(() => {\n    const name = base.toLocaleDateString('default', { weekday: 'short' });\n    base.setDate(base.getDate() + 1);\n    return name;\n  });\n})();\n\nexport const buildDataScales = (\n  rawData: ChartShallowDataShape[],\n  view: CalendarView\n) => {\n  // Get the most recent date to get the range from\n  // From the end date, lets find the start year/month of that\n  // From that start year/month, lets find the end year/month for our bounds\n  const startDate = min(rawData, (d) => d.key) || new Date();\n  const start = getFirstOfMonth(startDate);\n  const endDomain = view === 'year' ? 53 : 5;\n  const end = addWeeksToDate(start, endDomain);\n\n  // Base on the view type, swap out some ranges\n  const xDomainRange = view === 'year' ? 53 : 5;\n\n  // Build our x/y domains for days of week + number of weeks in year\n  const yDomain = range(7).reverse();\n  const xDomain = range(xDomainRange);\n\n  // Filter out dates that are not in the start/end ranges\n  // and turn them into something our chart can read\n  const dates = rawData\n    .filter(\n      (d) =>\n        (d.key as Date).getTime() > start.getTime() ||\n        (d.key as Date).getTime() < end.getTime()\n    )\n    .map((d) => ({\n      key: getStartOfDay(d.key as Date),\n      data: d.data\n    }));\n\n  // Find the first day of the duration and subtract the delta\n  const firstDayOfStart = start.getDay();\n  const curDate = getNewDayFromDay(start, -firstDayOfStart);\n  const rows: any[] = [];\n\n  // Build out the dataset for the n duration\n  for (let week = 0; week < xDomainRange; week++) {\n    const row = {\n      key: week,\n      data: [] as any\n    };\n\n    for (let day = 0; day <= 6; day++) {\n      const dayValue = dates.find((d) => d.key.getTime() === curDate.getTime());\n\n      row.data.push({\n        key: day,\n        data: dayValue?.data ?? undefined,\n        metadata: {\n          date: new Date(curDate.getTime()),\n          start: start,\n          end: end\n        }\n      });\n\n      curDate.setDate(curDate.getDate() + 1);\n    }\n\n    rows.push(row);\n  }\n\n  return {\n    data: rows,\n    yDomain,\n    xDomain,\n    start\n  };\n};\n","import React, { FC, useMemo } from 'react';\nimport { ChartShallowDataShape } from '../common/data';\nimport { Heatmap, HeatmapProps } from './Heatmap';\nimport {\n  LinearXAxis,\n  LinearYAxis,\n  LinearYAxisTickSeries,\n  LinearXAxisTickSeries,\n  LinearYAxisTickLabel,\n  LinearXAxisTickLabel\n} from '../common/Axis';\nimport { HeatmapSeries, HeatmapCell } from './HeatmapSeries';\nimport { ChartTooltip } from '../common/Tooltip';\nimport { formatValue } from '../common/utils/formatting';\nimport {\n  buildDataScales,\n  CalendarView,\n  addWeeksToDate,\n  weekDays\n} from './calendarUtils';\n\nexport interface CalendarHeatmapProps extends Omit<HeatmapProps, 'data'> {\n  /**\n   * Chart data shape.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * Height of the component.\n   */\n  height: number;\n\n  /**\n   * Width of the component.\n   */\n  width: number;\n\n  /**\n   * View of the calendar renderer.\n   */\n  view: CalendarView;\n}\n\n// Format the xAxis label for the start + n week\nconst xAxisLabelFormat = (start: Date) => (weeks: number) =>\n  addWeeksToDate(start, weeks).toLocaleString('default', { month: 'long' });\n\nexport const CalendarHeatmap: FC<Partial<CalendarHeatmapProps>> = ({\n  view,\n  data,\n  ...rest\n}) => {\n  const {\n    data: domainData,\n    yDomain,\n    xDomain,\n    start\n  } = useMemo(() => buildDataScales(data, view), [data, view]);\n\n  // For month, only pass 1 tick value\n  const xTickValues = view === 'year' ? undefined : [1];\n\n  // Get the yAxis label formatting based on view type\n  const yAxisLabelFormat = view === 'year' ? (d) => weekDays[d] : () => null;\n\n  return (\n    <Heatmap\n      {...rest}\n      data={domainData}\n      yAxis={\n        <LinearYAxis\n          type=\"category\"\n          axisLine={null}\n          domain={yDomain}\n          tickSeries={\n            <LinearYAxisTickSeries\n              tickSize={20}\n              line={null}\n              label={\n                <LinearYAxisTickLabel padding={5} format={yAxisLabelFormat} />\n              }\n            />\n          }\n        />\n      }\n      xAxis={\n        <LinearXAxis\n          type=\"category\"\n          axisLine={null}\n          domain={xDomain}\n          tickSeries={\n            <LinearXAxisTickSeries\n              line={null}\n              tickValues={xTickValues}\n              label={\n                <LinearXAxisTickLabel\n                  padding={5}\n                  align=\"end\"\n                  format={xAxisLabelFormat(start)}\n                />\n              }\n            />\n          }\n        />\n      }\n    />\n  );\n};\n\nCalendarHeatmap.defaultProps = {\n  view: 'year',\n  series: (\n    <HeatmapSeries\n      padding={0.3}\n      emptyColor=\"transparent\"\n      cell={\n        <HeatmapCell\n          tooltip={\n            <ChartTooltip\n              content={(d) =>\n                `${formatValue(d.data.metadata.date)}  ${formatValue(\n                  d.data.value\n                )}`\n              }\n            />\n          }\n        />\n      }\n    />\n  )\n};\n","import React, { FC } from 'react';\nimport { Bar, BarProps } from '../BarChart';\nimport { ChartTooltip, TooltipTemplate } from '../common/Tooltip';\n\nexport type LinearGaugeBarProps = BarProps;\n\nexport const LinearGaugeBar: FC<Partial<LinearGaugeBarProps>> = (props) => (\n  <Bar {...props} />\n);\n\nLinearGaugeBar.defaultProps = {\n  tooltip: (\n    <ChartTooltip\n      placement=\"top\"\n      content={(data) => (\n        <TooltipTemplate value={{ y: data.value, x: data.y }} />\n      )}\n    />\n  )\n};\n","import React, { FC } from 'react';\n\nexport interface LinearGaugeOuterBarProps extends SVGRect {\n  /**\n   * Height of the chart. Set by `LinearGauge` component.\n   */\n  height: number;\n\n  /**\n   * Width of the chart. Set by `LinearGauge` component.\n   */\n  width: number;\n\n  /**\n   * Fill for the bar element.\n   */\n  fill: string;\n}\n\nexport const LinearGaugeOuterBar: FC<Partial<LinearGaugeOuterBarProps>> = ({\n  height,\n  width,\n  fill,\n  ...rest\n}) => (\n  <rect\n    {...rest}\n    fill={fill}\n    width={Math.max(width!, 0)}\n    height={Math.max(height!, 0)}\n  />\n);\n\nLinearGaugeOuterBar.defaultProps = {\n  fill: '#484848'\n};\n","import React, { Fragment, ReactElement, FC } from 'react';\nimport { BarSeries, BarSeriesProps } from '../BarChart';\nimport { LinearGaugeBar, LinearGaugeBarProps } from './LinearGaugeBar';\nimport {\n  LinearGaugeOuterBar,\n  LinearGaugeOuterBarProps\n} from './LinearGaugeOuterBar';\nimport { CloneElement } from 'rdk';\n\nexport interface LinearGaugeSeriesProps extends Omit<BarSeriesProps, 'bar'> {\n  /**\n   * Height of the chart. Set by `LinearGauge` component.\n   */\n  height: number;\n\n  /**\n   * Width of the chart. Set by `LinearGauge` component.\n   */\n  width: number;\n\n  /**\n   * Whether its a multi-series or not. Set by `LinearGauge` component.\n   */\n  isMultiSeries: boolean;\n\n  /**\n   * Bar element. Only applicable for single series.\n   */\n  bar: ReactElement<LinearGaugeBarProps, typeof LinearGaugeBar>;\n\n  /**\n   * Outer bar element. Only applicable for single series.\n   */\n  outerBar: ReactElement<LinearGaugeOuterBarProps, typeof LinearGaugeOuterBar>;\n}\n\nexport const LinearGaugeSeries: FC<Partial<LinearGaugeSeriesProps>> = ({\n  height,\n  width,\n  bar,\n  outerBar,\n  isMultiSeries,\n  ...rest\n}) => (\n  <Fragment>\n    {!isMultiSeries && outerBar && (\n      <CloneElement<LinearGaugeOuterBarProps>\n        element={outerBar}\n        height={height}\n        width={width}\n      />\n    )}\n    <BarSeries\n      {...rest}\n      layout=\"horizontal\"\n      tooltip={null}\n      bar={<CloneElement<LinearGaugeOuterBarProps> element={bar} />}\n    />\n  </Fragment>\n);\n\nLinearGaugeSeries.defaultProps = {\n  outerBar: <LinearGaugeOuterBar />,\n  bar: <LinearGaugeBar />\n};\n","import React, { FC, Fragment, ReactElement, useCallback, useMemo } from 'react';\nimport {\n  ChartProps,\n  ChartContainer,\n  ChartContainerChildProps\n} from '../common/containers';\nimport {\n  ChartShallowDataShape,\n  buildBarStackData,\n  ChartInternalNestedDataShape,\n  buildShallowChartData,\n  ChartNestedDataShape\n} from '../common/data';\nimport { getXScale, getYScale } from '../common/scales';\nimport { CloneElement } from 'rdk';\nimport { LinearGaugeSeries, LinearGaugeSeriesProps } from './LinearGaugeSeries';\n\nexport interface LinearGaugeProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartShallowDataShape | ChartShallowDataShape[];\n\n  /**\n   * The series component that renders the bar components.\n   */\n  series: ReactElement<LinearGaugeSeriesProps, typeof LinearGaugeSeries>;\n\n  /**\n   * Min value to scale on. Only applicable for single-series.\n   */\n  minValue: number;\n\n  /**\n   * Max value to scale on. Only applicable for single-series.\n   */\n  maxValue: number;\n}\n\nexport const LinearGauge: FC<Partial<LinearGaugeProps>> = ({\n  id,\n  width,\n  height,\n  margins,\n  className,\n  containerClassName,\n  series,\n  data,\n  minValue,\n  maxValue\n}) => {\n  const transformedData = useMemo(() => {\n    if (Array.isArray(data)) {\n      return buildBarStackData(\n        [\n          {\n            key: 'default',\n            data\n          }\n        ] as ChartNestedDataShape[],\n        'expand',\n        'horizontal'\n      );\n    } else {\n      return buildShallowChartData([data], 'horizontal');\n    }\n  }, [data]);\n\n  const getScales = useCallback(\n    (\n      isMultiSeries: boolean,\n      data: ChartInternalNestedDataShape[],\n      width: number,\n      height: number,\n      minValue: number,\n      maxValue: number\n    ) => {\n      const domain = !isMultiSeries ? [minValue, maxValue] : undefined;\n\n      const keyScale = getXScale({\n        width,\n        type: 'value',\n        data,\n        domain,\n        isMultiSeries\n      });\n\n      const valueScale = getYScale({\n        type: 'category',\n        height,\n        data,\n        isMultiSeries\n      });\n\n      return {\n        keyScale,\n        valueScale\n      };\n    },\n    []\n  );\n\n  const renderChart = useCallback(\n    ({ chartHeight, chartWidth, id, chartSized }: ChartContainerChildProps) => {\n      const isMultiSeries = Array.isArray(data);\n      const type = isMultiSeries ? 'stackedNormalized' : 'standard';\n      const { keyScale, valueScale } = getScales(\n        isMultiSeries,\n        transformedData as ChartInternalNestedDataShape[],\n        chartWidth,\n        chartHeight,\n        minValue,\n        maxValue\n      );\n\n      return (\n        <Fragment>\n          {chartSized && (\n            <CloneElement<LinearGaugeSeriesProps>\n              element={series}\n              id={`linear-gauge-series-${id}`}\n              data={transformedData}\n              isCategorical={true}\n              xScale={keyScale}\n              yScale={valueScale}\n              type={type}\n              height={chartHeight}\n              width={chartWidth}\n              isMultiSeries={isMultiSeries}\n            />\n          )}\n        </Fragment>\n      );\n    },\n    [data, getScales, maxValue, minValue, series, transformedData]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      className={className}\n      containerClassName={containerClassName}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n\nLinearGauge.defaultProps = {\n  minValue: 0,\n  maxValue: 100,\n  series: <LinearGaugeSeries />\n};\n","import { useEffect } from 'react';\nimport { DEFAULT_TRANSITION } from '../common/Motion';\nimport { useMotionValue, useSpring } from 'framer-motion';\nimport { interpolate } from 'd3-interpolate';\n\nexport const useInterpolate = ({ data, animated }) => {\n  const transition = animated\n    ? { ...DEFAULT_TRANSITION }\n    : {\n      delay: 0,\n      type: false\n    };\n\n  const d = useMotionValue(data.path);\n  const prevPath = useMotionValue(data.path);\n  const spring = useSpring(prevPath, {\n    from: 0,\n    to: 1\n  });\n\n  useEffect(() => {\n    const interpolator = interpolate(prevPath.get(), data.path);\n    spring.onChange((v) => d.set(interpolator(v)));\n    prevPath.set(data.path);\n  });\n\n  return { transition, d };\n};\n","import React, { FC, useRef, ReactElement, useState, Fragment } from 'react';\nimport { IVennLayout } from '@upsetjs/venn.js';\nimport { ChartTooltip, ChartTooltipProps } from '../common/Tooltip';\nimport { CloneElement } from 'rdk';\nimport { motion } from 'framer-motion';\nimport { useInterpolate } from './useInterpolate';\nimport { Mask, MaskProps } from '../common/Mask';\nimport { Gradient, GradientProps } from '../common/Gradient';\nimport { useHoverIntent } from '../common/utils/useHoverIntent';\n\nexport interface VennArcProps {\n  /**\n   * Whether the shape is active or not.\n   */\n  active?: boolean | null;\n\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Fill color for the arc.\n   */\n  fill: string;\n\n  /**\n   * Stroke for the arc.\n   */\n  stroke?:\n    | string\n    | ((\n        data: IVennLayout<any>,\n        index: number,\n        isActive: boolean | null,\n        isHovered: boolean | null\n      ) => string);\n\n  /**\n   * The internal data object built by venn.js\n   */\n  data: IVennLayout<any>;\n\n  /**\n   * Whether the chart is disabled.\n   */\n  disabled?: boolean;\n\n  /**\n   * Stroke on the arc.\n   */\n  strokeWidth?: number;\n\n  /**\n   * Initial style of arc.\n   */\n  initialStyle?: any;\n\n  /**\n   * Active style of arc.\n   */\n  activeStyle?: any;\n\n  /**\n   * Inactive style of arc.\n   */\n  inactiveStyle?: any;\n\n  /**\n   * CSS Styles for the arc.\n   */\n  style?: any;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip?: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Mask element for the arc.\n   */\n  mask: ReactElement<MaskProps, typeof Mask> | null;\n\n  /**\n   * Gradient shades for the arc.\n   */\n  gradient: ReactElement<GradientProps, typeof Gradient> | null;\n\n  /**\n   * Event for when the arc is clicked.\n   */\n  onClick: (event) => void;\n\n  /**\n   * Event for when the arc has mouse enter.\n   */\n  onMouseEnter: (event) => void;\n\n  /**\n   * Event for when the arc has mouse leave.\n   */\n  onMouseLeave: (event) => void;\n}\n\nexport const VennArc: FC<Partial<VennArcProps>> = ({\n  data,\n  fill,\n  disabled,\n  animated,\n  stroke,\n  mask,\n  id,\n  style,\n  active,\n  inactiveStyle,\n  activeStyle,\n  initialStyle,\n  strokeWidth,\n  gradient,\n  tooltip,\n  onClick,\n  onMouseEnter,\n  onMouseLeave\n}) => {\n  const [internalActive, setInternalActive] = useState<boolean>(false);\n  const arcRef = useRef<any | null>(null);\n  const { transition, d } = useInterpolate({ animated, data });\n  const currentStyle = active\n    ? activeStyle\n    : active === null\n      ? inactiveStyle\n      : initialStyle;\n\n  const arcFill =\n    gradient && !mask\n      ? `url(#gradient-${id})`\n      : mask\n        ? `url(#mask-pattern-${id})`\n        : fill;\n\n  const { pointerOut, pointerOver } = useHoverIntent({\n    onPointerOver: (event) => {\n      if (!disabled) {\n        setInternalActive(true);\n        onMouseEnter({\n          value: data.data,\n          nativeEvent: event\n        });\n      }\n    },\n    onPointerOut: (event) => {\n      if (!disabled) {\n        setInternalActive(false);\n        onMouseLeave({\n          value: data.data,\n          nativeEvent: event\n        });\n      }\n    }\n  });\n\n  return (\n    <g\n      title={data.data.key}\n      onPointerOver={pointerOver}\n      onPointerOut={pointerOut}\n      onClick={(event) => {\n        if (!disabled) {\n          onClick({\n            value: data.data,\n            nativeEvent: event\n          });\n        }\n      }}\n    >\n      <motion.path\n        ref={arcRef}\n        fill={arcFill}\n        id={`${id}-arc`}\n        strokeWidth={strokeWidth}\n        stroke={stroke as string}\n        transition={transition}\n        d={d}\n        initial={initialStyle}\n        animate={currentStyle}\n        style={style}\n      />\n      {mask && (\n        <Fragment>\n          <Mask id={`mask-${id}`} fill={`url(#gradient-${id})`} />\n          <CloneElement<MaskProps>\n            element={mask}\n            id={`mask-pattern-${id}`}\n            fill={fill}\n          />\n        </Fragment>\n      )}\n      {gradient && (\n        <CloneElement<GradientProps>\n          element={gradient}\n          id={`gradient-${id}`}\n          color={fill}\n        />\n      )}\n      {tooltip && !tooltip.props.disabled && (\n        <CloneElement<ChartTooltipProps>\n          element={tooltip}\n          visible={!!internalActive}\n          reference={arcRef}\n          value={{ y: data.data.size, x: data.data?.sets?.join(' | ') }}\n        />\n      )}\n    </g>\n  );\n};\n\nVennArc.defaultProps = {\n  active: false,\n  inactiveStyle: { opacity: 0.3 },\n  activeStyle: { opacity: 0.8 },\n  initialStyle: { opacity: 0.6 },\n  strokeWidth: 3,\n  gradient: <Gradient />,\n  tooltip: <ChartTooltip />,\n  onClick: () => undefined,\n  onMouseEnter: () => undefined,\n  onMouseLeave: () => undefined\n};\n","import React, { FC } from 'react';\nimport { motion } from 'framer-motion';\nimport { wrapText } from '../common/utils/wrapText';\nimport { DEFAULT_TRANSITION } from '../common/Motion';\n\nexport interface VennLabelProps {\n  /**\n   * Whether the shape is active or not.\n   */\n  active?: boolean | null;\n\n  /**\n   * Set by the parent element.\n   */\n  id?: string;\n\n  /**\n   * Show all labels or just the large ones. Default false.\n   */\n  showAll?: boolean;\n\n  /**\n   * The label type to show.\n   */\n  labelType: 'key' | 'value';\n\n  /**\n   * Should wrap text or not.\n   */\n  wrap?: boolean;\n\n  /**\n   * The internal data object built by venn.js\n   */\n  data: any;\n\n  /**\n   * Font size of the text.\n   */\n  fontSize?: number;\n\n  /**\n   * Font family of the text.\n   */\n  fontFamily?: string;\n\n  /**\n   * Fill of the text.\n   */\n  fill?: string;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Format label.\n   */\n  format?: (data) => any;\n}\n\nexport const VennLabel: FC<Partial<VennLabelProps>> = ({\n  data,\n  format,\n  id,\n  active,\n  labelType,\n  showAll,\n  wrap,\n  animated,\n  fill,\n  fontSize,\n  fontFamily\n}) => {\n  // If the text area is very large, then lets just skip showing the label\n  if (!showAll && !data.arcs?.filter((a) => a.large).length) {\n    return null;\n  }\n\n  const key =\n    labelType === 'key' ? data.data?.sets?.join(' | ') : data.data.size;\n\n  const transition = animated ? DEFAULT_TRANSITION : { delay: 0, type: false };\n  const text = wrap\n    ? wrapText({\n      key,\n      x: data.text.x,\n      fontFamily,\n      fontSize,\n      width: data?.circles?.[0]?.radius\n    })\n    : key;\n\n  return (\n    <motion.text\n      id={`${id}-text`}\n      fill={fill}\n      pointerEvents=\"none\"\n      fontFamily={fontFamily}\n      fontSize={fontSize}\n      initial={\n        {\n          attrX: data.text.x,\n          attrY: data.text.y,\n          opacity: 1\n        } as any\n      }\n      animate={\n        {\n          attrX: data.text.x,\n          attrY: data.text.y,\n          opacity: active === null ? 0.3 : 1\n        } as any\n      }\n      transition={transition}\n      textAnchor=\"middle\"\n    >\n      {format ? format(data) : text}\n    </motion.text>\n  );\n};\n\nVennLabel.defaultProps = {\n  labelType: 'key',\n  showAll: false,\n  wrap: true,\n  animated: true,\n  fill: '#000',\n  fontSize: 11,\n  fontFamily: 'sans-serif'\n};\n","import React, { FC, Fragment, isValidElement } from 'react';\nimport { motion } from 'framer-motion';\nimport { DEFAULT_TRANSITION } from '../common/Motion';\n\nexport interface VennOuterLabelProps {\n  /**\n   * The internal data object built by venn.js\n   */\n  data: any;\n\n  /**\n   * Font size of the text.\n   */\n  fontSize?: number;\n\n  /**\n   * Font family of the text.\n   */\n  fontFamily?: string;\n\n  /**\n   * Fill of the text.\n   */\n  fill?: string;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Format label.\n   */\n  format?: (data) => any;\n}\n\nexport const VennOuterLabel: FC<Partial<VennOuterLabelProps>> = ({\n  data,\n  format,\n  animated,\n  fill,\n  fontSize,\n  fontFamily\n}) => {\n  const transition = animated ? DEFAULT_TRANSITION : { delay: 0, type: false };\n  const text = data.set.data.key;\n\n  const label = format ? format(data) : text;\n  const isElement = isValidElement(label);\n  const showIcon = isElement && data.set.icon;\n\n  // TODO: framer-motion doesn't seem to like the translates on the g\n  // initial={pos} animate={pos}\n  const pos = {\n    x: showIcon ? data.set.icon.x : data.set.text.x,\n    y: showIcon ? data.set.icon.y : data.set.text.y\n  };\n\n  return (\n    <Fragment>\n      {isElement ? (\n        <g style={{ transform: `translate(${pos.x}px, ${pos.y}px)` }}>\n          {label}\n        </g>\n      ) : (\n        <motion.text\n          fill={fill}\n          style={{ pointerEvents: 'none', fontFamily, fontSize }}\n          textAnchor={data.set.align === 'middle' ? 'center' : data.set.align}\n          alignmentBaseline={data.set.verticalAlign}\n          initial={\n            {\n              attrX: pos.x,\n              attrY: pos.y\n            } as any\n          }\n          animate={\n            {\n              attrX: pos.x,\n              attrY: pos.y\n            } as any\n          }\n          transition={transition}\n        >\n          {label}\n        </motion.text>\n      )}\n    </Fragment>\n  );\n};\n\nVennOuterLabel.defaultProps = {\n  animated: true,\n  fill: '#000',\n  fontSize: 14,\n  fontFamily: 'sans-serif'\n};\n","import React, {\n  FC,\n  Fragment,\n  ReactElement,\n  useCallback,\n  useState,\n  useMemo\n} from 'react';\nimport { IVennLayout } from '@upsetjs/venn.js';\nimport { ColorSchemeType, getColor } from '../common/color';\nimport { VennArc, VennArcProps } from './VennArc';\nimport { VennLabel, VennLabelProps } from './VennLabel';\nimport { motion } from 'framer-motion';\nimport { CloneElement } from 'rdk';\nimport chroma from 'chroma-js';\nimport { VennOuterLabel, VennOuterLabelProps } from './VennOuterLabel';\nimport invert from 'invert-color';\nimport { DEFAULT_TRANSITION } from '../common/Motion';\n\nconst getSafeKey = (d) => d.data?.key?.replace(' ', '');\n\nexport interface VennSeriesProps {\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * Active managed selections.\n   */\n  selections?: string[];\n\n  /**\n   * The internal data object built by venn.js\n   */\n  data: IVennLayout<any>[];\n\n  /**\n   * Color scheme for the chart.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Whether the chart is disabled.\n   */\n  disabled?: boolean;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Label element.\n   */\n  label?: ReactElement<VennLabelProps, typeof VennLabel> | null;\n\n  /**\n   * Label element.\n   */\n  outerLabel?: ReactElement<VennOuterLabelProps, typeof VennOuterLabel> | null;\n\n  /**\n   * Arc element.\n   */\n  arc?: ReactElement<VennArcProps, typeof VennArc> | null;\n}\n\nexport const VennSeries: FC<Partial<VennSeriesProps>> = ({\n  data,\n  id,\n  selections,\n  animated,\n  disabled,\n  colorScheme,\n  outerLabel,\n  arc,\n  label\n}) => {\n  const transition = animated ? DEFAULT_TRANSITION : { type: false, delay: 0 };\n  const [actives, setActives] = useState<string[]>([]);\n  const [hovered, setHovered] = useState<string | null>(null);\n\n  const onActivate = useCallback(\n    (point: string) => {\n      setHovered(point);\n\n      setActives(\n        data\n          .filter((d) => d.data?.key.indexOf(point) > -1)\n          .map((d) => d.data?.key)\n      );\n    },\n    [data]\n  );\n\n  const renderArc = useCallback(\n    (d: IVennLayout<any> & { set?: any }, index: number) => {\n      // Get the colors of the fill\n      const fill = getColor({\n        data,\n        colorScheme,\n        point: d.data,\n        index\n      });\n\n      const textFill = fill\n        ? invert(chroma(fill).darken(0.5).hex(), true)\n        : 'white';\n\n      const arcFill = arc.props.fill || fill;\n\n      const key = d?.data?.key;\n      const safeKey = getSafeKey(d);\n      const isSelected = selections?.includes(key);\n\n      // Get the state of the arc\n      const isHovered = hovered === key || isSelected;\n      const isActive =\n        isSelected ||\n        actives.includes(key) ||\n        (actives.length > 0 ? null : false);\n\n      // Get the colors for the stroke\n      const stroke =\n        typeof arc.props.stroke === 'function'\n          ? // @ts-ignore\n          arc.props.stroke(data, index, isActive, isHovered)\n          : arc.props.stroke;\n\n      const arcStroke =\n        stroke ||\n        chroma(arcFill)\n          .darken(isActive ? 0.8 : 0.5)\n          .hex();\n\n      return (\n        <Fragment key={safeKey}>\n          <CloneElement<VennArcProps>\n            element={arc}\n            id={`${id}-${safeKey}`}\n            data={d}\n            fill={arcFill}\n            stroke={arcStroke}\n            disabled={disabled}\n            animated={animated}\n            active={isActive}\n            onMouseEnter={() => onActivate(key)}\n            onMouseLeave={() => {\n              setActives([]);\n              setHovered(null);\n            }}\n          />\n          {label && (\n            <CloneElement<VennLabelProps>\n              element={label}\n              data={d}\n              id={`${id}-${safeKey}`}\n              active={isActive}\n              animated={animated}\n              fill={textFill}\n            />\n          )}\n          {d.set && outerLabel && (\n            <CloneElement<VennLabelProps>\n              element={outerLabel}\n              data={d}\n              animated={animated}\n            />\n          )}\n        </Fragment>\n      );\n    },\n    [\n      data,\n      colorScheme,\n      arc,\n      selections,\n      hovered,\n      actives,\n      id,\n      disabled,\n      animated,\n      label,\n      outerLabel,\n      onActivate\n    ]\n  );\n\n  const topArcs = useMemo(() => {\n    const result = [];\n\n    if (actives.length > 0) {\n      result.push(...actives.filter((s) => s !== hovered));\n    }\n\n    if (selections?.length) {\n      result.push(\n        ...selections.filter((s) => !actives.includes(s) && s !== hovered)\n      );\n    }\n\n    if (hovered) {\n      result.push(hovered);\n    }\n\n    return result;\n  }, [hovered, actives, selections]);\n\n  return (\n    <motion.g\n      initial={{ opacity: 0, scale: 0 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={transition}\n    >\n      {data.map(renderArc)}\n      {topArcs.length > 0 &&\n        topArcs.map((a) => (\n          <use\n            key={a}\n            xlinkHref={`#${id}-${a}-arc`}\n            style={{ pointerEvents: 'none' }}\n          />\n        ))}\n      {data.map((d, index) => (\n        <use\n          key={index}\n          xlinkHref={`#${id}-${getSafeKey(d)}-text`}\n          style={{ pointerEvents: 'none' }}\n        />\n      ))}\n    </motion.g>\n  );\n};\n\nVennSeries.defaultProps = {\n  animated: true,\n  disabled: false,\n  colorScheme: 'cybertron',\n  outerLabel: <VennOuterLabel />,\n  arc: <VennArc />,\n  label: <VennLabel />\n};\n","import venn0 from './venn0.json';\nimport venn1 from './venn1.json';\nimport venn2 from './venn2.json';\nimport venn3 from './venn3.json';\nimport venn4 from './venn4.json';\nimport venn5 from './venn5.json';\n\nexport interface BoundingBox {\n  width: number;\n  height: number;\n}\n\n// Static shapes for rendering\nconst shapes = [venn0, venn1, venn2, venn3, venn4, venn5];\n\n/**\n * Sort helper.\n * Reference: https://stackoverflow.com/a/64449554/1288340\n */\nconst upto = (limit) => Array.from({ length: limit }, (_, i) => i);\n\n/**\n * Detect ellipse.\n * Reference: https://github.com/upsetjs/chartjs-chart-venn/blob/master/src/model/generate.ts#L4\n */\nfunction isEllipse(d) {\n  return typeof d.rx === 'number';\n}\n\n/**\n * Generate all combinations of a given array.\n * Reference: https://stackoverflow.com/questions/5752002/find-all-possible-subset-combos-in-an-array\n */\nfunction combinations(array: string[]) {\n  return (new Array(1 << array.length) as any)\n    .fill()\n    .map((_e1, i) => array.filter((_e2, j) => i & (1 << j)));\n}\n\n/**\n * Given a array set, lookup the data.\n */\nfunction lookup(combo: string[], data: any[]) {\n  const key = combo.join('|');\n  const found = data.find((d) => d.key === key);\n\n  return {\n    key,\n    sets: combo,\n    size: found?.size || 0\n  };\n}\n\n/**\n * Build the data combinations for the layout.\n */\nfunction buildData(data: any[]) {\n  // Collect all unique sets and sort by size\n  const uniqueSets = data\n    .filter((d) => d.sets.length === 1)\n    .sort((a, b) => b.size - a.size);\n\n  // Map our unique sets\n  const uniqueSetKeys = uniqueSets.map((u) => u.key);\n\n  // Build all combos and return 1+ combos\n  const sets: any[] = combinations(uniqueSetKeys);\n  const filteredSets = sets.slice(1, sets.length);\n\n  // Sort the child sets based on the parent\n  const result = filteredSets.map((d) =>\n    [...d].sort((a, b) => uniqueSetKeys.indexOf(a) - uniqueSetKeys.indexOf(b))\n  );\n\n  // Sort the data based on index of keys and length\n  // Reference: https://stackoverflow.com/a/64449554/1288340\n  result.sort(\n    (a, b) =>\n      a.length - b.length ||\n      upto(a.length).reduce(\n        (diff, i) =>\n          diff || uniqueSetKeys.indexOf(a[i]) - uniqueSetKeys.indexOf(b[i]),\n        0\n      )\n  );\n\n  // reshape the data key so they will match combos\n  const keyedData = data.map((d) => {\n    const sets = [...d.sets].sort(\n      (a, b) => uniqueSetKeys.indexOf(a) - uniqueSetKeys.indexOf(b)\n    );\n    const key = sets.join('|');\n\n    return {\n      size: d.size,\n      sets,\n      key\n    };\n  });\n\n  return {\n    uniqueCount: uniqueSets.length,\n    data: result.map((r) => lookup(r, keyedData))\n  };\n}\n\n/**\n * Generate the arc slice path.\n * Reference: https://github.com/upsetjs/chartjs-chart-venn/blob/master/src/model/generate.ts#L4\n */\nexport function generateArcSlicePath(s: any, refs: any[]) {\n  return `M ${s.x1},${s.y1} ${s.arcs\n    .map((arc) => {\n      const ref = refs[arc.ref];\n      const rx = isEllipse(ref) ? ref.rx : ref.r;\n      const ry = isEllipse(ref) ? ref.ry : ref.r;\n      const rot = isEllipse(ref) ? ref.rotation : 0;\n      return `A ${rx} ${ry} ${rot} ${arc.large ? 1 : 0} ${arc.sweep ? 1 : 0} ${\n        arc.x2\n      } ${arc.y2}`;\n    })\n    .join(' ')}`;\n}\n\n/**\n * Build the layout for the given chart.\n * Reference: https://github.com/upsetjs/chartjs-chart-venn/blob/master/src/model/generate.ts#L4\n */\nfunction buildLayout({ data, uniqueCount }, box: BoundingBox) {\n  const shape = shapes[Math.min(shapes.length - 1, uniqueCount)];\n  const f = Math.min(box.width / shape.bb.width, box.height / shape.bb.height);\n  const x = f * -shape.bb.x + (box.width - f * shape.bb.width) / 2 + 0;\n  const y = f * -shape.bb.y + (box.height - f * shape.bb.height) / 2 + 0;\n  const mx = (v: number) => x + f * v;\n  const my = (v: number) => y + f * v;\n\n  const shapeSets = shape.sets.map((c, i) => ({\n    ...c,\n    ...{\n      data: data[i],\n      cx: mx(c.cx),\n      cy: my(c.cy),\n      text: {\n        x: mx(c.text.x),\n        y: my(c.text.y)\n      },\n      ...(c.icon\n        ? {\n          icon: {\n            x: mx(c.icon.x),\n            y: my(c.icon.y)\n          }\n        }\n        : {})\n    },\n    ...(isEllipse(c)\n      ? {\n        rx: c.rx * f,\n        ry: c.ry * f\n      }\n      : {\n        r: c.r * f\n      })\n  }));\n\n  const intersections = shape.intersections.map((c, i) => ({\n    text: {\n      x: mx(c.text.x),\n      y: my(c.text.y)\n    },\n    x1: mx(c.x1),\n    y1: my(c.y1),\n    data: data[i],\n    set: shapeSets[i],\n    arcs: c.arcs.map((a) => ({\n      ...a,\n      x2: mx(a.x2),\n      y2: my(a.y2)\n    }))\n  }));\n\n  return intersections.map((i) => ({\n    ...i,\n    path: generateArcSlicePath(i, shapeSets)\n  }));\n}\n\n/**\n * Generate the star euler layout.\n * Adapted from: https://github.com/upsetjs/chartjs-chart-venn\n */\nexport function starEulerLayout(data: any[], bb: BoundingBox) {\n  return buildLayout(buildData(data), bb);\n}\n","import React, { FC, Fragment, ReactElement, useCallback } from 'react';\nimport {\n  ChartContainer,\n  ChartContainerChildProps,\n  ChartProps\n} from '../common/containers';\nimport { layout } from '@upsetjs/venn.js';\nimport { VennSeries, VennSeriesProps } from './VennSeries';\nimport { CloneElement } from 'rdk';\nimport { starEulerLayout } from './starEuler';\n\nexport interface VennDiagramData {\n  /**\n   * List of Keys for the data.\n   */\n  key: string[];\n\n  /**\n   * Size of the data keys.\n   */\n  data: number;\n}\n\nexport interface VennDiagramProps extends ChartProps {\n  /**\n   * Type of the chart.\n   */\n  type?: 'venn' | 'euler' | 'starEuler';\n\n  /**\n   * Data the chart will receive to render.\n   */\n  data: VennDiagramData[];\n\n  /**\n   * The series component that renders the arc and label components.\n   */\n  series?: ReactElement<VennSeriesProps, typeof VennSeries> | null;\n\n  /**\n   * Whether the chart is disabled.\n   */\n  disabled?: boolean;\n}\n\nexport const VennDiagram: FC<VennDiagramProps> = ({\n  id,\n  type,\n  width,\n  height,\n  margins,\n  className,\n  containerClassName,\n  data,\n  disabled,\n  series\n}) => {\n  const renderChart = useCallback(\n    (containerProps: ChartContainerChildProps) => {\n      const normalized = data.map((d) => ({\n        key: d.key.join('|'),\n        sets: d.key,\n        size: d.data\n      }));\n\n      let layoutData;\n      if (type === 'starEuler') {\n        layoutData = starEulerLayout(normalized, {\n          height: containerProps.height,\n          width: containerProps.width\n        });\n      } else {\n        layoutData = layout(normalized, {\n          height: containerProps.height,\n          width: containerProps.width,\n          distinct: type !== 'euler'\n        });\n      }\n\n      return (\n        <CloneElement<VennSeriesProps>\n          element={series}\n          data={layoutData}\n          disabled={disabled}\n          id={containerProps.id}\n        />\n      );\n    },\n    [data, disabled, series, type]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      containerClassName={containerClassName}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      center={false}\n      className={className}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n\nVennDiagram.defaultProps = {\n  type: 'venn',\n  series: <VennSeries />\n};\n","import React, { FC, Fragment, ReactElement, useRef, useState } from 'react';\nimport { HierarchyCircularNode } from 'd3-hierarchy';\nimport { ChartTooltip, ChartTooltipProps } from '../common/Tooltip';\nimport { CloneElement } from 'rdk';\nimport { motion } from 'framer-motion';\nimport { Gradient, GradientProps } from '../common/Gradient';\nimport { Mask, MaskProps } from '../common/Mask';\nimport { DEFAULT_TRANSITION } from '../common/Motion';\nimport { useHoverIntent } from '../common/utils/useHoverIntent';\nimport { Glow, GlowProps } from '../common/Glow';\n\nexport interface BubbleProps {\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * The internal data object built by d3\n   */\n  data: HierarchyCircularNode<any>;\n\n  /**\n   * Fill for the bubble.\n   */\n  fill: string;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip?: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Mask element for the arc.\n   */\n  mask: ReactElement<MaskProps, typeof Mask> | null;\n\n  /**\n   * Glow element for the point.\n   */\n  glow?: ReactElement<GlowProps, typeof Glow> | null;\n\n  /**\n   * Gradient shades for the arc.\n   */\n  gradient: ReactElement<GradientProps, typeof Gradient> | null;\n\n  /**\n   * Event for when the arc is clicked.\n   */\n  onClick?: (event) => void;\n\n  /**\n   * Event for when the arc has mouse enter.\n   */\n  onMouseEnter?: (event) => void;\n\n  /**\n   * Event for when the arc has mouse leave.\n   */\n  onMouseLeave?: (event) => void;\n}\n\nexport const Bubble: FC<Partial<BubbleProps>> = ({\n  id,\n  data,\n  fill,\n  mask,\n  gradient,\n  glow,\n  onClick,\n  onMouseEnter,\n  onMouseLeave,\n  animated,\n  tooltip = <ChartTooltip />\n}) => {\n  const [internalActive, setInternalActive] = useState<boolean>(false);\n  const bubbleRef = useRef<any | null>(null);\n  const transition = animated ? DEFAULT_TRANSITION : { type: false, delay: 0 };\n\n  const { pointerOut, pointerOver } = useHoverIntent({\n    onPointerOver: (event) => {\n      setInternalActive(true);\n      onMouseEnter?.(event);\n    },\n    onPointerOut: (event) => {\n      setInternalActive(false);\n      onMouseLeave?.(event);\n    }\n  });\n\n  const arcFill =\n    gradient && !mask\n      ? `url(#gradient-${id})`\n      : mask\n        ? `url(#mask-pattern-${id})`\n        : fill;\n\n  const glowStyles = glow ? {\n    filter: `drop-shadow(${glow.props.x}px ${glow.props.y}px ${glow.props.blur}px ${glow.props.color})`\n  } : {};\n\n  return (\n    <Fragment>\n      <motion.circle\n        id={`${id}-bubble`}\n        ref={bubbleRef}\n        fill={arcFill}\n        style={{ ...glowStyles }}\n        initial={{\n          r: data.r,\n          cx: data.x,\n          cy: data.y\n        }}\n        animate={{\n          r: data.r,\n          cx: data.x,\n          cy: data.y\n        }}\n        transition={transition}\n        onClick={onClick}\n        onPointerOver={pointerOver}\n        onPointerOut={pointerOut}\n      />\n      {mask && (\n        <Fragment>\n          <Mask id={`mask-${id}`} fill={`url(#gradient-${id})`} />\n          <CloneElement<MaskProps>\n            element={mask}\n            id={`mask-pattern-${id}`}\n            fill={fill}\n          />\n        </Fragment>\n      )}\n      {gradient && (\n        <CloneElement<GradientProps>\n          element={gradient}\n          id={`gradient-${id}`}\n          color={fill}\n        />\n      )}\n      {tooltip && !tooltip.props.disabled && (\n        <CloneElement<ChartTooltipProps>\n          element={tooltip}\n          visible={!!internalActive}\n          reference={bubbleRef}\n          value={{ y: data.data.data, x: data.data.key }}\n        />\n      )}\n    </Fragment>\n  );\n};\n","import React, { FC, isValidElement } from 'react';\nimport { HierarchyCircularNode } from 'd3-hierarchy';\nimport { motion } from 'framer-motion';\nimport { wrapText } from '../common/utils/wrapText';\nimport { DEFAULT_TRANSITION } from '../common/Motion';\n\nexport interface BubbleLabelProps {\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * The internal data object built by d3\n   */\n  data: HierarchyCircularNode<any>;\n\n  /**\n   * Font size of the text.\n   */\n  fontSize?: number;\n\n  /**\n   * Font family of the text.\n   */\n  fontFamily?: string;\n\n  /**\n   * Fill of the text.\n   */\n  fill?: string;\n\n  /**\n   * Should wrap text or not.\n   */\n  wrap?: boolean;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Format label.\n   */\n  format?: (data) => any;\n}\n\nexport const BubbleLabel: FC<Partial<BubbleLabelProps>> = ({\n  id,\n  data,\n  format,\n  wrap,\n  fill,\n  fontSize,\n  fontFamily,\n  animated\n}) => {\n  const transition = animated ? DEFAULT_TRANSITION : { type: false, delay: 0 };\n  let isElement = false;\n  let label;\n\n  if (format) {\n    label = format(data);\n    isElement = isValidElement(label);\n  }\n\n  if (!isElement) {\n    const text = wrap\n      ? wrapText({\n        key: data.data.key,\n        fontFamily,\n        fontSize,\n        width: data.r\n      })\n      : data.data.key;\n\n    return (\n      <motion.text\n        initial={{\n          x: data.x,\n          y: data.y\n        }}\n        animate={{\n          x: data.x,\n          y: data.y\n        }}\n        transition={transition}\n        id={`${id}-text`}\n        style={{ pointerEvents: 'none', fontFamily, fontSize }}\n        fill={fill}\n        textAnchor=\"middle\"\n      >\n        {text}\n      </motion.text>\n    );\n  }\n\n  return (\n    <g style={{ transform: `translate(${data.x}px, ${data.y}px)` }}>{label}</g>\n  );\n};\n\nBubbleLabel.defaultProps = {\n  wrap: true,\n  fill: '#000',\n  fontSize: 14,\n  fontFamily: 'sans-serif'\n};\n","import React, { FC, Fragment, ReactElement } from 'react';\nimport { motion } from 'framer-motion';\nimport { HierarchyCircularNode } from 'd3-hierarchy';\nimport { ColorSchemeType, getColor } from '../common/color';\nimport { Bubble, BubbleProps } from './Bubble';\nimport { BubbleLabel, BubbleLabelProps } from './BubbleLabel';\nimport { CloneElement } from 'rdk';\nimport invert from 'invert-color';\nimport chroma from 'chroma-js';\nimport { DEFAULT_TRANSITION } from '../common/Motion';\n\nexport interface BubbleSeriesProps {\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * The internal data object built by d3\n   */\n  data: HierarchyCircularNode<any>[];\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Color scheme for the chart.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Bubble element.\n   */\n  bubble?: ReactElement<BubbleProps, typeof Bubble>;\n\n  /**\n   * Label element.\n   */\n  label?: ReactElement<BubbleLabelProps, typeof BubbleLabel>;\n}\n\nexport const BubbleSeries: FC<Partial<BubbleSeriesProps>> = ({\n  id,\n  data,\n  colorScheme,\n  animated,\n  bubble,\n  label\n}) => {\n  const transition = animated ? DEFAULT_TRANSITION : { type: false, delay: 0 };\n\n  const renderBubble = (item, index) => {\n    const fill = getColor({\n      data,\n      colorScheme,\n      point: item.data,\n      index\n    });\n\n    const textFill = fill\n      ? invert(chroma(fill).darken(0.5).hex(), true)\n      : 'white';\n\n    return (\n      <motion.g\n        key={(item.data as any).key}\n        initial={{\n          scale: 0.5,\n          opacity: 0\n        }}\n        animate={{\n          scale: 1,\n          opacity: 1\n        }}\n        transition={transition}\n      >\n        <CloneElement<BubbleProps>\n          element={bubble}\n          id={`${id}-bubble`}\n          animated={animated}\n          data={item}\n          fill={fill}\n        />\n        <CloneElement<BubbleLabelProps>\n          element={label}\n          id={`${id}-label`}\n          animated={animated}\n          data={item}\n          fill={textFill}\n        />\n      </motion.g>\n    );\n  };\n\n  return <Fragment>{data.map(renderBubble)}</Fragment>;\n};\n\nBubbleSeries.defaultProps = {\n  colorScheme: 'cybertron',\n  animated: true,\n  bubble: <Bubble />,\n  label: <BubbleLabel />\n};\n","import React, { FC, ReactElement, useCallback } from 'react';\nimport { hierarchy, pack } from 'd3-hierarchy';\nimport { CloneElement } from 'rdk';\nimport {\n  ChartContainer,\n  ChartContainerChildProps,\n  ChartProps,\n  ChartShallowDataShape\n} from '../common';\nimport { BubbleSeries, BubbleSeriesProps } from './BubbleSeries';\n\nexport interface BubbleChartProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * The series component that renders the arc components.\n   */\n  series?: ReactElement<BubbleSeriesProps, typeof BubbleSeries>;\n}\n\nexport const BubbleChart: FC<Partial<BubbleChartProps>> = ({\n  data,\n  id,\n  width,\n  height,\n  className,\n  containerClassName,\n  margins,\n  series\n}) => {\n  const getData = useCallback(\n    (cw: number, ch: number) => {\n      const bubble = pack().size([cw, ch]).padding(3);\n\n      const root = hierarchy<any>({ children: data })\n        .sum((d) => d.data)\n        .sort((a, b) => b.data - a.data);\n\n      return bubble(root).leaves();\n    },\n    [data]\n  );\n\n  const renderChart = useCallback(\n    ({ chartWidth, chartHeight, ...rest }: ChartContainerChildProps) => {\n      const circles = getData(chartWidth, chartHeight);\n\n      return (\n        <CloneElement<BubbleSeriesProps>\n          element={series}\n          id={`${rest.id}-series`}\n          data={circles}\n        />\n      );\n    },\n    [series, getData]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      containerClassName={containerClassName}\n      margins={margins}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      className={className}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n\nBubbleChart.defaultProps = {\n  data: [],\n  margins: 10,\n  series: <BubbleSeries />\n};\n","import React, { FC } from 'react';\nimport { calculateDimensions, wrapText } from '../common/utils';\nimport { formatValue } from '../common/utils/formatting';\n\nexport interface TreeMapLabelProps {\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * The internal data object built by d3\n   */\n  data: any;\n\n  /**\n   * Font size of the text.\n   */\n  fontSize?: number;\n\n  /**\n   * Font family of the text.\n   */\n  fontFamily?: string;\n\n  /**\n   * Fill of the text.\n   */\n  fill?: string;\n\n  /**\n   * Should wrap text or not.\n   */\n  wrap?: boolean;\n\n  /**\n   * Placement of the text.\n   */\n  placement?: 'start' | 'middle' | 'end';\n}\n\nexport const TreeMapLabel: FC<Partial<TreeMapLabelProps>> = ({\n  id,\n  data,\n  fill,\n  wrap,\n  placement,\n  fontSize,\n  fontFamily\n}) => {\n  const key = data.data.key;\n  const width = data.x1 - data.x0;\n  const text = wrapText({\n    key,\n    fontFamily,\n    fontSize,\n    paddingX: 10,\n    wrap,\n    paddingY: 10,\n    width,\n    height: data.y1 - data.y0\n  });\n  const size = calculateDimensions(\n    typeof text === 'string' ? text : key,\n    fontFamily,\n    fontSize\n  );\n\n  const offsetX =\n    placement === 'start'\n      ? 10\n      : placement === 'middle'\n        ? (width - size.width) / 2\n        : width - size.width - 10;\n\n  return (\n    <g style={{ transform: `translate(${offsetX}px, 15px)` }}>\n      <text\n        id={`${id}-text`}\n        style={{ pointerEvents: 'none', fontFamily, fontSize }}\n        fill={fill}\n      >\n        {text}\n      </text>\n    </g>\n  );\n};\n\nTreeMapLabel.defaultProps = {\n  fill: '#FFF',\n  wrap: true,\n  fontSize: 14,\n  fontFamily: 'sans-serif',\n  placement: 'start'\n};\n","import React, {\n  FC,\n  ReactElement,\n  useRef,\n  useState,\n  Fragment,\n  useMemo\n} from 'react';\nimport { motion } from 'framer-motion';\nimport chroma from 'chroma-js';\nimport { ChartTooltip, ChartTooltipProps } from '../common/Tooltip';\nimport { CloneElement } from 'rdk';\nimport { DEFAULT_TRANSITION } from '../common/Motion';\nimport { useHoverIntent } from '../common/utils/useHoverIntent';\n\nexport interface TreeMapRectProps {\n  /**\n   * The internal data object built by d3\n   */\n  data: any;\n\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * Fill for the rect.\n   */\n  fill: string;\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Cursor for the element.\n   */\n  cursor?: string;\n\n  /**\n   * Tooltip element.\n   */\n  tooltip?: ReactElement<ChartTooltipProps, typeof ChartTooltip> | null;\n\n  /**\n   * Event for when the arc is clicked.\n   */\n  onClick?: (event, data) => void;\n\n  /**\n   * Event for when the arc has mouse enter.\n   */\n  onMouseEnter?: (event, data) => void;\n\n  /**\n   * Event for when the arc has mouse leave.\n   */\n  onMouseLeave?: (event, data) => void;\n}\n\nexport const TreeMapRect: FC<Partial<TreeMapRectProps>> = ({\n  data,\n  fill,\n  animated,\n  cursor,\n  tooltip,\n  onMouseEnter,\n  onMouseLeave,\n  onClick\n}) => {\n  const [internalActive, setInternalActive] = useState<boolean>(false);\n  const rectRef = useRef<any | null>(null);\n  const transition = animated ? DEFAULT_TRANSITION : { type: false, delay: 0 };\n  const currentFill = internalActive ? chroma(fill).darken(0.8).hex() : fill;\n\n  const { pointerOut, pointerOver } = useHoverIntent({\n    onPointerOver: (event) => {\n      setInternalActive(true);\n      onMouseEnter?.(event, data);\n    },\n    onPointerOut: (event) => {\n      setInternalActive(false);\n      onMouseLeave?.(event, data);\n    }\n  });\n\n  const tooltipLabel = useMemo(() => {\n    const getKey = (node): string[] => {\n      if (!node.parent) {\n        return [];\n      }\n      return [...getKey(node.parent), node.data.key];\n    };\n    return getKey(data).join(' -> ');\n  }, [data]);\n\n  return (\n    <Fragment>\n      <motion.rect\n        ref={rectRef}\n        initial={{\n          fill: currentFill,\n          width: data.x1 - data.x0,\n          height: data.y1 - data.y0\n        }}\n        animate={{\n          fill: currentFill,\n          width: data.x1 - data.x0,\n          height: data.y1 - data.y0\n        }}\n        style={{ cursor }}\n        transition={transition}\n        onClick={(event) => {\n          onClick?.(event, data);\n        }}\n        onPointerOver={pointerOver}\n        onPointerOut={pointerOut}\n      />\n      {tooltip && !tooltip.props.disabled && (\n        <CloneElement<ChartTooltipProps>\n          element={tooltip}\n          visible={!!internalActive}\n          reference={rectRef}\n          value={{ y: data.value, x: tooltipLabel }}\n        />\n      )}\n    </Fragment>\n  );\n};\n\nTreeMapRect.defaultProps = {\n  cursor: 'pointer',\n  tooltip: <ChartTooltip />\n};\n","import React, { FC, Fragment, ReactElement } from 'react';\nimport { motion } from 'framer-motion';\nimport { CloneElement } from 'rdk';\nimport { ColorSchemeType, getColor } from '../common/color';\nimport { TreeMapLabel, TreeMapLabelProps } from './TreeMapLabel';\nimport { TreeMapRect, TreeMapRectProps } from './TreeMapRect';\nimport invert from 'invert-color';\nimport chroma from 'chroma-js';\nimport { DEFAULT_TRANSITION } from '../common/Motion';\n\nexport interface TreeMapSeriesProps {\n  /**\n   * Id set by the parent.\n   */\n  id: string;\n\n  /**\n   * The internal data object built by d3\n   */\n  data: any[];\n\n  /**\n   * Whether the chart is animated or not.\n   */\n  animated?: boolean;\n\n  /**\n   * Color scheme for the chart.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Rect element to be rendered.\n   */\n  rect?: ReactElement<TreeMapRectProps, typeof TreeMapRect>;\n\n  /**\n   * Label element to be rendered.\n   */\n  label?: ReactElement<TreeMapLabelProps, typeof TreeMapLabel>;\n}\n\nexport const TreeMapSeries: FC<Partial<TreeMapSeriesProps>> = ({\n  id,\n  data,\n  colorScheme,\n  animated,\n  rect,\n  label\n}) => {\n  const transition = animated ? DEFAULT_TRANSITION : { type: false, delay: 0 };\n\n  const renderItem = (item: any, index: number) => {\n    const fill = getColor({\n      data,\n      colorScheme,\n      point: item.data,\n      index\n    });\n\n    const textFill = fill\n      ? invert(chroma(fill).darken(0.5).hex(), true)\n      : 'white';\n\n    return (\n      <motion.g\n        key={item.data.key}\n        initial={{\n          scale: 0.5,\n          opacity: 0,\n          x: item.x0,\n          y: item.y0\n        }}\n        animate={{\n          scale: 1,\n          opacity: 1,\n          x: item.x0,\n          y: item.y0\n        }}\n        transition={transition}\n      >\n        <CloneElement<TreeMapRectProps>\n          element={rect}\n          id={`${id}-${item.data.key}-rect`}\n          animated={animated}\n          data={item}\n          fill={fill}\n        />\n        <CloneElement<TreeMapLabelProps>\n          element={label}\n          id={`${id}-${item.data.key}-label`}\n          data={item}\n          fill={textFill}\n        />\n      </motion.g>\n    );\n  };\n\n  return <Fragment>{data.map((d, index) => renderItem(d, index))}</Fragment>;\n};\n\nTreeMapSeries.defaultProps = {\n  colorScheme: 'cybertron',\n  animated: true,\n  rect: <TreeMapRect />,\n  label: <TreeMapLabel />\n};\n","import React, { FC, ReactElement, useCallback } from 'react';\nimport {\n  ChartContainer,\n  ChartContainerChildProps,\n  ChartProps\n} from '../common/containers/ChartContainer';\nimport { ChartNestedDataShape, ChartShallowDataShape } from '../common/data';\nimport { hierarchy, treemap, treemapSquarify } from 'd3-hierarchy';\nimport { TreeMapSeries, TreeMapSeriesProps } from './TreeMapSeries';\nimport { CloneElement } from 'rdk';\n\nexport interface TreeMapProps extends ChartProps {\n  /**\n   * Data the chart will receive to render.\n   */\n  data: ChartShallowDataShape[] | ChartNestedDataShape[];\n\n  /**\n   * The series component that renders the components.\n   */\n  series?: ReactElement<TreeMapSeriesProps, typeof TreeMapSeries>;\n\n  /**\n   * Inner padding for the treemap. Defaults to 5.\n   */\n  paddingInner?: number;\n\n  /**\n   * Outer padding for the treemap. Defaults to 5.\n   */\n  paddingOuter?: number;\n\n  /**\n   * Padding top for the treemap. This is used for the title\n   * spacing in nested situations. Defaults to 30.\n   */\n  paddingTop?: number;\n}\n\nexport const TreeMap: FC<Partial<TreeMapProps>> = ({\n  data,\n  id,\n  containerClassName,\n  paddingInner,\n  paddingTop,\n  paddingOuter,\n  width,\n  height,\n  className,\n  margins,\n  series\n}) => {\n  const getData = useCallback(\n    (cw: number, ch: number) => {\n      const root = hierarchy<any>({ data: data }, (d) => d.data)\n        .sum((d) => d.data)\n        .sort((a, b) => b.data - a.data);\n\n      const t = treemap()\n        .size([cw, ch])\n        .tile(treemapSquarify)\n        .round(true)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .paddingTop(paddingTop);\n\n      const tree = t(root);\n      const nodes = [];\n\n      const getAllNodes = (node) => {\n        if (node?.parent) {\n          // Don't add root node\n          nodes.push(node);\n        }\n        for (let child of node?.children || []) {\n          getAllNodes(child);\n        }\n      };\n\n      getAllNodes(tree);\n      return nodes;\n    },\n    [data, paddingInner, paddingOuter, paddingTop]\n  );\n\n  const renderChart = useCallback(\n    ({ chartWidth, chartHeight, ...rest }: ChartContainerChildProps) => {\n      const datas = getData(chartWidth, chartHeight);\n      return (\n        <CloneElement<TreeMapSeriesProps>\n          element={series}\n          {...rest}\n          id={`${id || rest.id}-series`}\n          data={datas}\n        />\n      );\n    },\n    [series, getData, id]\n  );\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      containerClassName={containerClassName}\n      margins={margins}\n      xAxisVisible={false}\n      yAxisVisible={false}\n      className={className}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n\nTreeMap.defaultProps = {\n  margins: 0,\n  paddingInner: 5,\n  paddingOuter: 5,\n  paddingTop: 30,\n  series: <TreeMapSeries />,\n  data: []\n};\n","import React, { FC, useCallback } from 'react';\nimport {\n  ChartInternalDataTypes,\n  ChartShallowDataShape,\n  ColorSchemeType,\n  DEFAULT_TRANSITION,\n  formatValue,\n  getColor\n} from '../common';\nimport { motion } from 'framer-motion';\nimport classNames from 'classnames';\nimport css from './BarListSeries.module.css';\n\nexport type BarListLabelPosition = 'none' | 'top' | 'start' | 'end' | 'bottom';\n\nexport interface BarListSeriesProps {\n  /**\n   * Data for the chart.\n   */\n  data?: ChartShallowDataShape[];\n\n  /**\n   * Color scheme for the chart.\n   */\n  colorScheme?: ColorSchemeType;\n\n  /**\n   * The label position.\n   */\n  labelPosition?: BarListLabelPosition;\n\n  /**\n   * The value position.\n   */\n  valuePosition?: BarListLabelPosition;\n\n  /**\n   * The bar item class name.\n   */\n  itemClassName?: string;\n\n  /**\n   * Label css class name.\n   */\n  labelClassName?: string;\n\n  /**\n   * Label value class name.\n   */\n  valueClassName?: string;\n\n  /**\n   * Bar component class name.\n   */\n  barClassName?: string;\n\n  /**\n   * Bar container class name.\n   */\n  outerBarClassName?: string;\n\n  /**\n   * Custom label format.\n   */\n  labelFormat?: (data: ChartInternalDataTypes, index: number) => any;\n\n  /**\n   * Custom value format\n   */\n  valueFormat?: (data: ChartInternalDataTypes, index: number) => any;\n\n  /**\n   * Item was clicked.\n   */\n  onItemClick?: (data: ChartShallowDataShape) => void;\n\n  /**\n   * Item had mouse enter.\n   */\n  onItemMouseEnter?: (data: ChartShallowDataShape) => void;\n\n  /**\n   * Item had mouse leave.\n   */\n  onItemMouseLeave?: (data: ChartShallowDataShape) => void;\n}\n\nexport const BarListSeries: FC<Partial<BarListSeriesProps>> = ({\n  data,\n  colorScheme,\n  itemClassName,\n  labelClassName,\n  outerBarClassName,\n  valueClassName,\n  labelFormat,\n  barClassName,\n  labelPosition,\n  valuePosition,\n  valueFormat,\n  onItemClick,\n  onItemMouseEnter,\n  onItemMouseLeave\n}) => {\n  const renderBar = useCallback(\n    (item, index) => {\n      const fill = getColor({\n        data,\n        colorScheme,\n        point: item.data,\n        index\n      });\n\n      return (\n        <div className={classNames(css.outerBar, outerBarClassName)}>\n          <motion.div\n            transition={DEFAULT_TRANSITION}\n            className={classNames(css.bar, barClassName)}\n            initial={{ width: '0%' }}\n            animate={{ width: `${item.data}%` }}\n            style={{ background: fill }}\n          />\n        </div>\n      );\n    },\n    [barClassName, outerBarClassName, colorScheme, data]\n  );\n\n  return (\n    <>\n      {data.map((d, i) => {\n        const label = labelFormat ? labelFormat(d.key as any, i) : d.key;\n\n        const valueLabel = valueFormat\n          ? valueFormat(d.metadata.value, i)\n          : formatValue(d.metadata.value);\n\n        return (\n          <div\n            key={d.key as string}\n            role=\"listitem\"\n            className={classNames(css.item, itemClassName, {\n              [css.clickable]: onItemClick,\n              [css.valueBottom]: valuePosition === 'bottom',\n              [css.valueStart]: valuePosition === 'start',\n              [css.valueEnd]: valuePosition === 'end',\n              [css.valueNone]: valuePosition === 'none',\n              [css.labelBottom]: labelPosition === 'bottom',\n              [css.labelTop]: labelPosition === 'top',\n              [css.labelStart]: labelPosition === 'start',\n              [css.labelEnd]: labelPosition === 'end',\n              [css.labelNone]: labelPosition === 'none'\n            })}\n            onMouseEnter={() => onItemMouseEnter?.(d)}\n            onMouseLeave={() => onItemMouseLeave?.(d)}\n            onClick={() => onItemClick?.(d)}\n          >\n            <label className={classNames(css.label, labelClassName)}>\n              {label}\n            </label>\n            {renderBar(d, i)}\n            <label\n              title={valueLabel}\n              className={classNames(css.valueLabel, valueClassName)}\n            >\n              <small>{valueLabel}</small>\n            </label>\n          </div>\n        );\n      })}\n    </>\n  );\n};\n\nBarListSeries.defaultProps = {\n  colorScheme: 'cybertron',\n  labelPosition: 'top',\n  valuePosition: 'none'\n};\n","import { max } from 'd3-array';\nimport { scaleLinear } from 'd3-scale';\nimport { motion } from 'framer-motion';\nimport { CloneElement, useId } from 'rdk';\nimport React, { FC, ReactElement, useMemo } from 'react';\nimport { ChartShallowDataShape } from '../common';\nimport { BarListSeries, BarListSeriesProps } from './BarListSeries';\n\nexport interface BarListProps {\n  /**\n   * ID for the chart.\n   */\n  id?: string;\n\n  /**\n   * CSS Classname for the element.\n   */\n  className?: string;\n\n  /**\n   * Style for the element.\n   */\n  style?: React.CSSProperties;\n\n  /**\n   * Data for the chart.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * Sort direction of the data.\n   */\n  sortDirection?: 'asc' | 'desc' | 'none';\n\n  /**\n   * Series to render.\n   */\n  series?: ReactElement<BarListSeriesProps, typeof BarList>;\n\n  /**\n   * Whether the values are percentages or absolute values.\n   * In the latter case, the chart would be relative\n   */\n  type?: 'percent' | 'count'\n}\n\nexport const BarList: FC<BarListProps> = ({\n  data,\n  id,\n  className,\n  sortDirection,\n  style,\n  series,\n  type\n}) => {\n  const curId = useId(id);\n\n  const mashedData = useMemo(() => {\n    const maxVal = type === 'count' ? max(data, (d) => d.data) : 100;\n    const domainVal = maxVal == 0 ? [0] : [0, maxVal];\n    const groupScale = scaleLinear().domain(domainVal).rangeRound([0, 100]);\n\n    const mashed = data.map((d) => ({\n      ...d,\n      data: groupScale(d.data as number),\n      metadata: {\n        value: d.data,\n        percent: (data.length * (d.data as number)) / 100\n      }\n    }));\n\n    if (sortDirection === 'asc') {\n      mashed.sort((a, b) => a.data - b.data);\n    } else if (sortDirection === 'desc') {\n      mashed.sort((a, b) => b.data - a.data);\n    }\n\n    return mashed;\n  }, [data, sortDirection]);\n\n  return (\n    <motion.section\n      role=\"list\"\n      variants={{\n        initial: {\n          transition: {\n            staggerChildren: 0.05,\n            staggerDirection: -1 as any\n          }\n        },\n        animate: {\n          transition: {\n            staggerChildren: 0.07,\n            delayChildren: 0.2\n          }\n        }\n      }}\n      id={curId}\n      className={className}\n      style={style}\n    >\n      <CloneElement<BarListSeriesProps> element={series} data={mashedData} />\n    </motion.section>\n  );\n};\n\nBarList.defaultProps = {\n  data: [],\n  sortDirection: 'desc',\n  series: <BarListSeries />,\n  type: 'count'\n};\n","import React, { FC } from 'react';\nimport { motion } from 'framer-motion';\nimport { DEFAULT_TRANSITION, schemes } from '../common';\n\nexport interface MeterColumnProps {\n  /**\n   * The value of the meter.\n   */\n  value: number;\n\n  /**\n   * The height of the column.\n   */\n  height?: number;\n\n  /**\n   * The index of the column.\n   */\n  index: number;\n\n  /**\n   * The scale to use.\n   */\n  scale: any;\n\n  /**\n   * The active fill color.\n   */\n  activeFill: string;\n\n  /**\n   * The inactive fill color.\n   */\n  inActiveFill: string;\n\n  /**\n   * Additional class names to apply.\n   */\n  className?: string;\n\n  /**\n   * The total number of columns. Set internally.\n   */\n  count?: number;\n\n  /**\n   * Whether to animate the column.\n   */\n  animated?: boolean;\n}\n\nexport const MeterColumn: FC<Partial<MeterColumnProps>> = ({\n  index,\n  scale,\n  value,\n  count,\n  height,\n  className,\n  animated,\n  activeFill,\n  inActiveFill\n}) => {\n  const isActive = scale(index) <= value;\n  const fill = isActive ? activeFill : inActiveFill;\n  const transition = animated\n    ? {\n      ...DEFAULT_TRANSITION,\n      delay: (index / count) * 0.5\n    }\n    : {\n      type: false,\n      delay: 0\n    };\n\n  return (\n    <motion.div\n      key={index}\n      initial={{\n        background: inActiveFill,\n        height\n      }}\n      animate={{\n        background: fill,\n        height\n      }}\n      tranisition={transition}\n      className={className}\n    />\n  );\n};\n\nMeterColumn.defaultProps = {\n  activeFill: schemes.cybertron[0],\n  inActiveFill: '#414242',\n  height: 32,\n  animated: true\n};\n","import React, { FC, ReactElement } from 'react';\nimport { scaleLinear } from 'd3-scale';\nimport classNames from 'classnames';\nimport { MeterColumn, MeterColumnProps } from './MeterColumn';\nimport { CloneElement } from 'rdk';\nimport css from './Meter.module.css';\n\nexport interface MeterProps {\n  /**\n   * The value of the meter.\n   */\n  value: number;\n\n  /**\n   * The minimum value of the meter.\n   */\n  min?: number;\n\n  /**\n   * The maximum value of the meter.\n   */\n  max?: number;\n\n  /**\n   * The number of columns to display.\n   */\n  columns?: number;\n\n  /**\n   * Additional class names to apply.\n   */\n  className?: string;\n\n  /**\n   * The gap between columns.\n   */\n  gap?: number;\n\n  /**\n   * Additional styles to apply.\n   */\n  style?: React.CSSProperties;\n\n  /**\n   * The column to render.\n   */\n  column: ReactElement<MeterColumnProps, typeof MeterColumn> | null;\n}\n\nexport const Meter: FC<Partial<MeterProps>> = ({\n  min,\n  max,\n  className,\n  column,\n  gap,\n  style,\n  value,\n  columns\n}) => {\n  const scale = scaleLinear().domain([min, max]).range([0, 100]);\n  const cols = scale.ticks(columns);\n\n  return (\n    <div\n      className={classNames(css.container, className)}\n      style={{ gap: `${gap}px`, ...style }}\n    >\n      {cols.map((index) => (\n        <CloneElement<MeterColumnProps>\n          element={column}\n          key={index}\n          count={cols.length}\n          index={index}\n          scale={scale}\n          value={value}\n        />\n      ))}\n    </div>\n  );\n};\n\nMeter.defaultProps = {\n  min: 0,\n  max: 100,\n  columns: 10,\n  gap: 15,\n  style: {},\n  column: <MeterColumn />\n};\n","import React, { FC } from 'react';\nimport { ChartNestedDataShape } from '../common/data';\nimport {\n  RadialAreaChart,\n  RadialAreaChartProps,\n  RadialAreaSeries,\n  RadialAreaSeriesProps,\n  RadialPointSeries\n} from '../RadialAreaChart';\nimport {\n  RadialAxis,\n  RadialAxisArcLine,\n  RadialAxisArcSeries\n} from '../common/Axis/RadialAxis';\n\nexport interface RadarChartSeriesProps extends RadialAreaSeriesProps {}\n\nexport const RadarChartSeries: FC<Partial<RadarChartSeriesProps>> = (props) => (\n  <RadialAreaSeries {...props} />\n);\n\nRadarChartSeries.defaultProps = {\n  area: null,\n  type: 'grouped',\n  symbols: <RadialPointSeries show />\n};\n","import React, { FC } from 'react';\nimport { ChartNestedDataShape } from '../common/data';\nimport { RadialAreaChart, RadialAreaChartProps } from '../RadialAreaChart';\nimport {\n  RadialAxis,\n  RadialAxisArcLine,\n  RadialAxisArcSeries\n} from '../common/Axis/RadialAxis';\nimport { RadarChartSeries } from './RadarChartSeries';\n\nexport interface RadarChartProps extends RadialAreaChartProps {\n  data: ChartNestedDataShape[];\n}\n\nexport const RadarChart: FC<Partial<RadarChartProps>> = (props) => (\n  <RadialAreaChart {...props} />\n);\n\nRadarChart.defaultProps = {\n  series: <RadarChartSeries />,\n  axis: (\n    <RadialAxis\n      type=\"category\"\n      arcs={\n        <RadialAxisArcSeries\n          count={5}\n          arc={null}\n          line={<RadialAxisArcLine />}\n        />\n      }\n    />\n  )\n};\n","import React, { FC, ReactElement } from 'react';\nimport { ChartShallowDataShape } from '../common/data';\nimport { area } from 'd3-shape';\nimport { InterpolationTypes, interpolate } from '../common/utils';\nimport { ColorSchemeType, getColor, schemes } from '../common/color';\nimport { Gradient, GradientProps, GradientStop } from '../common/Gradient';\nimport { CloneElement } from 'rdk';\nimport { motion } from 'framer-motion';\n\nexport interface FunnelArcProps {\n  /**\n   * Unique identifier for the arc. Set internally by `FunnelChart`.\n   */\n  id: string;\n\n  /**\n   * Data to render the funnel. Set internally by `FunnelChart`.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * Opacity of the funnel arc.\n   */\n  opacity?: number;\n\n  /**\n   * Index of the funnel arc. Set internally by `FunnelChart`.\n   */\n  index?: number;\n\n  /**\n   * The chart funnel style to use.\n   */\n  variant?: 'default' | 'layered';\n\n  /**\n   * xScale for the funnel. Set internally by `FunnelChart`.\n   */\n  xScale: any;\n\n  /**\n   * yScale for the funnel. Set internally by `FunnelChart`.\n   */\n  yScale: any;\n\n  /**\n   * Interpolation for the area. Set internally by `AreaSeries`.\n   */\n  interpolation: InterpolationTypes;\n\n  /**\n   * Color scheme for the chart.\n   */\n  colorScheme: ColorSchemeType;\n\n  /**\n   * Gradient to apply to the area.\n   */\n  gradient: ReactElement<GradientProps, typeof Gradient> | null;\n}\n\nexport const FunnelArc: FC<Partial<FunnelArcProps>> = ({\n  data,\n  id,\n  xScale,\n  opacity,\n  index,\n  variant,\n  yScale,\n  interpolation,\n  colorScheme,\n  gradient\n}) => {\n  // Note: Need to append the last section\n  const internalData = [...data, data[data.length - 1]];\n\n  const areaGenerator = area()\n    .curve(interpolate(interpolation))\n    .x((_d, i) => xScale(i))\n    .y0(yScale(0))\n    .y1(({ data }: any) => yScale(data));\n\n  const areaMirrorGenerator = area()\n    .curve(interpolate(interpolation))\n    .x((_d, i) => xScale(i))\n    .y0(yScale(0))\n    .y1(({ data }: any) => yScale(-data));\n\n  const fillColor = getColor({\n    data,\n    domain: [0, 1, 2, 3],\n    colorScheme,\n    key: index\n  });\n\n  const fillTop = gradient ? `url(#gradient-${id}-top)` : fillColor;\n  const fillBottom = gradient ? `url(#gradient-${id}-bottom)` : fillColor;\n\n  return (\n    <g pointerEvents=\"none\">\n      <motion.path\n        d={areaGenerator(internalData as any[])}\n        fill={fillTop}\n        stroke=\"none\"\n        initial={{\n          opacity: 0\n        }}\n        animate={{\n          opacity\n        }}\n      />\n      <motion.path\n        d={areaMirrorGenerator(internalData as any[])}\n        fill={fillBottom}\n        stroke=\"none\"\n        initial={{\n          opacity: 0\n        }}\n        animate={{\n          opacity\n        }}\n      />\n      {gradient && (\n        <>\n          <CloneElement<GradientProps>\n            element={gradient}\n            id={`gradient-${id}-top`}\n            color={fillColor}\n          />\n          <CloneElement<GradientProps>\n            element={gradient}\n            id={`gradient-${id}-bottom`}\n            color={fillColor}\n          />\n        </>\n      )}\n    </g>\n  );\n};\n\nFunnelArc.defaultProps = {\n  gradient: (\n    <Gradient\n      direction=\"horizontal\"\n      stops={[\n        <GradientStop offset=\"0%\" stopOpacity={1} key=\"stop\" />,\n        <GradientStop offset=\"80%\" stopOpacity={0.5} key=\"start\" />,\n      ]}\n    />\n  ),\n  interpolation: 'smooth',\n  colorScheme: schemes.cybertron[0],\n  animated: true,\n  variant: 'default',\n  opacity: 1\n};\n","import React, { FC } from 'react';\nimport { ChartShallowDataShape } from '../../common/data';\nimport { calculateDimensions, formatValue } from '../../common/utils';\nimport { motion } from 'framer-motion';\n\nexport interface FunnelAxisLabelProps {\n  /**\n   * Data object for the label. Set internally by `FunnelAxis`.\n   */\n  data: ChartShallowDataShape;\n\n  /**\n   * Index of the label. Set internally by `FunnelAxis`.\n   */\n  index: number;\n\n  /**\n   * Color of the text.\n   */\n  fill: string;\n\n  /**\n   * Font size of the text.\n   */\n  fontSize: number;\n\n  /**\n   * Font family of the text.\n   */\n  fontFamily: string;\n\n  /**\n   * Padding of the label.\n   */\n  padding?: number;\n\n  /**\n   * Class name to apply to the text.\n   */\n  className?: string;\n\n  /**\n   * xScale for the funnel. Set internally by `FunnelAxis`.\n   */\n  xScale: any;\n\n  /**\n   * yScale for the funnel. Set internally by `FunnelAxis`.\n   */\n  yScale: any;\n}\n\nexport const FunnelAxisLabel: FC<Partial<FunnelAxisLabelProps>> = ({\n  data,\n  index,\n  xScale,\n  yScale,\n  fontFamily,\n  padding,\n  fontSize,\n  fill,\n  className\n}) => {\n  const x = xScale(index) + padding;\n  const [height] = yScale.range();\n  const y = height / 2 + padding;\n  const label = data.key as string;\n  const nextOffset = xScale(index + 1);\n  const width = (nextOffset ? nextOffset - xScale(index): 0) - padding;\n  const size = calculateDimensions(label, fontFamily, fontSize);\n\n  // If the labels don't fit, just hide them\n  if (size.width > width) {\n    return null;\n  }\n\n  return (\n    <motion.g\n      transform={`translate(${x}, ${y})`}\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n    >\n      <text\n        pointerEvents=\"none\"\n        fill={fill}\n        y={-(fontSize + padding)}\n        className={className}\n        dominantBaseline=\"middle\"\n        fontFamily={fontFamily}\n        fontSize={fontSize * 2}\n      >\n        {formatValue(data.data as any)}\n      </text>\n      <text\n        pointerEvents=\"none\"\n        fill={fill}\n        className={className}\n        dominantBaseline=\"middle\"\n        fontFamily={fontFamily}\n        fontSize={fontSize}\n      >\n        {label}\n      </text>\n    </motion.g>\n  );\n};\n\nFunnelAxisLabel.defaultProps = {\n  fontSize: 13,\n  padding: 10,\n  fontFamily: 'sans-serif',\n  fill: '#fff'\n};\n","import React, { FC } from 'react';\n\nexport interface FunnelAxisLineProps {\n  /**\n   * Color of the axis lines.\n   */\n  strokeColor: string;\n\n  /**\n   * Width of the axis lines.\n   */\n  strokeWidth: number;\n\n  /**\n   * xScale for the funnel. Set internally by `FunnelChart`.\n   */\n  xScale: any;\n\n  /**\n   * yScale for the funnel. Set internally by `FunnelChart`.\n   */\n  yScale: any;\n\n  /**\n   * Index of the line. Set internally by `FunnelAxis`.\n   */\n  index: number;\n}\n\nexport const FunnelAxisLine: FC<Partial<FunnelAxisLineProps>> = ({\n  strokeColor,\n  strokeWidth,\n  yScale,\n  xScale,\n  index\n}) => {\n  const [height] = yScale.range();\n\n  return (\n    <line\n      x1={xScale(index)}\n      y1={0}\n      x2={xScale(index)}\n      y2={height}\n      stroke={strokeColor}\n      strokeWidth={strokeWidth}\n      pointerEvents=\"none\"\n    />\n  );\n};\n\nFunnelAxisLine.defaultProps = {\n  strokeColor: '#333',\n  strokeWidth: 2\n};\n","import React, { FC, Fragment, ReactElement } from 'react';\nimport { ChartShallowDataShape } from '../../common/data';\nimport { range } from 'd3-array';\nimport { FunnelAxisLabel, FunnelAxisLabelProps } from './FunnelAxisLabel';\nimport { CloneElement } from 'rdk';\nimport { FunnelAxisLine, FunnelAxisLineProps } from './FunnelAxisLine';\n\nexport interface FunnelAxisProps {\n  /**\n   * Data to render the funnel. Set internally by `FunnelChart`.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * xScale for the funnel. Set internally by `FunnelChart`.\n   */\n  xScale: any;\n\n  /**\n   * yScale for the funnel. Set internally by `FunnelChart`.\n   */\n  yScale: any;\n\n  /**\n   * The funnel axis line.\n   */\n  line?: ReactElement<FunnelAxisLineProps, typeof FunnelAxisLine> | null;\n\n  /**\n   * Label component for the axis.\n   */\n  label?: ReactElement<FunnelAxisLabelProps, typeof FunnelAxisLabel> | null;\n}\n\nexport const FunnelAxis: FC<Partial<FunnelAxisProps>> = ({\n  data,\n  xScale,\n  yScale,\n  line,\n  label\n}) => {\n  const lines = range(0, data.length);\n\n  return (\n    <>\n      {lines.map(index => (\n        <Fragment key={index}>\n          {line && index !== 0 && (\n            <CloneElement<FunnelAxisLineProps>\n              element={line}\n              index={index}\n              xScale={xScale}\n              yScale={yScale}\n            />\n          )}\n          {label && (\n            <CloneElement<FunnelAxisLabelProps>\n              element={label}\n              index={index}\n              data={data[index]}\n              xScale={xScale}\n              yScale={yScale}\n            />\n          )}\n        </Fragment>\n      ))}\n    </>\n  );\n};\n\nFunnelAxis.defaultProps = {\n  label: <FunnelAxisLabel />,\n  line: <FunnelAxisLine />\n};\n","import React, { FC, ReactElement, useCallback } from 'react';\nimport { scaleLinear } from 'd3-scale';\nimport { max } from 'd3-array';\nimport { CloneElement, useId } from 'rdk';\nimport { FunnelArc, FunnelArcProps } from './FunnelArc';\nimport { FunnelAxis, FunnelAxisProps } from './FunnelAxis';\nimport { ChartContainer, ChartContainerChildProps, ChartProps } from '../common/containers';\nimport { ChartShallowDataShape } from '../common/data';\n\nexport interface FunnelChartProps extends ChartProps {\n  /**\n   * Chart shape used to render the funnel.\n   */\n  data: ChartShallowDataShape[];\n\n  /**\n   * The arc component that renders funnel shape.\n   */\n  arc?: ReactElement<FunnelArcProps, typeof FunnelArc>;\n\n  /**\n   * The axis component that renders the funnel axis.\n   */\n  axis?: ReactElement<FunnelAxisProps, typeof FunnelAxis>;\n}\n\nexport const FunnelChart: FC<FunnelChartProps> = ({\n  data,\n  width,\n  arc,\n  axis,\n  margins,\n  height,\n  className,\n  containerClassName,\n  ...rest\n}) => {\n  const id = useId(rest.id);\n\n  // Calculate the funnel data on mount and when data changes\n  const getScales = useCallback(({ chartWidth, chartHeight }) => {\n    const yScale = scaleLinear()\n      .domain([\n        -max(data, ({ data }) => data),\n        max(data, ({ data }) => data)\n      ])\n      .nice()\n      .range([chartHeight, 0]);\n\n    const xScale = scaleLinear()\n      .domain([0, data.length])\n      .range([0, chartWidth]);\n\n    return {\n      yScale,\n      xScale\n    };\n  }, [data]);\n\n  const getDatas = useCallback(({ chartWidth, chartHeight }) => {\n    // The 'layered' variant is actually just a series of funnel charts\n    // laid on top of each other to create the effect of a layered funnel.\n    if (arc.props.variant === 'layered') {\n      const offset = chartHeight / 4;\n      const halfOffset = offset / 2;\n\n      return {\n        halfOffset,\n        datas: [\n          { data, ...getScales({ chartHeight: chartHeight, chartWidth }) },\n          { data, ...getScales({ chartHeight: chartHeight - offset, chartWidth }) },\n          { data, ...getScales({ chartHeight: chartHeight - (offset * 2), chartWidth }) },\n        ]\n      };\n    } else {\n      return {\n        halfOffset: 0,\n        datas: [\n          { data, ...getScales({ chartHeight: chartHeight, chartWidth }) }\n        ]\n      };\n    }\n  }, [data, arc, getScales]);\n\n  const renderChart = useCallback(\n    ({ id, chartWidth, chartHeight, chartSized }: ChartContainerChildProps) => {\n      if (!chartSized) {\n        return null;\n      }\n\n      const { datas, halfOffset } = getDatas({ chartHeight, chartWidth });\n\n      return (\n        <>\n          {datas.map((d, i) => (\n            <g key={i} style={{ transform: `translate(0, ${i * halfOffset}px)` }}>\n              <CloneElement<FunnelArcProps>\n                element={arc}\n                {...d}\n                id={id}\n                index={i}\n              />\n            </g>\n          ))}\n          <CloneElement<FunnelAxisProps>\n            element={axis}\n            data={data}\n            xScale={datas[0].xScale}\n            yScale={datas[0].yScale}\n          />\n        </>\n      );\n    }, [getDatas, axis, data, arc]);\n\n  return (\n    <ChartContainer\n      id={id}\n      width={width}\n      height={height}\n      margins={margins}\n      containerClassName={containerClassName}\n      className={className}\n    >\n      {renderChart}\n    </ChartContainer>\n  );\n};\n\nFunnelChart.defaultProps = {\n  margins: 0,\n  arc: <FunnelArc />,\n  axis: <FunnelAxis />\n};\n"],"names":["line","transform","start","end","path","value","scale","dimensions","label","point","textAnchor","translate","arc","Fragment","d","maxIndex","node","min","max","css","layout","transformDataToStack","transformStackToData","entry","symbol","extent","yAxisGrid","xAxisGrid","inverse","target","tooltip","range","interpolate","PADDING","HALF_PADDING","id","gradient","item","coords","markLine","area","data","zoom","width","isCategorical","padding","color","index","currentColorShade","animate","glowStyles","bar","delay","height","getValueScale","Map","marker","projection","modifiers","useInterpolate","activeNodes","activeLinks","link","nodeMap","getXScale","innerRadius","fill","valueLabel","columns","xScale","yScale","cell","cellCount","outerBar","minValue","maxValue","sets","intersections","bb","tooltipLabel"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","x_google_ignoreList":[132]}